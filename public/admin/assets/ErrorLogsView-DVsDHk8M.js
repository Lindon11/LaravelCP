import{h as o,a as e,o as l,_ as O,e as U,F as C,i as L,k as j,m as N,s as H,b as d,A as x,B as K,v as z,N as W,n as f,d as y,G as Z,t as a,l as c,c as G,w as J,T as Y,E as q,x as B,K as $,g as w,y as Q,O as X,H as ee}from"./index-BJoLCnnK.js";function te(k,p){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function se(k,p){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function le(k,p){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const oe={class:"space-y-6"},ae={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4"},re={class:"text-2xl font-bold text-white"},ne={class:"text-sm text-slate-400"},ie={class:"flex flex-wrap items-center gap-4 p-4 bg-slate-800/30 backdrop-blur-sm rounded-xl border border-slate-700/50"},de={class:"flex items-center gap-2"},ce=["value"],ue={class:"flex items-center gap-2"},be={class:"flex-1 min-w-[200px]"},xe={class:"relative"},pe={class:"flex items-center gap-2"},ve=["disabled"],ge=["disabled"],me={key:0,class:"flex flex-col items-center justify-center py-16"},fe={key:1,class:"bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden"},we={key:0,class:"flex flex-col items-center justify-center py-16"},he={class:"w-16 h-16 rounded-2xl bg-emerald-500/20 flex items-center justify-center mb-4"},_e={key:1,class:"divide-y divide-slate-700/50 max-h-[600px] overflow-y-auto"},ye=["onClick"],ke={class:"flex items-start justify-between gap-4 mb-2"},Ce={class:"flex items-center gap-3"},Le={class:"text-sm text-slate-400"},je={class:"text-sm text-slate-300 font-mono mb-2 line-clamp-2"},Ee={class:"flex flex-wrap items-center gap-3 text-xs text-slate-500"},Te={key:0,class:"flex items-center gap-1"},Ve={key:1,class:"flex items-center gap-1"},Me={key:2,class:"flex items-center gap-1"},Ne={key:2,class:"flex items-center justify-center gap-4 p-4 border-t border-slate-700/50"},Be=["disabled"],$e={class:"text-sm text-slate-400"},De=["disabled"],Se={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Pe={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col"},Ae={class:"flex items-center justify-between p-6 border-b border-slate-700 shrink-0"},Fe={class:"flex items-center gap-3"},Re={class:"p-6 overflow-y-auto flex-1 space-y-6"},Ie={class:"text-slate-300"},Oe={class:"p-4 bg-slate-900/50 rounded-xl text-sm text-slate-300 font-mono overflow-x-auto whitespace-pre-wrap break-words"},Ue={key:0},He={class:"text-slate-300 font-mono text-sm"},Ke={key:1},ze={class:"p-4 bg-slate-900/50 rounded-xl text-xs text-red-400 font-mono overflow-x-auto max-h-[300px] overflow-y-auto whitespace-pre-wrap break-words"},We={key:2},Ze={class:"p-4 bg-slate-900/50 rounded-xl text-xs text-slate-300 font-mono overflow-x-auto whitespace-pre-wrap break-words"},Ge={__name:"ErrorLogsView",setup(k){const p=Q(),v=w(!1),g=w([]),r=w(null),i=w(1),m=w(1),u=$({level:"",dateRange:"week",search:""}),h=$({emergency:0,critical:0,error:0,warning:0,info:0}),D=[{value:"emergency",label:"Emergency"},{value:"alert",label:"Alert"},{value:"critical",label:"Critical"},{value:"error",label:"Error"},{value:"warning",label:"Warning"},{value:"notice",label:"Notice"},{value:"info",label:"Info"},{value:"debug",label:"Debug"}],S=[{level:"emergency",label:"Emergency",borderColor:"border-l-red-600"},{level:"critical",label:"Critical",borderColor:"border-l-orange-500"},{level:"error",label:"Errors",borderColor:"border-l-red-500"},{level:"warning",label:"Warnings",borderColor:"border-l-amber-500"},{level:"info",label:"Info",borderColor:"border-l-blue-500"}],E=n=>({emergency:"bg-red-600 text-white",alert:"bg-red-600 text-white",critical:"bg-orange-500 text-white",error:"bg-red-500 text-white",warning:"bg-amber-500 text-slate-900",notice:"bg-blue-500 text-white",info:"bg-sky-500 text-white",debug:"bg-slate-500 text-white"})[n]||"bg-slate-500 text-white",P=n=>({emergency:"border-l-red-600",alert:"border-l-red-600",critical:"border-l-orange-500",error:"border-l-red-500",warning:"border-l-amber-500",notice:"border-l-blue-500",info:"border-l-sky-500",debug:"border-l-slate-500"})[n]||"border-l-slate-500",b=async()=>{v.value=!0;try{const n=await B.get("/admin/error-logs",{params:{page:i.value,per_page:50,...u}});g.value=n.data.data||[],m.value=n.data.last_page||1,n.data.stats&&Object.assign(h,n.data.stats)}catch{p.error("Failed to load error logs")}finally{v.value=!1}},A=()=>{confirm("Clear all error logs? This cannot be undone.")&&F()},F=async()=>{try{await B.delete("/admin/error-logs/clear"),g.value=[],Object.keys(h).forEach(n=>h[n]=0),p.success("Error logs cleared")}catch{p.error("Failed to clear logs")}},T=n=>new Date(n).toLocaleString(),R=()=>{i.value>1&&(i.value--,b())},I=()=>{i.value<m.value&&(i.value++,b())};return U(b),(n,t)=>(l(),o("div",oe,[e("div",ae,[(l(),o(C,null,L(S,s=>e("div",{key:s.level,class:f(["p-4 rounded-xl border-l-4 bg-slate-800/30 backdrop-blur-sm",s.borderColor])},[e("p",re,a(h[s.level]||0),1),e("p",ne,a(s.label),1)],2)),64))]),e("div",ie,[e("div",de,[t[6]||(t[6]=e("label",{class:"text-sm text-slate-400"},"Level:",-1)),j(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.level=s),onChange:b,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[t[5]||(t[5]=e("option",{value:""},"All Levels",-1)),(l(),o(C,null,L(D,s=>e("option",{key:s.value,value:s.value},a(s.label),9,ce)),64))],544),[[N,u.level]])]),e("div",ue,[t[8]||(t[8]=e("label",{class:"text-sm text-slate-400"},"Range:",-1)),j(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.dateRange=s),onChange:b,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[...t[7]||(t[7]=[H('<option value="today" data-v-46e76016>Today</option><option value="yesterday" data-v-46e76016>Yesterday</option><option value="week" data-v-46e76016>Last 7 Days</option><option value="month" data-v-46e76016>Last 30 Days</option><option value="all" data-v-46e76016>All Time</option>',5)])],544),[[N,u.dateRange]])]),e("div",be,[e("div",xe,[d(x(K),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),j(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.search=s),type:"text",placeholder:"Search logs...",onKeyup:W(b,["enter"]),class:"w-full pl-10 pr-4 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,544),[[z,u.search]])])]),e("div",pe,[e("button",{onClick:b,disabled:v.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg font-medium transition-colors disabled:opacity-50"},[d(x(te),{class:f(["w-5 h-5",v.value&&"animate-spin"])},null,8,["class"]),t[9]||(t[9]=y(" Refresh ",-1))],8,ve),e("button",{onClick:A,disabled:v.value||g.value.length===0,class:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg font-medium transition-colors disabled:opacity-50"},[d(x(Z),{class:"w-5 h-5"}),t[10]||(t[10]=y(" Clear ",-1))],8,ge)])]),v.value?(l(),o("div",me,[...t[11]||(t[11]=[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-slate-400"},"Loading error logs...",-1)])])):(l(),o("div",fe,[g.value.length===0?(l(),o("div",we,[e("div",he,[d(x(se),{class:"w-8 h-8 text-emerald-400"})]),t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-white mb-2"},"No Errors Found",-1)),t[13]||(t[13]=e("p",{class:"text-slate-400"},"The application is running smoothly!",-1))])):(l(),o("div",_e,[(l(!0),o(C,null,L(g.value,s=>{var _,V,M;return l(),o("div",{key:s.id,onClick:Je=>r.value=s,class:f(["p-4 cursor-pointer hover:bg-slate-700/30 transition-colors border-l-4",P(s.level)])},[e("div",ke,[e("div",Ce,[e("span",{class:f(["px-2.5 py-1 text-xs font-bold rounded-md uppercase",E(s.level)])},a(s.level),3),e("span",Le,a(T(s.created_at)),1)])]),e("p",je,a(s.message),1),e("div",Ee,[(_=s.context)!=null&&_.file?(l(),o("span",Te,[d(x(le),{class:"w-3.5 h-3.5"}),y(" "+a(s.context.file),1)])):c("",!0),(V=s.context)!=null&&V.line?(l(),o("span",Ve," Line "+a(s.context.line),1)):c("",!0),(M=s.context)!=null&&M.user_id?(l(),o("span",Me,[d(x(X),{class:"w-3.5 h-3.5"}),y(" User #"+a(s.context.user_id),1)])):c("",!0)])],10,ye)}),128))])),m.value>1?(l(),o("div",Ne,[e("button",{onClick:R,disabled:i.value===1,class:"px-4 py-2 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Be),e("span",$e," Page "+a(i.value)+" of "+a(m.value),1),e("button",{onClick:I,disabled:i.value===m.value,class:"px-4 py-2 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,De)])):c("",!0)])),(l(),G(q,{to:"body"},[d(Y,{name:"modal"},{default:J(()=>{var s;return[r.value?(l(),o("div",Se,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=_=>r.value=null)}),e("div",Pe,[e("div",Ae,[e("div",Fe,[e("span",{class:f(["px-3 py-1.5 text-sm font-bold rounded-lg uppercase",E(r.value.level)])},a(r.value.level),3),t[14]||(t[14]=e("span",{class:"text-lg font-bold text-white"},"Error Details",-1))]),e("button",{onClick:t[4]||(t[4]=_=>r.value=null),class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[d(x(ee),{class:"w-5 h-5"})])]),e("div",Re,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Timestamp",-1)),e("p",Ie,a(T(r.value.created_at)),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Message",-1)),e("pre",Oe,a(r.value.message),1)]),(s=r.value.context)!=null&&s.file?(l(),o("div",Ue,[t[17]||(t[17]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Location",-1)),e("p",He,a(r.value.context.file)+":"+a(r.value.context.line),1)])):c("",!0),r.value.stack_trace?(l(),o("div",Ke,[t[18]||(t[18]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Stack Trace",-1)),e("pre",ze,a(r.value.stack_trace),1)])):c("",!0),r.value.context?(l(),o("div",We,[t[19]||(t[19]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Context",-1)),e("pre",Ze,a(JSON.stringify(r.value.context,null,2)),1)])):c("",!0)])])])):c("",!0)]}),_:1})]))]))}},qe=O(Ge,[["__scopeId","data-v-46e76016"]]);export{qe as default};
