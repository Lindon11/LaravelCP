import{_ as B,e as F,h as a,a as e,F as w,i as k,k as C,m as T,s as M,b as u,z as p,H as U,v as A,I as z,n as m,N as O,d as f,E as J,t as o,l as d,c as K,w as W,T as H,S as Y,x as N,a4 as V,g as y,y as q,o as l,J as G,D as Q}from"./index-DFE_BSD9.js";import{r as X}from"./CheckCircleIcon-vemePCzr.js";import{r as Z}from"./DocumentIcon-B_ADKEri.js";const ee={class:"space-y-6"},te={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4"},se={class:"text-2xl font-bold text-white"},le={class:"text-sm text-slate-400"},ae={class:"flex flex-wrap items-center gap-4 p-4 bg-slate-800/30 backdrop-blur-sm rounded-xl border border-slate-700/50"},oe={class:"flex items-center gap-2"},re=["value"],ne={class:"flex items-center gap-2"},de={class:"flex-1 min-w-[200px]"},ie={class:"relative"},ce={class:"flex items-center gap-2"},ue=["disabled"],be=["disabled"],pe={key:0,class:"flex flex-col items-center justify-center py-16"},xe={key:1,class:"bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden"},ve={key:0,class:"flex flex-col items-center justify-center py-16"},ge={class:"w-16 h-16 rounded-2xl bg-emerald-500/20 flex items-center justify-center mb-4"},me={key:1,class:"divide-y divide-slate-700/50 max-h-[600px] overflow-y-auto"},fe=["onClick"],ye={class:"flex items-start justify-between gap-4 mb-2"},_e={class:"flex items-center gap-3"},he={class:"text-sm text-slate-400"},we={class:"text-sm text-slate-300 font-mono mb-2 line-clamp-2"},ke={class:"flex flex-wrap items-center gap-3 text-xs text-slate-500"},Ce={key:0,class:"flex items-center gap-1"},Le={key:1,class:"flex items-center gap-1"},Ee={key:2,class:"flex items-center gap-1"},Te={key:3,class:"px-2 py-0.5 rounded bg-slate-700 text-slate-300"},Ne={key:4,class:"text-slate-400"},Ve={key:2,class:"flex items-center justify-center gap-4 p-4 border-t border-slate-700/50"},je=["disabled"],De={class:"text-sm text-slate-400"},$e=["disabled"],Re={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Se={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col"},Pe={class:"flex items-center justify-between p-6 border-b border-slate-700 shrink-0"},Ie={class:"flex items-center gap-3"},Be={class:"p-6 overflow-y-auto flex-1 space-y-6"},Fe={class:"text-slate-300"},Me={class:"p-4 bg-slate-900/50 rounded-xl text-sm text-slate-300 font-mono overflow-x-auto whitespace-pre-wrap break-words"},Ue={key:0},Ae={class:"text-slate-300 font-mono text-sm"},ze={key:0},Oe={key:1},Je={class:"p-4 bg-slate-900/50 rounded-xl text-xs text-red-400 font-mono overflow-x-auto max-h-[300px] overflow-y-auto whitespace-pre-wrap break-words"},Ke={key:2},We={class:"text-slate-300 font-mono text-sm break-all"},He={class:"grid grid-cols-2 gap-4"},Ye={key:0},qe={class:"text-slate-300"},Ge={key:1},Qe={class:"text-slate-300"},Xe={key:3},Ze={class:"p-4 bg-slate-900/50 rounded-xl text-xs text-slate-300 font-mono overflow-x-auto whitespace-pre-wrap break-words"},et={__name:"ErrorLogsView",setup(tt){const h=q(),x=y(!1),v=y([]),r=y(null),c=y(1),g=y(1),i=V({level:"",dateRange:"week",search:""}),_=V({emergency:0,critical:0,error:0,warning:0,info:0}),j=[{value:"emergency",label:"Emergency"},{value:"alert",label:"Alert"},{value:"critical",label:"Critical"},{value:"error",label:"Error"},{value:"warning",label:"Warning"},{value:"notice",label:"Notice"},{value:"info",label:"Info"},{value:"debug",label:"Debug"}],D=[{level:"emergency",label:"Emergency",borderColor:"border-l-red-600"},{level:"critical",label:"Critical",borderColor:"border-l-orange-500"},{level:"error",label:"Errors",borderColor:"border-l-red-500"},{level:"warning",label:"Warnings",borderColor:"border-l-amber-500"},{level:"info",label:"Info",borderColor:"border-l-blue-500"}],L=n=>({emergency:"bg-red-600 text-white",alert:"bg-red-600 text-white",critical:"bg-orange-500 text-white",error:"bg-red-500 text-white",warning:"bg-amber-500 text-slate-900",notice:"bg-blue-500 text-white",info:"bg-sky-500 text-white",debug:"bg-slate-500 text-white"})[n]||"bg-slate-500 text-white",$=n=>({emergency:"border-l-red-600",alert:"border-l-red-600",critical:"border-l-orange-500",error:"border-l-red-500",warning:"border-l-amber-500",notice:"border-l-blue-500",info:"border-l-sky-500",debug:"border-l-slate-500"})[n]||"border-l-slate-500",b=async()=>{x.value=!0;try{const n=await N.get("/admin/error-logs",{params:{page:c.value,per_page:50,level:i.level||void 0,dateRange:i.dateRange,search:i.search||void 0}});v.value=n.data.data||[],g.value=n.data.last_page||1,n.data.stats&&Object.assign(_,n.data.stats)}catch(n){h.error("Failed to load error logs"),console.error("Error loading logs:",n)}finally{x.value=!1}},R=()=>{confirm("Clear all error logs? This cannot be undone.")&&S()},S=async()=>{try{await N.delete("/admin/error-logs/clear"),v.value=[],Object.keys(_).forEach(n=>_[n]=0),h.success("Error logs cleared")}catch{h.error("Failed to clear logs")}},E=n=>new Date(n).toLocaleString(),P=()=>{c.value>1&&(c.value--,b())},I=()=>{c.value<g.value&&(c.value++,b())};return F(b),(n,t)=>(l(),a("div",ee,[e("div",te,[(l(),a(w,null,k(D,s=>e("div",{key:s.level,class:m(["p-4 rounded-xl border-l-4 bg-slate-800/30 backdrop-blur-sm",s.borderColor])},[e("p",se,o(_[s.level]||0),1),e("p",le,o(s.label),1)],2)),64))]),e("div",ae,[e("div",oe,[t[6]||(t[6]=e("label",{class:"text-sm text-slate-400"},"Level:",-1)),C(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.level=s),onChange:b,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[t[5]||(t[5]=e("option",{value:""},"All Levels",-1)),(l(),a(w,null,k(j,s=>e("option",{key:s.value,value:s.value},o(s.label),9,re)),64))],544),[[T,i.level]])]),e("div",ne,[t[8]||(t[8]=e("label",{class:"text-sm text-slate-400"},"Range:",-1)),C(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.dateRange=s),onChange:b,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[...t[7]||(t[7]=[M('<option value="today" data-v-7924d232>Today</option><option value="yesterday" data-v-7924d232>Yesterday</option><option value="week" data-v-7924d232>Last 7 Days</option><option value="month" data-v-7924d232>Last 30 Days</option><option value="all" data-v-7924d232>All Time</option>',5)])],544),[[T,i.dateRange]])]),e("div",de,[e("div",ie,[u(p(U),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),C(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.search=s),type:"text",placeholder:"Search logs...",onKeyup:z(b,["enter"]),class:"w-full pl-10 pr-4 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,544),[[A,i.search]])])]),e("div",ce,[e("button",{onClick:b,disabled:x.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg font-medium transition-colors disabled:opacity-50"},[u(p(O),{class:m(["w-5 h-5",x.value&&"animate-spin"])},null,8,["class"]),t[9]||(t[9]=f(" Refresh ",-1))],8,ue),e("button",{onClick:R,disabled:x.value||v.value.length===0,class:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg font-medium transition-colors disabled:opacity-50"},[u(p(J),{class:"w-5 h-5"}),t[10]||(t[10]=f(" Clear ",-1))],8,be)])]),x.value?(l(),a("div",pe,[...t[11]||(t[11]=[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-slate-400"},"Loading error logs...",-1)])])):(l(),a("div",xe,[v.value.length===0?(l(),a("div",ve,[e("div",ge,[u(p(X),{class:"w-8 h-8 text-emerald-400"})]),t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-white mb-2"},"No Errors Found",-1)),t[13]||(t[13]=e("p",{class:"text-slate-400"},"The application is running smoothly!",-1))])):(l(),a("div",me,[(l(!0),a(w,null,k(v.value,s=>(l(),a("div",{key:s.id,onClick:st=>r.value=s,class:m(["p-4 cursor-pointer hover:bg-slate-700/30 transition-colors border-l-4",$(s.level)])},[e("div",ye,[e("div",_e,[e("span",{class:m(["px-2.5 py-1 text-xs font-bold rounded-md uppercase",L(s.level)])},o(s.level),3),e("span",he,o(E(s.created_at)),1)])]),e("p",we,o(s.message),1),e("div",ke,[s.file?(l(),a("span",Ce,[u(p(Z),{class:"w-3.5 h-3.5"}),f(" "+o(s.file),1)])):d("",!0),s.line?(l(),a("span",Le," Line "+o(s.line),1)):d("",!0),s.user_id?(l(),a("span",Ee,[u(p(G),{class:"w-3.5 h-3.5"}),f(" User #"+o(s.user_id),1)])):d("",!0),s.count>1?(l(),a("span",Te,o(s.count)+"x ",1)):d("",!0),s.type?(l(),a("span",Ne,o(s.type),1)):d("",!0)])],10,fe))),128))])),g.value>1?(l(),a("div",Ve,[e("button",{onClick:P,disabled:c.value===1,class:"px-4 py-2 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,je),e("span",De," Page "+o(c.value)+" of "+o(g.value),1),e("button",{onClick:I,disabled:c.value===g.value,class:"px-4 py-2 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,$e)])):d("",!0)])),(l(),K(Y,{to:"body"},[u(H,{name:"modal"},{default:W(()=>[r.value?(l(),a("div",Re,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=s=>r.value=null)}),e("div",Se,[e("div",Pe,[e("div",Ie,[e("span",{class:m(["px-3 py-1.5 text-sm font-bold rounded-lg uppercase",L(r.value.level)])},o(r.value.level),3),t[14]||(t[14]=e("span",{class:"text-lg font-bold text-white"},"Error Details",-1))]),e("button",{onClick:t[4]||(t[4]=s=>r.value=null),class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[u(p(Q),{class:"w-5 h-5"})])]),e("div",Be,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Timestamp",-1)),e("p",Fe,o(E(r.value.created_at)),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Message",-1)),e("pre",Me,o(r.value.message),1)]),r.value.file?(l(),a("div",Ue,[t[17]||(t[17]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Location",-1)),e("p",Ae,[f(o(r.value.file),1),r.value.line?(l(),a("span",ze,":"+o(r.value.line),1)):d("",!0)])])):d("",!0),r.value.trace?(l(),a("div",Oe,[t[18]||(t[18]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Stack Trace",-1)),e("pre",Je,o(r.value.trace),1)])):d("",!0),r.value.url?(l(),a("div",Ke,[t[19]||(t[19]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"URL",-1)),e("p",We,o(r.value.url),1)])):d("",!0),e("div",He,[r.value.ip?(l(),a("div",Ye,[t[20]||(t[20]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"IP Address",-1)),e("p",qe,o(r.value.ip),1)])):d("",!0),r.value.method?(l(),a("div",Ge,[t[21]||(t[21]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Method",-1)),e("p",Qe,o(r.value.method),1)])):d("",!0)]),r.value.context?(l(),a("div",Xe,[t[22]||(t[22]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Context",-1)),e("pre",Ze,o(JSON.stringify(r.value.context,null,2)),1)])):d("",!0)])])])):d("",!0)]),_:1})]))]))}},rt=B(et,[["__scopeId","data-v-7924d232"]]);export{rt as default};
