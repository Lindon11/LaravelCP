import{_ as D,e as x,h as o,a as e,k as g,v as S,m as V,t as l,F as P,i as A,l as N,x as O,g as u,q as U,o as r,n as W}from"./index-D5Yny7xp.js";const B={class:"view-container"},F={class:"filters-row"},M={key:0,class:"loading"},R={key:1,class:"error"},q={key:2,class:"empty"},z={key:3,class:"data-table"},E={class:"player-name"},G={class:"player-name"},I={key:4,class:"pagination"},Q=["disabled"],T={class:"page-info"},$=["disabled"],j={__name:"CombatLogsView",setup(H){const b=u([]),p=u(!0),_=u(null),d=u(""),c=u(""),n=u(1),i=u(1),w=U(()=>b.value.filter(s=>{var v,m,f,k;const t=!d.value||((m=(v=s.attacker)==null?void 0:v.username)==null?void 0:m.toLowerCase().includes(d.value.toLowerCase()))||((k=(f=s.defender)==null?void 0:f.username)==null?void 0:k.toLowerCase().includes(d.value.toLowerCase())),a=!c.value||c.value==="attacker_won"&&s.attacker_won||c.value==="defender_won"&&!s.attacker_won;return t&&a})),h=async()=>{var s,t;p.value=!0,_.value=null;try{const a=await O.get("/admin/combat-logs",{params:{page:n.value}});b.value=a.data.data||a.data||[],i.value=a.data.last_page||1}catch(a){_.value=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load combat logs"}finally{p.value=!1}},y=()=>{n.value>1&&(n.value--,h())},C=()=>{n.value<i.value&&(n.value++,h())},L=s=>new Date(s).toLocaleString();return x(h),(s,t)=>(r(),o("div",B,[t[4]||(t[4]=e("div",{class:"view-header"},[e("h1",null,"Combat Logs"),e("p",{class:"subtitle"},"View all player vs player combat history")],-1)),e("div",F,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),type:"text",placeholder:"Search by username...",class:"search-input"},null,512),[[S,d.value]]),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),class:"filter-select"},[...t[2]||(t[2]=[e("option",{value:""},"All Outcomes",-1),e("option",{value:"attacker_won"},"Attacker Won",-1),e("option",{value:"defender_won"},"Defender Won",-1)])],512),[[V,c.value]]),e("button",{onClick:h,class:"btn btn-secondary"}," üîÑ Refresh ")]),p.value?(r(),o("div",M,"Loading combat logs...")):_.value?(r(),o("div",R,l(_.value),1)):b.value.length===0?(r(),o("div",q,"No combat logs found.")):(r(),o("table",z,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Attacker"),e("th",null,"Defender"),e("th",null,"Outcome"),e("th",null,"Damage Dealt"),e("th",null,"Cash Stolen"),e("th",null,"Respect Gained")])],-1)),e("tbody",null,[(r(!0),o(P,null,A(w.value,a=>{var v,m;return r(),o("tr",{key:a.id},[e("td",null,l(L(a.created_at)),1),e("td",null,[e("span",E,l(((v=a.attacker)==null?void 0:v.username)||"Unknown"),1)]),e("td",null,[e("span",G,l(((m=a.defender)==null?void 0:m.username)||"Unknown"),1)]),e("td",null,[e("span",{class:W(["badge",a.attacker_won?"success":"danger"])},l(a.attacker_won?"Attacker Won":"Defender Won"),3)]),e("td",null,l(a.damage_dealt),1),e("td",null,"$"+l((a.cash_stolen||0).toLocaleString()),1),e("td",null,l(a.respect_gained||0),1)])}),128))])])),!p.value&&i.value>1?(r(),o("div",I,[e("button",{onClick:y,disabled:n.value===1,class:"btn btn-sm"},"‚Üê Prev",8,Q),e("span",T,"Page "+l(n.value)+" of "+l(i.value),1),e("button",{onClick:C,disabled:n.value===i.value,class:"btn btn-sm"},"Next ‚Üí",8,$)])):N("",!0)]))}},K=D(j,[["__scopeId","data-v-002f79de"]]);export{K as default};
