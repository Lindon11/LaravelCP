import{h as n,a as e,o as r,_ as H,e as G,F as L,i as S,k as h,m as E,s as N,Z as J,b as u,z as b,H as K,v as W,I as Z,n as v,d as m,N as Y,E as q,t as a,l as d,c as Q,w as X,T as ee,S as te,x as R,a4 as $,g as f,y as se,J as le,D as oe}from"./index-VJuD4EV8.js";import{r as ae}from"./CheckCircleIcon-BfWao72n.js";import{r as re}from"./DocumentIcon-jnNHwd43.js";function ne(j,x){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}const ie={class:"space-y-6"},de={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4"},ce={class:"text-2xl font-bold text-white"},ue={class:"text-sm text-slate-400"},pe={class:"flex flex-wrap items-center gap-4 p-4 bg-slate-800/30 backdrop-blur-sm rounded-xl border border-slate-700/50"},be={class:"flex items-center gap-2"},ve=["value"],xe={class:"flex items-center gap-2"},ge={class:"flex items-center gap-2"},me={class:"flex items-center gap-2"},fe={class:"flex items-center gap-2 cursor-pointer"},ye={class:"flex-1 min-w-[200px]"},we={class:"relative"},he={class:"flex items-center gap-2"},_e=["disabled"],ke=["disabled"],Ce=["disabled"],Le={key:0,class:"flex flex-col items-center justify-center py-16"},Se={key:1,class:"bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden"},Ee={key:0,class:"flex flex-col items-center justify-center py-16"},Re={class:"w-16 h-16 rounded-2xl bg-emerald-500/20 flex items-center justify-center mb-4"},Be={key:1,class:"divide-y divide-slate-700/50 max-h-[600px] overflow-y-auto"},Pe=["onClick"],Te={class:"flex items-start justify-between gap-4 mb-2"},Ve={class:"flex items-center gap-3"},Ne={class:"text-sm text-slate-400"},$e={class:"text-sm text-slate-300 font-mono mb-2 line-clamp-2"},je={class:"flex flex-wrap items-center gap-3 text-xs text-slate-500"},De={key:0,class:"flex items-center gap-1"},Ae={key:1,class:"flex items-center gap-1"},Fe={key:2,class:"flex items-center gap-1"},Ie={key:3,class:"px-2 py-0.5 rounded bg-slate-700 text-slate-300"},Ue={key:4,class:"text-slate-400"},Me={key:2,class:"flex items-center justify-center gap-4 p-4 border-t border-slate-700/50"},Oe=["disabled"],ze={class:"text-sm text-slate-400"},He=["disabled"],Ge={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Je={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col"},Ke={class:"flex items-center justify-between p-6 border-b border-slate-700 shrink-0"},We={class:"flex items-center gap-3"},Ze={class:"p-6 overflow-y-auto flex-1 space-y-6"},Ye={class:"text-slate-300"},qe={class:"p-4 bg-slate-900/50 rounded-xl text-sm text-slate-300 font-mono overflow-x-auto whitespace-pre-wrap break-words"},Qe={key:0},Xe={class:"text-slate-300 font-mono text-sm"},et={key:0},tt={key:1},st={class:"p-4 bg-slate-900/50 rounded-xl text-xs text-red-400 font-mono overflow-x-auto max-h-[300px] overflow-y-auto whitespace-pre-wrap break-words"},lt={key:2},ot={class:"text-slate-300 font-mono text-sm break-all"},at={class:"grid grid-cols-2 gap-4"},rt={key:0},nt={class:"text-slate-300"},it={key:1},dt={class:"text-slate-300"},ct={key:3},ut={class:"p-4 bg-slate-900/50 rounded-xl text-xs text-slate-300 font-mono overflow-x-auto whitespace-pre-wrap break-words"},pt={__name:"ErrorLogsView",setup(j){const x=se(),g=f(!1),_=f(!1),y=f([]),o=f(null),p=f(1),w=f(1),i=$({level:"",source:"",dateRange:"week",search:"",showResolved:!1}),k=$({emergency:0,critical:0,error:0,warning:0,info:0}),D=[{value:"emergency",label:"Emergency"},{value:"alert",label:"Alert"},{value:"critical",label:"Critical"},{value:"error",label:"Error"},{value:"warning",label:"Warning"},{value:"notice",label:"Notice"},{value:"info",label:"Info"},{value:"debug",label:"Debug"}],A=[{level:"emergency",label:"Emergency",borderColor:"border-l-red-600"},{level:"critical",label:"Critical",borderColor:"border-l-orange-500"},{level:"error",label:"Errors",borderColor:"border-l-red-500"},{level:"warning",label:"Warnings",borderColor:"border-l-amber-500"},{level:"info",label:"Info",borderColor:"border-l-blue-500"}],B=l=>({emergency:"bg-red-600 text-white",alert:"bg-red-600 text-white",critical:"bg-orange-500 text-white",error:"bg-red-500 text-white",warning:"bg-amber-500 text-slate-900",notice:"bg-blue-500 text-white",info:"bg-sky-500 text-white",debug:"bg-slate-500 text-white"})[l]||"bg-slate-500 text-white",P=l=>({backend:"bg-purple-500/20 text-purple-400",admin:"bg-amber-500/20 text-amber-400",openpbbg:"bg-emerald-500/20 text-emerald-400","laravel-log":"bg-cyan-500/20 text-cyan-400"})[l]||"bg-slate-500/20 text-slate-400",T=l=>({backend:"Backend",admin:"Admin",openpbbg:"OpenPBBG","laravel-log":"Laravel Log"})[l]||l||"Unknown",C=l=>{const t=l.context||{};return t.app_source?t.app_source:t.frontend?(l.type||"").toLowerCase().includes("admin")?"admin":"openpbbg":t.from_log_file?"laravel-log":"backend"},F=l=>({emergency:"border-l-red-600",alert:"border-l-red-600",critical:"border-l-orange-500",error:"border-l-red-500",warning:"border-l-amber-500",notice:"border-l-blue-500",info:"border-l-sky-500",debug:"border-l-slate-500"})[l]||"border-l-slate-500",c=async()=>{g.value=!0;try{const l=await R.get("/admin/error-logs",{params:{page:p.value,per_page:50,level:i.level||void 0,source:i.source||void 0,dateRange:i.dateRange,search:i.search||void 0,resolved:i.showResolved?void 0:!1}});y.value=l.data.data||[],w.value=l.data.last_page||1,l.data.stats&&Object.assign(k,l.data.stats)}catch(l){x.error("Failed to load error logs"),console.error("Error loading logs:",l)}finally{g.value=!1}},I=async()=>{_.value=!0;try{const t=(await R.post("/admin/error-logs/laravel-log/sync")).data.imported||0;t>0?(x.success(`Imported ${t} new log entries`),await c()):x.info("No new log entries to import")}catch(l){x.error("Failed to sync Laravel logs"),console.error("Error syncing logs:",l)}finally{_.value=!1}},U=()=>{confirm("Clear all error logs? This cannot be undone.")&&M()},M=async()=>{try{await R.delete("/admin/error-logs/clear"),y.value=[],Object.keys(k).forEach(l=>k[l]=0),x.success("Error logs cleared")}catch{x.error("Failed to clear logs")}},V=l=>new Date(l).toLocaleString(),O=()=>{p.value>1&&(p.value--,c())},z=()=>{p.value<w.value&&(p.value++,c())};return G(c),(l,t)=>(r(),n("div",ie,[e("div",de,[(r(),n(L,null,S(A,s=>e("div",{key:s.level,class:v(["p-4 rounded-xl border-l-4 bg-slate-800/30 backdrop-blur-sm",s.borderColor])},[e("p",ce,a(k[s.level]||0),1),e("p",ue,a(s.label),1)],2)),64))]),e("div",pe,[e("div",be,[t[8]||(t[8]=e("label",{class:"text-sm text-slate-400"},"Level:",-1)),h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.level=s),onChange:c,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[t[7]||(t[7]=e("option",{value:""},"All Levels",-1)),(r(),n(L,null,S(D,s=>e("option",{key:s.value,value:s.value},a(s.label),9,ve)),64))],544),[[E,i.level]])]),e("div",xe,[t[10]||(t[10]=e("label",{class:"text-sm text-slate-400"},"Source:",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.source=s),onChange:c,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[...t[9]||(t[9]=[N('<option value="" data-v-71502e82>All Sources</option><option value="backend" data-v-71502e82>Backend (PHP)</option><option value="admin" data-v-71502e82>Admin Panel</option><option value="openpbbg" data-v-71502e82>OpenPBBG Frontend</option><option value="laravel-log" data-v-71502e82>Laravel Log File</option>',5)])],544),[[E,i.source]])]),e("div",ge,[t[12]||(t[12]=e("label",{class:"text-sm text-slate-400"},"Range:",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.dateRange=s),onChange:c,class:"px-3 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[...t[11]||(t[11]=[N('<option value="today" data-v-71502e82>Today</option><option value="yesterday" data-v-71502e82>Yesterday</option><option value="week" data-v-71502e82>Last 7 Days</option><option value="month" data-v-71502e82>Last 30 Days</option><option value="all" data-v-71502e82>All Time</option>',5)])],544),[[E,i.dateRange]])]),e("div",me,[e("label",fe,[h(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>i.showResolved=s),onChange:c,class:"w-4 h-4 rounded bg-slate-700 border-slate-600 text-amber-500 focus:ring-amber-500/50"},null,544),[[J,i.showResolved]]),t[13]||(t[13]=e("span",{class:"text-sm text-slate-400"},"Show Resolved",-1))])]),e("div",ye,[e("div",we,[u(b(K),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.search=s),type:"text",placeholder:"Search logs...",onKeyup:Z(c,["enter"]),class:"w-full pl-10 pr-4 py-2 bg-slate-900/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,544),[[W,i.search]])])]),e("div",he,[e("button",{onClick:I,disabled:_.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-400 rounded-lg font-medium transition-colors disabled:opacity-50",title:"Import errors from Laravel log file"},[u(b(ne),{class:v(["w-5 h-5",_.value&&"animate-pulse"])},null,8,["class"]),t[14]||(t[14]=m(" Sync Logs ",-1))],8,_e),e("button",{onClick:c,disabled:g.value,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg font-medium transition-colors disabled:opacity-50"},[u(b(Y),{class:v(["w-5 h-5",g.value&&"animate-spin"])},null,8,["class"]),t[15]||(t[15]=m(" Refresh ",-1))],8,ke),e("button",{onClick:U,disabled:g.value||y.value.length===0,class:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg font-medium transition-colors disabled:opacity-50"},[u(b(q),{class:"w-5 h-5"}),t[16]||(t[16]=m(" Clear ",-1))],8,Ce)])]),g.value?(r(),n("div",Le,[...t[17]||(t[17]=[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-slate-400"},"Loading error logs...",-1)])])):(r(),n("div",Se,[y.value.length===0?(r(),n("div",Ee,[e("div",Re,[u(b(ae),{class:"w-8 h-8 text-emerald-400"})]),t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-white mb-2"},"No Errors Found",-1)),t[19]||(t[19]=e("p",{class:"text-slate-400"},"The application is running smoothly!",-1))])):(r(),n("div",Be,[(r(!0),n(L,null,S(y.value,s=>(r(),n("div",{key:s.id,onClick:bt=>o.value=s,class:v(["p-4 cursor-pointer hover:bg-slate-700/30 transition-colors border-l-4",F(s.level)])},[e("div",Te,[e("div",Ve,[e("span",{class:v(["px-2.5 py-1 text-xs font-bold rounded-md uppercase",B(s.level)])},a(s.level),3),e("span",{class:v(["px-2 py-0.5 text-xs rounded-md",P(s.source||C(s))])},a(T(s.source||C(s))),3),e("span",Ne,a(V(s.created_at)),1)])]),e("p",$e,a(s.message),1),e("div",je,[s.file?(r(),n("span",De,[u(b(re),{class:"w-3.5 h-3.5"}),m(" "+a(s.file),1)])):d("",!0),s.line?(r(),n("span",Ae," Line "+a(s.line),1)):d("",!0),s.user_id?(r(),n("span",Fe,[u(b(le),{class:"w-3.5 h-3.5"}),m(" User #"+a(s.user_id),1)])):d("",!0),s.count>1?(r(),n("span",Ie,a(s.count)+"x ",1)):d("",!0),s.type?(r(),n("span",Ue,a(s.type),1)):d("",!0)])],10,Pe))),128))])),w.value>1?(r(),n("div",Me,[e("button",{onClick:O,disabled:p.value===1,class:"px-4 py-2 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Oe),e("span",ze," Page "+a(p.value)+" of "+a(w.value),1),e("button",{onClick:z,disabled:p.value===w.value,class:"px-4 py-2 rounded-lg bg-slate-700 text-slate-300 hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,He)])):d("",!0)])),(r(),Q(te,{to:"body"},[u(ee,{name:"modal"},{default:X(()=>[o.value?(r(),n("div",Ge,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:t[5]||(t[5]=s=>o.value=null)}),e("div",Je,[e("div",Ke,[e("div",We,[e("span",{class:v(["px-3 py-1.5 text-sm font-bold rounded-lg uppercase",B(o.value.level)])},a(o.value.level),3),e("span",{class:v(["px-2 py-1 text-xs rounded-lg",P(o.value.source||C(o.value))])},a(T(o.value.source||C(o.value))),3),t[20]||(t[20]=e("span",{class:"text-lg font-bold text-white"},"Error Details",-1))]),e("button",{onClick:t[6]||(t[6]=s=>o.value=null),class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[u(b(oe),{class:"w-5 h-5"})])]),e("div",Ze,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Timestamp",-1)),e("p",Ye,a(V(o.value.created_at)),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Message",-1)),e("pre",qe,a(o.value.message),1)]),o.value.file?(r(),n("div",Qe,[t[23]||(t[23]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Location",-1)),e("p",Xe,[m(a(o.value.file),1),o.value.line?(r(),n("span",et,":"+a(o.value.line),1)):d("",!0)])])):d("",!0),o.value.trace?(r(),n("div",tt,[t[24]||(t[24]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Stack Trace",-1)),e("pre",st,a(o.value.trace),1)])):d("",!0),o.value.url?(r(),n("div",lt,[t[25]||(t[25]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"URL",-1)),e("p",ot,a(o.value.url),1)])):d("",!0),e("div",at,[o.value.ip?(r(),n("div",rt,[t[26]||(t[26]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"IP Address",-1)),e("p",nt,a(o.value.ip),1)])):d("",!0),o.value.method?(r(),n("div",it,[t[27]||(t[27]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Method",-1)),e("p",dt,a(o.value.method),1)])):d("",!0)]),o.value.context?(r(),n("div",ct,[t[28]||(t[28]=e("label",{class:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2"},"Context",-1)),e("pre",ut,a(JSON.stringify(o.value.context,null,2)),1)])):d("",!0)])])])):d("",!0)]),_:1})]))]))}},mt=H(pt,[["__scopeId","data-v-71502e82"]]);export{mt as default};
