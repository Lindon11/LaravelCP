import{_ as D,e as I,h as i,a as e,F as b,i as h,l as x,j as N,t as d,k as y,v as k,Z as U,x as _,g as c,y as A,o as l}from"./index-SfCwTISH.js";const B={class:"categories-page"},E={class:"page-header"},S={key:0,class:"categories-grid"},j={class:"card-header"},L={class:"card-icon"},G={class:"card-actions"},Z=["onClick"],q=["onClick"],z={class:"description"},H={class:"card-footer"},J={class:"ticket-count"},K={key:0,class:"status-active"},O={key:1,class:"status-inactive"},P={key:0,class:"empty-state"},Q={key:1,class:"loading-state"},R={class:"modal"},W={class:"modal-header"},X={class:"modal-body"},Y={class:"form-group"},ee={class:"form-group"},te={class:"form-group"},se={class:"icon-picker"},ae={class:"icon-suggestions"},oe=["onClick"],ie={class:"form-group"},le={class:"checkbox-label"},ne={class:"modal-footer"},re=["disabled"],de={__name:"TicketCategoriesView",setup(ce){const r=A(),f=c(!0),u=c(!1),n=c([]),m=c(!1),v=c(!1),g=c(null),o=c({name:"",description:"",icon:"ðŸ“",is_active:!0}),w=["ðŸ“","ðŸ›","ðŸ’°","ðŸ”’","âš™ï¸","ðŸ“±","ðŸ’¬","ðŸŽ®","ðŸ“§","â“","ðŸ›’","ðŸ‘¤"],F=async()=>{f.value=!0;try{const s=await _.get("/admin/support/ticket-categories");n.value=s.data.data||s.data||[]}catch(s){console.error("Failed to fetch categories:",s),r.error("Failed to load categories")}finally{f.value=!1}},$=async()=>{if(o.value.name.trim()){u.value=!0;try{const s=await _.post("/admin/support/ticket-categories",o.value);n.value.push(s.data.data||s.data),p(),r.success("Category created")}catch(s){console.error("Failed to create category:",s),r.error("Failed to create category")}finally{u.value=!1}}},V=s=>{g.value=s,o.value={name:s.name,description:s.description||"",icon:s.icon||"ðŸ“",is_active:s.is_active!==!1},v.value=!0},M=async()=>{if(o.value.name.trim()){u.value=!0;try{const s=await _.put(`/admin/support/ticket-categories/${g.value.id}`,o.value),t=n.value.findIndex(a=>a.id===g.value.id);t!==-1&&(n.value[t]=s.data.data||s.data),p(),r.success("Category updated")}catch(s){console.error("Failed to update category:",s),r.error("Failed to update category")}finally{u.value=!1}}},T=async s=>{if(confirm(`Delete "${s.name}" category? Tickets in this category will be moved to General.`))try{await _.delete(`/admin/support/ticket-categories/${s.id}`),n.value=n.value.filter(t=>t.id!==s.id),r.success("Category deleted")}catch(t){console.error("Failed to delete category:",t),r.error("Failed to delete category")}},p=()=>{m.value=!1,v.value=!1,g.value=null,o.value={name:"",description:"",icon:"ðŸ“",is_active:!0}};return I(()=>{F()}),(s,t)=>(l(),i("div",B,[e("div",E,[t[7]||(t[7]=e("div",null,null,-1)),e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=a=>m.value=!0)}," + Add Category ")]),f.value?(l(),i("div",Q,[...t[11]||(t[11]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading categories...",-1)])])):(l(),i("div",S,[(l(!0),i(b,null,h(n.value,a=>(l(),i("div",{key:a.id,class:"category-card"},[e("div",j,[e("span",L,d(a.icon||"ðŸ“"),1),e("div",G,[e("button",{class:"action-btn",onClick:C=>V(a),title:"Edit"},"âœï¸",8,Z),e("button",{class:"action-btn",onClick:C=>T(a),title:"Delete"},"ðŸ—‘ï¸",8,q)])]),e("h3",null,d(a.name),1),e("p",z,d(a.description||"No description"),1),e("div",H,[e("span",J,d(a.tickets_count||0)+" tickets",1),a.is_active?(l(),i("span",K,"Active")):(l(),i("span",O,"Inactive"))])]))),128)),n.value.length===0?(l(),i("div",P,[t[8]||(t[8]=e("span",{class:"empty-icon"},"ðŸ“‚",-1)),t[9]||(t[9]=e("h3",null,"No categories yet",-1)),t[10]||(t[10]=e("p",null,"Create your first ticket category",-1)),e("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=a=>m.value=!0)}," + Add Category ")])):x("",!0)])),m.value||v.value?(l(),i("div",{key:2,class:"modal-overlay",onClick:N(p,["self"])},[e("div",R,[e("div",W,[e("h3",null,d(v.value?"Edit Category":"Create Category"),1),e("button",{class:"modal-close",onClick:p},"Ã—")]),e("div",X,[e("div",Y,[t[12]||(t[12]=e("label",null,"Name *",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.name=a),type:"text",placeholder:"e.g., Technical Support",class:"form-input"},null,512),[[k,o.value.name]])]),e("div",ee,[t[13]||(t[13]=e("label",null,"Description",-1)),y(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.description=a),placeholder:"Brief description of this category",class:"form-textarea",rows:"3"},null,512),[[k,o.value.description]])]),e("div",te,[t[14]||(t[14]=e("label",null,"Icon (emoji)",-1)),e("div",se,[y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.icon=a),type:"text",placeholder:"ðŸ“",class:"form-input icon-input"},null,512),[[k,o.value.icon]]),e("div",ae,[(l(),i(b,null,h(w,a=>e("button",{key:a,type:"button",class:"icon-btn",onClick:C=>o.value.icon=a},d(a),9,oe)),64))])])]),e("div",ie,[e("label",le,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=a=>o.value.is_active=a)},null,512),[[U,o.value.is_active]]),t[15]||(t[15]=e("span",null,"Active",-1))])])]),e("div",ne,[e("button",{class:"btn btn-secondary",onClick:p},"Cancel"),e("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=a=>v.value?M():$()),disabled:!o.value.name.trim()||u.value},d(u.value?"Saving...":v.value?"Update":"Create"),9,re)])])])):x("",!0)]))}},ve=D(de,[["__scopeId","data-v-558f0b30"]]);export{ve as default};
