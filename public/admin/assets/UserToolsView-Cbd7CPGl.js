import{h as o,a as e,o as a,G as ze,b as i,z as d,H as Be,k as S,v as L,I as He,F as p,i as x,l as y,D as ee,d as b,J as qe,t as r,K as Ee,L as Ge,M as Ke,m as Pe,s as Qe,N as U,O as ce,P as ue,c as te,Q as We,g as c,q as me,x as u,B as Ze,n as w,R as pe,E as Oe,C as Xe,S as Ye,U as et,V as tt}from"./index-BpSau4Yr.js";import{r as ve}from"./ArrowPathIcon-D2RAm0JT.js";import{r as xe}from"./CubeIcon-C2obaGvt.js";import{r as z}from"./ClockIcon-CsgcTA4o.js";import{r as st}from"./PlusIcon-mzP-pp53.js";import{r as se}from"./CheckCircleIcon-BaWeK9we.js";import{r as lt}from"./XCircleIcon-TxV5f2rg.js";function be(le,f){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}function at(le,f){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}const ot={class:"space-y-6"},rt={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},nt={class:"relative flex-1 w-full lg:max-w-lg"},it={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-slate-800 border border-slate-700/50 rounded-xl shadow-2xl z-50 overflow-hidden"},dt=["onClick"],ct={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white font-bold"},ut={class:"flex-1 min-w-0"},mt={class:"text-white font-medium truncate"},pt={class:"text-xs text-slate-400"},vt={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},xt={class:"flex flex-col items-center justify-center"},bt={class:"w-16 h-16 rounded-2xl bg-slate-700/30 flex items-center justify-center mb-4"},gt={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},ht={class:"flex items-start gap-6"},yt={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg"},ft={class:"flex-1"},_t={class:"flex items-center gap-3 mb-1"},wt={class:"text-xl font-bold text-white"},kt={class:"text-xs font-mono text-slate-500"},$t={class:"flex flex-wrap items-center gap-3 text-sm text-slate-400"},Ct={class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-slate-700/50"},Ft={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-slate-700/50"},jt={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-slate-700/50"},Tt={class:"flex items-center gap-2"},Rt={class:"flex items-center gap-1 p-1 bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-x-auto"},At=["onClick"],St={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 overflow-hidden"},Ut={key:0,class:"p-12"},Vt={key:1,class:"divide-y divide-slate-700/50"},Dt={class:"p-4 flex items-center justify-between"},It={class:"text-sm text-slate-400"},Nt={key:0,class:"overflow-x-auto"},Mt={class:"w-full"},Jt={class:"divide-y divide-slate-700/30"},Lt={class:"p-4 text-white font-medium"},zt={class:"p-4"},Bt={class:"inline-flex px-2.5 py-1 rounded-lg text-xs font-medium bg-slate-700/50 text-slate-300"},Ht={class:"p-4"},qt={class:"text-xs text-slate-500 bg-slate-900/50 px-2 py-1 rounded"},Et={class:"p-4 text-slate-300"},Gt={class:"p-4 text-emerald-400"},Kt={class:"p-4"},Pt={key:0,class:"inline-flex items-center gap-1 text-emerald-400"},Qt={key:1,class:"text-slate-600"},Wt={key:1,class:"p-12 text-center"},Zt={key:2,class:"divide-y divide-slate-700/50"},Ot={key:0,class:"overflow-x-auto"},Xt={class:"w-full"},Yt={class:"divide-y divide-slate-700/30"},es={class:"p-4 text-white font-medium"},ts={class:"p-4"},ss={class:"text-xs text-slate-500 bg-slate-900/50 px-2 py-1 rounded"},ls={class:"p-4"},as={class:"p-4 text-white font-medium"},os={key:1,class:"p-12 text-center"},rs={key:3,class:"divide-y divide-slate-700/50"},ns={class:"p-4 flex items-center justify-between"},is={key:0,class:"overflow-x-auto"},ds={class:"w-full"},cs={class:"divide-y divide-slate-700/30"},us={class:"p-4 text-white font-medium"},ms={class:"p-4"},ps={class:"text-xs text-slate-500 bg-slate-900/50 px-2 py-1 rounded"},vs={class:"p-4"},xs={class:"p-4"},bs={key:0,class:"inline-flex items-center gap-1.5 text-emerald-400"},gs={key:1,class:"inline-flex items-center gap-1.5 text-red-400"},hs={key:2,class:"text-slate-500"},ys={class:"p-4 text-slate-400 text-sm"},fs={key:1,class:"p-12 text-center"},_s={key:4,class:"divide-y divide-slate-700/50"},ws={class:"p-4 flex items-center justify-between"},ks={key:0,class:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},$s={class:"p-4"},Cs={class:"flex items-center justify-between mb-2"},Fs={class:"text-sm font-medium text-white"},js=["onClick"],Ts={class:"text-2xl font-bold text-white mb-1"},Rs={class:"text-xs text-slate-400"},As={class:"h-1 bg-slate-700/50"},Ss={key:1,class:"p-12 text-center"},Us={key:5,class:"divide-y divide-slate-700/50"},Vs={class:"p-4"},Ds={key:0,class:"flex flex-wrap gap-2"},Is={class:"font-medium"},Ns=["onClick","disabled"],Ms={key:1,class:"text-slate-500"},Js={class:"p-4"},Ls={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"},zs={class:"flex items-center justify-between gap-3"},Bs={class:"flex-1 min-w-0"},Hs={class:"font-medium text-white truncate"},qs={class:"text-xs text-slate-400"},Es=["onClick","disabled"],Gs={key:1,class:"inline-flex items-center gap-1 text-emerald-400 text-sm"},Ks={key:0,class:"text-center py-8"},Ps={key:6,class:"divide-y divide-slate-700/50"},Qs={class:"p-4 flex items-center justify-between"},Ws={key:0,class:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Zs={class:"flex items-start justify-between gap-2"},Os={class:"flex-1 min-w-0"},Xs={class:"font-medium text-white truncate"},Ys={key:0,class:"text-sm text-slate-300 mt-1"},el={key:1,class:"text-xs text-slate-400 mt-1"},tl=["onClick"],sl={key:1,class:"p-12 text-center"},ll={key:7,class:"divide-y divide-slate-700/50"},al={key:0,class:"divide-y divide-slate-700/30"},ol={class:"flex-1 min-w-0"},rl={class:"text-white"},nl={class:"text-sm text-slate-400 mt-1"},il={key:1,class:"p-12 text-center"},dl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},cl={class:"relative bg-slate-800 rounded-2xl border border-slate-700/50 shadow-2xl w-full max-w-md"},ul={class:"p-6 space-y-4"},ml={class:"grid grid-cols-4 gap-2"},pl=["onClick"],vl={class:"p-6 border-t border-slate-700/50 flex justify-end gap-3"},wl={__name:"UserToolsView",setup(le){const f=c(""),T=c([]),n=c(null),m=c("items"),ge=[{key:"items",label:"Items",icon:xe},{key:"jobs",label:"Jobs",icon:be},{key:"history",label:"Job History",icon:z},{key:"timers",label:"Timers",icon:z},{key:"roles",label:"Roles",icon:U},{key:"flags",label:"Flags",icon:ce},{key:"activity",label:"Activity",icon:ue}],he=[{value:"info",label:"Info",activeClass:"bg-blue-500/20 text-blue-400 ring-2 ring-blue-500/50"},{value:"success",label:"Good",activeClass:"bg-emerald-500/20 text-emerald-400 ring-2 ring-emerald-500/50"},{value:"warning",label:"Warn",activeClass:"bg-amber-500/20 text-amber-400 ring-2 ring-amber-500/50"},{value:"danger",label:"Danger",activeClass:"bg-red-500/20 text-red-400 ring-2 ring-red-500/50"}],$=c({}),V=c([]),D=c([]),I=c({timers:[],user_timers:[]}),N=c([]),M=c([]),B=c("all"),H=c(!1),q=c(!1),E=c(!1),G=c(!1),K=c(!1),P=c(!1),Q=c(!1),_=c([]),W=c([]),C=c(!1),R=c(!1),g=c({type:"",label:"",reason:"",severity:"info"}),ye=me(()=>{switch(m.value){case"items":return H.value;case"jobs":return q.value;case"history":return E.value;case"timers":return G.value;case"roles":return K.value;case"flags":return P.value;case"activity":return Q.value;default:return!1}}),ae=me(()=>{const l=[...I.value.user_timers||[]];for(const t of I.value.timers||[])l.push({type:t.type,expires_at:t.expires_at});return l});let oe=null;const fe=()=>{clearTimeout(oe),oe=setTimeout(()=>{f.value.length>=2?re():T.value=[]},300)},re=async()=>{if(f.value.trim())try{const l=await u.get("/admin/user-tools/search",{params:{q:f.value}});T.value=l.data.users||[]}catch(l){console.error("Search failed:",l)}},_e=async l=>{T.value=[],f.value="";try{const t=await u.get(`/admin/user-tools/${l.id}`);n.value=t.data.user,Z()}catch(t){console.error("Failed to load user:",t)}},we=()=>{n.value=null,$.value={},V.value=[],D.value=[],I.value={timers:[],user_timers:[]},_.value=[],N.value=[],M.value=[]},ke=()=>{Z()},Z=()=>{if(n.value)switch(m.value){case"items":$e();break;case"jobs":Ce();break;case"history":ne();break;case"timers":O();break;case"roles":je();break;case"flags":X();break;case"activity":Ue();break}},$e=async()=>{H.value=!0;try{const l=await u.get(`/admin/user-tools/${n.value.id}/inventory`);$.value=l.data}catch(l){console.error("Failed to load inventory:",l)}finally{H.value=!1}},Ce=async()=>{q.value=!0;try{const l=await u.get(`/admin/user-tools/${n.value.id}/jobs`);V.value=l.data.jobs||[]}catch(l){console.error("Failed to load jobs:",l)}finally{q.value=!1}},ne=async()=>{E.value=!0;try{const l=await u.get(`/admin/user-tools/${n.value.id}/job-history`,{params:{type:B.value}});D.value=l.data.history||[]}catch(l){console.error("Failed to load job history:",l)}finally{E.value=!1}},O=async()=>{G.value=!0;try{const l=await u.get(`/admin/user-tools/${n.value.id}/timers`);I.value=l.data}catch(l){console.error("Failed to load timers:",l)}finally{G.value=!1}},Fe=async l=>{if(confirm(`Clear ${ie(l)} timer?`))try{await u.delete(`/admin/user-tools/${n.value.id}/timers/${l}`),O()}catch(t){console.error("Failed to clear timer:",t)}},je=async()=>{var l;K.value=!0;try{const[t,F]=await Promise.all([u.get(`/admin/users/${n.value.id}`),u.get("/admin/roles")]);_.value=((l=t.data.roles)==null?void 0:l.map(v=>v.name))||[],W.value=F.data||[]}catch(t){console.error("Failed to load roles:",t)}finally{K.value=!1}},Te=async l=>{C.value=!0;try{await u.post(`/admin/users/${n.value.id}/roles`,{role:l}),_.value.push(l)}catch(t){console.error("Failed to assign role:",t),alert("Failed to assign role")}finally{C.value=!1}},Re=async l=>{if(confirm(`Remove role "${l}" from this user?`)){C.value=!0;try{await u.delete(`/admin/users/${n.value.id}/roles`,{data:{role:l}}),_.value=_.value.filter(t=>t!==l)}catch(t){console.error("Failed to remove role:",t),alert("Failed to remove role")}finally{C.value=!1}}},X=async()=>{P.value=!0;try{const l=await u.get(`/admin/user-tools/${n.value.id}/flags`);N.value=l.data.flags||[]}catch(l){console.error("Failed to load flags:",l)}finally{P.value=!1}},Ae=async()=>{try{await u.post(`/admin/user-tools/${n.value.id}/flags`,g.value),R.value=!1,g.value={type:"",label:"",reason:"",severity:"info"},X()}catch(l){console.error("Failed to add flag:",l)}},Se=async l=>{if(confirm("Remove this flag?"))try{await u.delete(`/admin/user-tools/${n.value.id}/flags/${l}`),X()}catch(t){console.error("Failed to remove flag:",t)}},Ue=async()=>{Q.value=!0;try{const l=await u.get(`/admin/user-tools/${n.value.id}/activity`);M.value=l.data.activity||[]}catch(l){console.error("Failed to load activity:",l)}finally{Q.value=!1}},J=l=>l?new Date(l).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—",Ve=l=>{const t=new Date,v=new Date(l)-t;if(v<=0)return"Expired";const k=Math.floor(v/(1e3*60*60)),j=Math.floor(v%(1e3*60*60)/(1e3*60)),A=Math.floor(v%(1e3*60)/1e3);return k>0?`${k}h ${j}m`:j>0?`${j}m ${A}s`:`${A}s`},ie=l=>l.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),De=l=>{const t=new Date,v=new Date(l.expires_at)-t,k=60*60*1e3;return Math.max(0,Math.min(100,v/k*100))},Y=l=>`inline-flex px-2.5 py-1 rounded-lg text-xs font-medium ${{crime:"bg-purple-500/20 text-purple-400",crime_attempt:"bg-purple-500/20 text-purple-400",theft:"bg-amber-500/20 text-amber-400",theft_attempt:"bg-amber-500/20 text-amber-400",gym:"bg-emerald-500/20 text-emerald-400",gym_train:"bg-emerald-500/20 text-emerald-400",travel:"bg-blue-500/20 text-blue-400",jail:"bg-red-500/20 text-red-400",hospital:"bg-pink-500/20 text-pink-400",login:"bg-emerald-500/20 text-emerald-400",logout:"bg-slate-500/20 text-slate-400",combat:"bg-red-500/20 text-red-400",mission:"bg-purple-500/20 text-purple-400",organized_crime:"bg-amber-500/20 text-amber-400"}[l]||"bg-slate-700/50 text-slate-300"}`,Ie=l=>({crime:"border-purple-500/30 text-purple-400",theft:"border-amber-500/30 text-amber-400",gym:"border-emerald-500/30 text-emerald-400",travel:"border-blue-500/30 text-blue-400",jail:"border-red-500/30 text-red-400",hospital:"border-pink-500/30 text-pink-400"})[l]||"border-slate-600/50 text-slate-400",Ne=l=>({info:"bg-blue-500/10 border border-blue-500/30",success:"bg-emerald-500/10 border border-emerald-500/30",warning:"bg-amber-500/10 border border-amber-500/30",danger:"bg-red-500/10 border border-red-500/30"})[l]||"bg-slate-700/50 border border-slate-600/50",Me=l=>({login:U,logout:U,combat:tt,crime:et,theft:Ye})[l]||at,Je=l=>({login:"bg-emerald-500/20 text-emerald-400",logout:"bg-slate-500/20 text-slate-400",combat:"bg-red-500/20 text-red-400",crime:"bg-purple-500/20 text-purple-400",theft:"bg-amber-500/20 text-amber-400"})[l]||"bg-slate-700/50 text-slate-400";return ze(m,Z),(l,t)=>{var F,v,k,j,A,de;return a(),o("div",ot,[e("div",rt,[e("div",nt,[i(d(Be),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),type:"text",placeholder:"Search by username, email, or ID...",onInput:fe,onKeyup:He(re,["enter"]),class:"w-full pl-12 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[L,f.value]]),T.value.length>0?(a(),o("div",it,[(a(!0),o(p,null,x(T.value,s=>{var h;return a(),o("div",{key:s.id,class:"flex items-center gap-3 p-3 hover:bg-slate-700/50 cursor-pointer transition-colors border-b border-slate-700/50 last:border-0",onClick:Le=>_e(s)},[e("div",ct,r(((h=s.username)==null?void 0:h.charAt(0).toUpperCase())||"?"),1),e("div",ut,[e("p",mt,r(s.username),1),e("p",pt,"ID: "+r(s.id)+" · Level "+r(s.level||1),1)]),i(d(Ze),{class:"w-5 h-5 text-slate-500"})],8,dt)}),128))])):y("",!0)]),n.value?(a(),o("button",{key:0,onClick:we,class:"inline-flex items-center gap-2 px-4 py-3 text-slate-400 hover:text-white transition-colors"},[i(d(ee),{class:"w-4 h-4"}),t[8]||(t[8]=b(" Clear Selection ",-1))])):y("",!0)]),n.value?(a(),o(p,{key:1},[e("div",gt,[e("div",ht,[e("div",yt,r(n.value.username.charAt(0).toUpperCase()),1),e("div",ft,[e("div",_t,[e("h2",wt,r(n.value.username),1),e("span",kt,"#"+r(n.value.id),1)]),e("div",$t,[e("span",Ct,[i(d(Ee),{class:"w-4 h-4 text-amber-400"}),b(" Level "+r(n.value.level),1)]),(F=n.value.currentRank)!=null&&F.name||(v=n.value.current_rank)!=null&&v.name?(a(),o("span",Ft,[i(d(Ge),{class:"w-4 h-4 text-purple-400"}),b(" "+r(((k=n.value.currentRank)==null?void 0:k.name)||((j=n.value.current_rank)==null?void 0:j.name)),1)])):y("",!0),(A=n.value.location)!=null&&A.name?(a(),o("span",jt,[i(d(Ke),{class:"w-4 h-4 text-blue-400"}),b(" "+r(n.value.location.name),1)])):y("",!0)])]),e("div",Tt,[e("button",{onClick:ke,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"},[i(d(ve),{class:"w-4 h-4"}),t[11]||(t[11]=b(" Refresh ",-1))])])])]),e("div",Rt,[(a(),o(p,null,x(ge,s=>e("button",{key:s.key,onClick:h=>m.value=s.key,class:w(["flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium text-sm whitespace-nowrap transition-all",m.value===s.key?"bg-amber-500 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-700/50"])},[(a(),te(pe(s.icon),{class:"w-4 h-4"})),b(" "+r(s.label),1)],10,At)),64))]),e("div",St,[ye.value?(a(),o("div",Ut,[...t[12]||(t[12]=[e("div",{class:"flex flex-col items-center justify-center"},[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"}),e("p",{class:"text-slate-400"},"Loading data...")],-1)])])):m.value==="items"?(a(),o("div",Vt,[e("div",Dt,[e("div",null,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-white"},"Inventory Items",-1)),e("p",It,r($.value.total_items||0)+" items · $"+r(($.value.total_value||0).toLocaleString())+" value",1)])]),(de=$.value.inventory)!=null&&de.length?(a(),o("div",Nt,[e("table",Mt,[t[14]||(t[14]=e("thead",null,[e("tr",{class:"text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},[e("th",{class:"p-4"},"Item"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Codename"),e("th",{class:"p-4"},"Qty"),e("th",{class:"p-4"},"Value"),e("th",{class:"p-4"},"Equipped")])],-1)),e("tbody",Jt,[(a(!0),o(p,null,x($.value.inventory,s=>(a(),o("tr",{key:s.id,class:"hover:bg-slate-700/20 transition-colors"},[e("td",Lt,r(s.item_name),1),e("td",zt,[e("span",Bt,r(s.item_type),1)]),e("td",Ht,[e("code",qt,r(s.item_codename||"-"),1)]),e("td",Et,r(s.quantity),1),e("td",Gt,"$"+r((s.item_value*s.quantity).toLocaleString()),1),e("td",Kt,[s.equipped?(a(),o("span",Pt,[i(d(se),{class:"w-4 h-4"})])):(a(),o("span",Qt,"—"))])]))),128))])])])):(a(),o("div",Wt,[i(d(xe),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[15]||(t[15]=e("p",{class:"text-slate-400"},"No items in inventory",-1))]))])):m.value==="jobs"?(a(),o("div",Zt,[t[18]||(t[18]=e("div",{class:"p-4"},[e("h3",{class:"text-lg font-semibold text-white"},"Job Statistics"),e("p",{class:"text-sm text-slate-400"},"Completed jobs and activities")],-1)),V.value.length?(a(),o("div",Ot,[e("table",Xt,[t[16]||(t[16]=e("thead",null,[e("tr",{class:"text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},[e("th",{class:"p-4"},"Job Name"),e("th",{class:"p-4"},"Codename"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Completed")])],-1)),e("tbody",Yt,[(a(!0),o(p,null,x(V.value,s=>(a(),o("tr",{key:s.codename,class:"hover:bg-slate-700/20 transition-colors"},[e("td",es,r(s.name),1),e("td",ts,[e("code",ss,r(s.codename||"-"),1)]),e("td",ls,[e("span",{class:w(Y(s.type))},r(s.type),3)]),e("td",as,r(s.total_completed),1)]))),128))])])])):(a(),o("div",os,[i(d(be),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[17]||(t[17]=e("p",{class:"text-slate-400"},"No job statistics found",-1))]))])):m.value==="history"?(a(),o("div",rs,[e("div",ns,[t[20]||(t[20]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"Job History"),e("p",{class:"text-sm text-slate-400"},"Recent job runs and results")],-1)),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>B.value=s),onChange:ne,class:"px-4 py-2 bg-slate-700/50 border border-slate-600/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[...t[19]||(t[19]=[Qe('<option value="all">All Types</option><option value="crime_attempt">Crimes</option><option value="theft_attempt">Theft</option><option value="gym_train">Gym</option><option value="organized_crime">Organized Crime</option>',5)])],544),[[Pe,B.value]])]),D.value.length?(a(),o("div",is,[e("table",ds,[t[23]||(t[23]=e("thead",null,[e("tr",{class:"text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},[e("th",{class:"p-4"},"Job"),e("th",{class:"p-4"},"Codename"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Result"),e("th",{class:"p-4"},"Time")])],-1)),e("tbody",cs,[(a(!0),o(p,null,x(D.value,s=>(a(),o("tr",{key:s.id,class:"hover:bg-slate-700/20 transition-colors"},[e("td",us,r(s.name),1),e("td",ms,[e("code",ps,r(s.codename||"-"),1)]),e("td",vs,[e("span",{class:w(Y(s.type))},r(s.type),3)]),e("td",xs,[s.success===!0?(a(),o("span",bs,[i(d(se),{class:"w-4 h-4"}),t[21]||(t[21]=b(" Success ",-1))])):s.success===!1?(a(),o("span",gs,[i(d(lt),{class:"w-4 h-4"}),t[22]||(t[22]=b(" Failed ",-1))])):(a(),o("span",hs,"—"))]),e("td",ys,r(J(s.time)),1)]))),128))])])])):(a(),o("div",fs,[i(d(z),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[24]||(t[24]=e("p",{class:"text-slate-400"},"No job history found",-1))]))])):m.value==="timers"?(a(),o("div",_s,[e("div",ws,[t[26]||(t[26]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"Active Timers & Cooldowns"),e("p",{class:"text-sm text-slate-400"},"Current cooldown periods")],-1)),e("button",{onClick:O,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"},[i(d(ve),{class:"w-4 h-4"}),t[25]||(t[25]=b(" Refresh ",-1))])]),ae.value.length?(a(),o("div",ks,[(a(!0),o(p,null,x(ae.value,s=>(a(),o("div",{key:s.type,class:w(["relative rounded-xl border overflow-hidden",Ie(s.type)])},[e("div",$s,[e("div",Cs,[e("span",Fs,r(ie(s.type)),1),e("button",{onClick:h=>Fe(s.type),class:"p-1.5 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",title:"Clear timer"},[i(d(Oe),{class:"w-4 h-4"})],8,js)]),e("p",Ts,r(Ve(s.expires_at)),1),e("p",Rs,"Expires: "+r(J(s.expires_at)),1)]),e("div",As,[e("div",{class:"h-full bg-current opacity-50",style:Xe({width:De(s)+"%"})},null,4)])],2))),128))])):(a(),o("div",Ss,[i(d(z),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[27]||(t[27]=e("p",{class:"text-slate-400"},"No active timers",-1))]))])):m.value==="roles"?(a(),o("div",Us,[t[32]||(t[32]=e("div",{class:"p-4"},[e("h3",{class:"text-lg font-semibold text-white"},"User Roles"),e("p",{class:"text-sm text-slate-400"},"Manage roles and permissions for this user")],-1)),e("div",Vs,[t[28]||(t[28]=e("h4",{class:"text-sm font-medium text-slate-400 uppercase tracking-wider mb-3"},"Assigned Roles",-1)),_.value.length?(a(),o("div",Ds,[(a(!0),o(p,null,x(_.value,s=>(a(),o("div",{key:s,class:"inline-flex items-center gap-2 px-3 py-2 bg-amber-500/20 text-amber-400 rounded-xl"},[i(d(U),{class:"w-4 h-4"}),e("span",Is,r(s),1),e("button",{onClick:h=>Re(s),disabled:C.value,class:"p-0.5 rounded hover:bg-white/10 text-amber-300 hover:text-red-400 transition-colors",title:"Remove role"},[i(d(ee),{class:"w-4 h-4"})],8,Ns)]))),128))])):(a(),o("p",Ms,"No roles assigned"))]),e("div",Js,[t[31]||(t[31]=e("h4",{class:"text-sm font-medium text-slate-400 uppercase tracking-wider mb-3"},"Available Roles",-1)),e("div",Ls,[(a(!0),o(p,null,x(W.value,s=>{var h;return a(),o("div",{key:s.id,class:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/50"},[e("div",zs,[e("div",Bs,[e("h5",Hs,r(s.name),1),e("p",qs,r(((h=s.permissions)==null?void 0:h.length)||0)+" permissions",1)]),_.value.includes(s.name)?(a(),o("span",Gs,[i(d(se),{class:"w-4 h-4"}),t[29]||(t[29]=b(" Assigned ",-1))])):(a(),o("button",{key:0,onClick:Le=>Te(s.name),disabled:C.value,class:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 disabled:opacity-50 text-white text-sm font-medium rounded-lg transition-colors"}," Assign ",8,Es))])])}),128))]),W.value.length?y("",!0):(a(),o("div",Ks,[i(d(U),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[30]||(t[30]=e("p",{class:"text-slate-400"},"No roles available",-1))]))])])):m.value==="flags"?(a(),o("div",Ps,[e("div",Qs,[t[34]||(t[34]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"User Flags & Tags"),e("p",{class:"text-sm text-slate-400"},"Status indicators and warnings")],-1)),e("button",{onClick:t[2]||(t[2]=s=>R.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-xl transition-colors"},[i(d(st),{class:"w-4 h-4"}),t[33]||(t[33]=b(" Add Flag ",-1))])]),N.value.length?(a(),o("div",Ws,[(a(!0),o(p,null,x(N.value,s=>(a(),o("div",{key:s.type,class:w(["rounded-xl p-4",Ne(s.severity)])},[e("div",Zs,[e("div",Os,[e("h4",Xs,r(s.label),1),s.value&&s.value!==!0?(a(),o("p",Ys,r(typeof s.value=="string"&&s.value.includes("T")?J(s.value):s.value),1)):y("",!0),s.reason?(a(),o("p",el,r(s.reason),1)):y("",!0)]),s.type!=="role"?(a(),o("button",{key:0,onClick:h=>Se(s.type),class:"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-red-400 transition-colors"},[i(d(ee),{class:"w-4 h-4"})],8,tl)):y("",!0)])],2))),128))])):(a(),o("div",sl,[i(d(ce),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[35]||(t[35]=e("p",{class:"text-slate-400"},"No flags assigned",-1))]))])):m.value==="activity"?(a(),o("div",ll,[t[37]||(t[37]=e("div",{class:"p-4"},[e("h3",{class:"text-lg font-semibold text-white"},"Recent Activity"),e("p",{class:"text-sm text-slate-400"},"User actions and events")],-1)),M.value.length?(a(),o("div",al,[(a(!0),o(p,null,x(M.value,s=>(a(),o("div",{key:s.id,class:"flex items-start gap-4 p-4 hover:bg-slate-700/20 transition-colors"},[e("div",{class:w([Je(s.type),"p-2 rounded-xl"])},[(a(),te(pe(Me(s.type)),{class:"w-5 h-5"}))],2),e("div",ol,[e("p",rl,r(s.description),1),e("p",nl,r(J(s.created_at)),1)]),e("span",{class:w(Y(s.type))},r(s.type),3)]))),128))])):(a(),o("div",il,[i(d(ue),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[36]||(t[36]=e("p",{class:"text-slate-400"},"No activity found",-1))]))])):y("",!0)])],64)):(a(),o("div",vt,[e("div",xt,[e("div",bt,[i(d(qe),{class:"w-8 h-8 text-slate-500"})]),t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No User Selected",-1)),t[10]||(t[10]=e("p",{class:"text-slate-400 text-center max-w-sm"},"Search for a user above to view their details, inventory, timers, and activity",-1))])])),(a(),te(We,{to:"body"},[R.value?(a(),o("div",dl,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=s=>R.value=!1)}),e("div",cl,[t[42]||(t[42]=e("div",{class:"p-6 border-b border-slate-700/50"},[e("h3",{class:"text-lg font-semibold text-white"},"Add Flag"),e("p",{class:"text-sm text-slate-400"},"Add a new flag or tag to this user")],-1)),e("div",ul,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Flag Type",-1)),S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>g.value.type=s),type:"text",placeholder:"e.g., suspicious, vip, warning",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,512),[[L,g.value.type]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Display Label",-1)),S(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>g.value.label=s),type:"text",placeholder:"What to show on the flag",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,512),[[L,g.value.label]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Reason (optional)",-1)),S(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>g.value.reason=s),placeholder:"Why is this flag being added?",rows:"3",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50 resize-none"},null,512),[[L,g.value.reason]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Severity",-1)),e("div",ml,[(a(),o(p,null,x(he,s=>e("button",{key:s.value,onClick:h=>g.value.severity=s.value,class:w(["px-3 py-2 rounded-xl text-sm font-medium transition-all",g.value.severity===s.value?s.activeClass:"bg-slate-700/50 text-slate-400 hover:bg-slate-700"])},r(s.label),11,pl)),64))])])]),e("div",vl,[e("button",{onClick:t[7]||(t[7]=s=>R.value=!1),class:"px-4 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"}," Cancel "),e("button",{onClick:Ae,class:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-xl transition-colors"}," Add Flag ")])])])):y("",!0)]))])}}};export{wl as default};
