import{e as X,x as y,h as m,a as t,n as w,k as o,v as n,Z as A,t as b,j as N,l as g,a8 as I,d as h,m as W,F as ee,i as te,g as i,q as le,o as p}from"./index-DL7Vp4x-.js";const ae={class:"space-y-6"},se={class:"border-b border-gray-700"},re={class:"-mb-px flex space-x-8"},oe={key:0,class:"bg-gray-800 rounded-lg p-6"},de={class:"flex items-center justify-between mb-1"},ne={class:"inline-flex items-center text-sm"},ie=["placeholder"],ue={class:"flex justify-end"},me=["disabled"],pe={key:1,class:"bg-gray-800 rounded-lg p-6"},be={class:"flex space-x-4"},ge={class:"inline-flex items-center"},ce={class:"inline-flex items-center"},ye={key:0,class:"space-y-4 p-4 bg-gray-900 rounded-lg"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"block text-sm font-medium text-gray-300 mb-1"},fe={key:0,class:"text-green-400 text-xs ml-2"},we=["placeholder"],he={key:1,class:"space-y-4 p-4 bg-gray-900 rounded-lg"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e={class:"block text-sm font-medium text-gray-300 mb-1"},Te={key:0,class:"text-green-400 text-xs ml-2"},Se=["placeholder"],Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={class:"flex items-center justify-between p-4 bg-gray-900 rounded-lg"},Ve={class:"relative inline-flex items-center cursor-pointer"},Ue={key:2,class:"flex items-center space-x-2 text-sm"},Ee={class:"text-gray-500"},Me={class:"flex items-center space-x-4 pt-4 border-t border-gray-700"},$e=["disabled"],Fe=["disabled"],Pe={key:2,class:"space-y-4"},De={class:"flex justify-between items-center"},qe=["disabled"],Ae={class:"bg-gray-800 rounded-lg overflow-hidden"},Ne={class:"w-full"},Be={class:"divide-y divide-gray-700"},Le={class:"px-4 py-3 text-white"},ze={class:"px-4 py-3 text-gray-400 font-mono text-sm"},Ie={class:"px-4 py-3 text-gray-300 text-sm"},We={class:"px-4 py-3"},He={class:"px-4 py-3 text-right space-x-2"},Oe=["onClick"],Re=["onClick"],Ge=["onClick"],Ke={key:0},Ye={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ze={class:"bg-gray-800 rounded-lg p-6 w-full max-w-md"},Je={class:"mb-4"},Qe={class:"flex justify-end space-x-3"},Xe=["disabled"],et={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},tt={class:"bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},lt={class:"text-lg font-medium text-white mb-4"},at={class:"grid grid-cols-2 gap-4"},st={class:"text-xs text-gray-500 mt-1"},rt={class:"bg-gray-700 px-1 rounded"},ot={class:"flex items-center"},dt={class:"relative inline-flex items-center cursor-pointer"},nt={class:"flex justify-end space-x-3 pt-4 border-t border-gray-700"},it=["disabled"],ut={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},mt={class:"bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},pt={class:"flex justify-between items-center mb-4"},bt={class:"mb-2 text-sm text-gray-400"},gt={class:"flex-1 overflow-auto bg-white rounded-lg"},ct=["srcdoc"],yt={class:"mt-4 flex justify-end space-x-3"},xt={key:6,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]"},vt={class:"bg-gray-800 rounded-lg p-6 w-full max-w-md"},ft={class:"mb-4"},wt={class:"flex justify-end space-x-3"},ht=["disabled"],Tt={__name:"EmailSettingsView",setup(kt){const x=i("compose"),k=i(!1),_=i(!1),T=i(!1),S=i(!1),C=i(!1),j=i(!1),V=i(!1),U=i(!1),F=i(!1),E=i(!1),v=i(""),f=i(""),c=i({to:"",subject:"",body:"",is_html:!0}),M=i(null),P=i(null),s=i({id:null,mailer:"mailgun",host:"",port:587,username:"",password:"",encryption:"tls",from_address:"",from_name:"",mailgun_domain:"",mailgun_secret:"",mailgun_endpoint:"api.mailgun.net",is_active:!1,has_password:!1,has_mailgun_secret:!1,last_tested_at:null,test_successful:null}),D=i([]),d=i({id:null,slug:"",name:"",subject:"",body_html:"",body_text:"",description:"",is_active:!0,available_variables:[]}),B=le({get:()=>(d.value.available_variables||[]).join(", "),set:a=>{d.value.available_variables=a.split(",").map(e=>e.trim()).filter(e=>e)}});X(()=>{q(),$()});async function q(){try{const a=await y.get("/admin/email/settings");a.data.success&&Object.assign(s.value,a.data.data)}catch(a){console.error("Failed to load email settings:",a)}}async function $(){try{const a=await y.get("/admin/email/templates");a.data.success&&(D.value=a.data.data)}catch(a){console.error("Failed to load templates:",a)}}async function H(){var a,e;k.value=!0;try{(await y.post("/admin/email/settings",s.value)).data.success&&(alert("Email settings saved successfully"),await q())}catch(r){alert(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to save settings")}finally{k.value=!1}}async function O(){var a,e;j.value=!0;try{const r=await y.post("/admin/email/send",c.value);r.data.success&&(alert(r.data.message),c.value={to:"",subject:"",body:"",is_html:!0})}catch(r){alert(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to send email")}finally{j.value=!1}}async function R(){var a,e;if(v.value){_.value=!0;try{const r=await y.post("/admin/email/settings/test",{test_email:v.value});r.data.success&&(alert(r.data.message),V.value=!1,v.value="",await q())}catch(r){alert(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to send test email")}finally{_.value=!1}}}async function G(){var a,e;T.value=!0;try{const r=await y.post("/admin/email/templates/seed-defaults");r.data.success&&(alert(r.data.message),await $())}catch(r){alert(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to create default templates")}finally{T.value=!1}}function L(a=null){a?d.value={...a}:d.value={id:null,slug:"",name:"",subject:"",body_html:"",body_text:"",description:"",is_active:!0,available_variables:[]},U.value=!0}async function K(){var a,e;S.value=!0;try{const r={...d.value};let u;r.id?u=await y.patch(`/admin/email/templates/${r.id}`,r):u=await y.post("/admin/email/templates",r),u.data.success&&(alert(u.data.message),U.value=!1,await $())}catch(r){alert(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to save template")}finally{S.value=!1}}async function Y(a){var e,r;P.value=a;try{const u=await y.post(`/admin/email/templates/${a.id}/preview`);u.data.success&&(M.value=u.data.data,F.value=!0)}catch(u){alert(((r=(e=u.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to preview template")}}async function Z(){var a,e;if(!(!f.value||!P.value)){C.value=!0;try{const r=await y.post(`/admin/email/templates/${P.value.id}/test`,{test_email:f.value});r.data.success&&(alert(r.data.message),E.value=!1,f.value="")}catch(r){alert(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to send test email")}finally{C.value=!1}}}function J(a){confirm(`Are you sure you want to delete "${a.name}"?`)&&Q(a.id)}async function Q(a){var e,r;try{const u=await y.delete(`/admin/email/templates/${a}`);u.data.success&&(alert(u.data.message),await $())}catch(u){alert(((r=(e=u.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete template")}}return(a,e)=>{var r,u;return p(),m("div",ae,[t("div",se,[t("nav",re,[t("button",{onClick:e[0]||(e[0]=l=>x.value="compose"),class:w([x.value==="compose"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300","whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm"])}," Compose ",2),t("button",{onClick:e[1]||(e[1]=l=>x.value="settings"),class:w([x.value==="settings"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300","whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm"])}," Settings ",2),t("button",{onClick:e[2]||(e[2]=l=>x.value="templates"),class:w([x.value==="templates"?"border-amber-500 text-amber-500":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300","whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm"])}," Templates ",2)])]),x.value==="compose"?(p(),m("div",oe,[e[41]||(e[41]=t("div",{class:"mb-4"},[t("h2",{class:"text-lg font-medium text-white mb-2"},"Compose Email"),t("p",{class:"text-sm text-gray-400"},"Send a one-off email to any address")],-1)),t("form",{onSubmit:N(O,["prevent"]),class:"space-y-4"},[t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"To",-1)),o(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>c.value.to=l),type:"email",required:"",placeholder:"recipient@example.com",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,c.value.to]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Subject",-1)),o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>c.value.subject=l),type:"text",required:"",placeholder:"Email subject",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,c.value.subject]])]),t("div",null,[t("div",de,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-300"},"Body",-1)),t("label",ne,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>c.value.is_html=l),class:"form-checkbox text-amber-500 bg-gray-700 border-gray-600 rounded"},null,512),[[A,c.value.is_html]]),e[39]||(e[39]=t("span",{class:"ml-2 text-gray-300"},"HTML",-1))])]),o(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>c.value.body=l),required:"",rows:"12",placeholder:c.value.is_html?"<html>...</html>":"Email body text",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500 font-mono text-sm"},null,8,ie),[[n,c.value.body]])]),t("div",ue,[t("button",{type:"submit",disabled:j.value,class:"px-6 py-2 bg-amber-500 text-black font-medium rounded-md hover:bg-amber-600 disabled:opacity-50"},b(j.value?"Sending...":"Send Email"),9,me)])],32)])):g("",!0),x.value==="settings"?(p(),m("div",pe,[t("form",{onSubmit:N(H,["prevent"]),class:"space-y-6"},[t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Email Provider",-1)),t("div",be,[t("label",ge,[o(t("input",{type:"radio","onUpdate:modelValue":e[7]||(e[7]=l=>s.value.mailer=l),value:"mailgun",class:"form-radio text-amber-500 bg-gray-700 border-gray-600"},null,512),[[I,s.value.mailer]]),e[42]||(e[42]=t("span",{class:"ml-2 text-gray-300"},"Mailgun",-1))]),t("label",ce,[o(t("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=l=>s.value.mailer=l),value:"smtp",class:"form-radio text-amber-500 bg-gray-700 border-gray-600"},null,512),[[I,s.value.mailer]]),e[43]||(e[43]=t("span",{class:"ml-2 text-gray-300"},"SMTP",-1))])])]),s.value.mailer==="mailgun"?(p(),m("div",ye,[e[49]||(e[49]=t("h3",{class:"text-lg font-medium text-white"},"Mailgun Configuration",-1)),t("div",xe,[t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Domain",-1)),o(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.mailgun_domain=l),type:"text",placeholder:"mg.yourdomain.com",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,s.value.mailgun_domain]])]),t("div",null,[t("label",ve,[e[46]||(e[46]=h(" API Key ",-1)),s.value.has_mailgun_secret?(p(),m("span",fe,"(saved)")):g("",!0)]),o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.mailgun_secret=l),type:"password",placeholder:s.value.has_mailgun_secret?"••••••••":"Enter API key",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,8,we),[[n,s.value.mailgun_secret]])]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Endpoint",-1)),o(t("select",{"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.mailgun_endpoint=l),class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-amber-500 focus:border-amber-500"},[...e[47]||(e[47]=[t("option",{value:"api.mailgun.net"},"US Region (api.mailgun.net)",-1),t("option",{value:"api.eu.mailgun.net"},"EU Region (api.eu.mailgun.net)",-1)])],512),[[W,s.value.mailgun_endpoint]])])])])):g("",!0),s.value.mailer==="smtp"?(p(),m("div",he,[e[56]||(e[56]=t("h3",{class:"text-lg font-medium text-white"},"SMTP Configuration",-1)),t("div",ke,[t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Host",-1)),o(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.host=l),type:"text",placeholder:"smtp.example.com",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,s.value.host]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Port",-1)),o(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.port=l),type:"number",placeholder:"587",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,s.value.port,void 0,{number:!0}]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Username",-1)),o(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.username=l),type:"text",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,s.value.username]])]),t("div",null,[t("label",_e,[e[53]||(e[53]=h(" Password ",-1)),s.value.has_password?(p(),m("span",Te,"(saved)")):g("",!0)]),o(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s.value.password=l),type:"password",placeholder:s.value.has_password?"••••••••":"Enter password",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,8,Se),[[n,s.value.password]])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Encryption",-1)),o(t("select",{"onUpdate:modelValue":e[16]||(e[16]=l=>s.value.encryption=l),class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:ring-amber-500 focus:border-amber-500"},[...e[54]||(e[54]=[t("option",{value:"tls"},"TLS",-1),t("option",{value:"ssl"},"SSL",-1),t("option",{value:"null"},"None",-1)])],512),[[W,s.value.encryption]])])])])):g("",!0),t("div",Ce,[t("div",null,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"From Address *",-1)),o(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>s.value.from_address=l),type:"email",required:"",placeholder:"noreply@yourdomain.com",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,s.value.from_address]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"From Name *",-1)),o(t("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>s.value.from_name=l),type:"text",required:"",placeholder:"OpenPBBG",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,s.value.from_name]])])]),t("div",je,[e[60]||(e[60]=t("div",null,[t("h4",{class:"text-white font-medium"},"Enable Email System"),t("p",{class:"text-sm text-gray-400"},"When enabled, emails will be sent for registration, password reset, etc.")],-1)),t("label",Ve,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[19]||(e[19]=l=>s.value.is_active=l),class:"sr-only peer"},null,512),[[A,s.value.is_active]]),e[59]||(e[59]=t("div",{class:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"},null,-1))])]),s.value.last_tested_at?(p(),m("div",Ue,[t("span",{class:w(s.value.test_successful?"text-green-400":"text-red-400")},b(s.value.test_successful?"✓ Last test successful":"✗ Last test failed"),3),t("span",Ee,"("+b(new Date(s.value.last_tested_at).toLocaleString())+")",1)])):g("",!0),t("div",Me,[t("button",{type:"submit",disabled:k.value,class:"px-4 py-2 bg-amber-500 text-black font-medium rounded-md hover:bg-amber-600 disabled:opacity-50"},b(k.value?"Saving...":"Save Settings"),9,$e),t("button",{type:"button",onClick:e[20]||(e[20]=l=>V.value=!0),disabled:!s.value.id,class:"px-4 py-2 bg-gray-600 text-white font-medium rounded-md hover:bg-gray-500 disabled:opacity-50"}," Send Test Email ",8,Fe)])],32)])):g("",!0),x.value==="templates"?(p(),m("div",Pe,[t("div",De,[t("button",{onClick:G,disabled:T.value,class:"px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-md hover:bg-gray-500 disabled:opacity-50"},b(T.value?"Creating...":"Create Default Templates"),9,qe),t("button",{onClick:e[21]||(e[21]=l=>L()),class:"px-4 py-2 bg-amber-500 text-black text-sm font-medium rounded-md hover:bg-amber-600"}," + New Template ")]),t("div",Ae,[t("table",Ne,[e[62]||(e[62]=t("thead",{class:"bg-gray-900"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Slug"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Subject"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase"},"Status"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase"},"Actions")])],-1)),t("tbody",Be,[(p(!0),m(ee,null,te(D.value,l=>(p(),m("tr",{key:l.id,class:"hover:bg-gray-700"},[t("td",Le,b(l.name),1),t("td",ze,b(l.slug),1),t("td",Ie,b(l.subject),1),t("td",We,[t("span",{class:w([l.is_active?"bg-green-900 text-green-300":"bg-red-900 text-red-300","px-2 py-1 text-xs rounded-full"])},b(l.is_active?"Active":"Inactive"),3)]),t("td",He,[t("button",{onClick:z=>Y(l),class:"text-blue-400 hover:text-blue-300 text-sm"},"Preview",8,Oe),t("button",{onClick:z=>L(l),class:"text-amber-400 hover:text-amber-300 text-sm"},"Edit",8,Re),t("button",{onClick:z=>J(l),class:"text-red-400 hover:text-red-300 text-sm"},"Delete",8,Ge)])]))),128)),D.value.length===0?(p(),m("tr",Ke,[...e[61]||(e[61]=[t("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-400"},' No templates found. Click "Create Default Templates" to get started. ',-1)])])):g("",!0)])])])])):g("",!0),V.value?(p(),m("div",Ye,[t("div",Ze,[e[64]||(e[64]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Send Test Email",-1)),t("div",Je,[e[63]||(e[63]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Email Address",-1)),o(t("input",{"onUpdate:modelValue":e[22]||(e[22]=l=>v.value=l),type:"email",placeholder:"test@example.com",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,v.value]])]),t("div",Qe,[t("button",{onClick:e[23]||(e[23]=l=>V.value=!1),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500"},"Cancel"),t("button",{onClick:R,disabled:_.value,class:"px-4 py-2 bg-amber-500 text-black rounded-md hover:bg-amber-600 disabled:opacity-50"},b(_.value?"Sending...":"Send Test"),9,Xe)])])])):g("",!0),U.value?(p(),m("div",et,[t("div",tt,[t("h3",lt,b(d.value.id?"Edit Template":"New Template"),1),t("form",{onSubmit:N(K,["prevent"]),class:"space-y-4"},[t("div",at,[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Name *",-1)),o(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>d.value.name=l),type:"text",required:"",placeholder:"Welcome Email",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,d.value.name]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Slug *",-1)),o(t("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>d.value.slug=l),type:"text",required:"",placeholder:"welcome",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,d.value.slug]])])]),t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Subject *",-1)),o(t("input",{"onUpdate:modelValue":e[26]||(e[26]=l=>d.value.subject=l),type:"text",required:"",placeholder:"Welcome to {{app_name}}, {{username}}!",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,d.value.subject]])]),t("div",null,[e[68]||(e[68]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Description",-1)),o(t("input",{"onUpdate:modelValue":e[27]||(e[27]=l=>d.value.description=l),type:"text",placeholder:"When is this email sent?",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,d.value.description]])]),t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},[h("Available Variables "),t("span",{class:"text-gray-500 font-normal"},"(comma separated)")],-1)),o(t("input",{"onUpdate:modelValue":e[28]||(e[28]=l=>B.value=l),type:"text",placeholder:"app_name, username, email",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,B.value]]),t("p",st,[e[69]||(e[69]=h("Use variables in templates like: ",-1)),t("code",rt,b(a.username),1)])]),t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"HTML Body *",-1)),o(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=l=>d.value.body_html=l),required:"",rows:"12",placeholder:"<!DOCTYPE html>...",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500 font-mono text-sm"},null,512),[[n,d.value.body_html]])]),t("div",null,[e[72]||(e[72]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Plain Text Body (optional)",-1)),o(t("textarea",{"onUpdate:modelValue":e[30]||(e[30]=l=>d.value.body_text=l),rows:"4",placeholder:"Plain text version...",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,d.value.body_text]])]),t("div",ot,[t("label",dt,[o(t("input",{type:"checkbox","onUpdate:modelValue":e[31]||(e[31]=l=>d.value.is_active=l),class:"sr-only peer"},null,512),[[A,d.value.is_active]]),e[73]||(e[73]=t("div",{class:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"},null,-1)),e[74]||(e[74]=t("span",{class:"ml-3 text-sm text-gray-300"},"Active",-1))])]),t("div",nt,[t("button",{type:"button",onClick:e[32]||(e[32]=l=>U.value=!1),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500"},"Cancel"),t("button",{type:"submit",disabled:S.value,class:"px-4 py-2 bg-amber-500 text-black rounded-md hover:bg-amber-600 disabled:opacity-50"},b(S.value?"Saving...":"Save Template"),9,it)])],32)])])):g("",!0),F.value?(p(),m("div",ut,[t("div",mt,[t("div",pt,[e[76]||(e[76]=t("h3",{class:"text-lg font-medium text-white"},"Template Preview",-1)),t("button",{onClick:e[33]||(e[33]=l=>F.value=!1),class:"text-gray-400 hover:text-white"},[...e[75]||(e[75]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",bt,[e[77]||(e[77]=t("strong",null,"Subject:",-1)),h(" "+b((r=M.value)==null?void 0:r.subject),1)]),t("div",gt,[(u=M.value)!=null&&u.body_html?(p(),m("iframe",{key:0,srcdoc:M.value.body_html,class:"w-full h-full min-h-[500px]",sandbox:"allow-same-origin"},null,8,ct)):g("",!0)]),t("div",yt,[t("button",{onClick:e[34]||(e[34]=l=>E.value=!0),class:"px-4 py-2 bg-amber-500 text-black rounded-md hover:bg-amber-600"},"Send Test Email")])])])):g("",!0),E.value?(p(),m("div",xt,[t("div",vt,[e[79]||(e[79]=t("h3",{class:"text-lg font-medium text-white mb-4"},"Send Test Email",-1)),t("div",ft,[e[78]||(e[78]=t("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"Email Address",-1)),o(t("input",{"onUpdate:modelValue":e[35]||(e[35]=l=>f.value=l),type:"email",placeholder:"test@example.com",class:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white placeholder-gray-400 focus:ring-amber-500 focus:border-amber-500"},null,512),[[n,f.value]])]),t("div",wt,[t("button",{onClick:e[36]||(e[36]=l=>E.value=!1),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500"},"Cancel"),t("button",{onClick:Z,disabled:C.value,class:"px-4 py-2 bg-amber-500 text-black rounded-md hover:bg-amber-600 disabled:opacity-50"},b(C.value?"Sending...":"Send"),9,ht)])])])):g("",!0)])}}};export{Tt as default};
