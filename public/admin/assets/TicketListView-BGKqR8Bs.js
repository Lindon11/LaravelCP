import{o as n,h as i,a as t,_ as z,e as E,x as G,F as V,i as $,b as g,A as p,B as J,k as B,v as K,m as D,s as Q,H as X,d as f,l as _,a6 as Y,t as d,w as ee,M as te,a7 as ae,a8 as N,g as h,q as M,u as se,n as v,c as re,N as oe,a9 as le,S as ne,aa as ie,ab as de,U as ue,C as ce}from"./index-D5Yny7xp.js";import{r as ge}from"./CheckCircleIcon-BNgQ-quA.js";function pe(j,w){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}function ve(j,w){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}const be={class:"space-y-6"},me={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},xe=["onClick"],fe={class:"flex items-center justify-between"},he={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},_e={class:"relative flex-1 w-full lg:max-w-md"},we={class:"flex flex-wrap items-center gap-3"},ye={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},ke={key:1,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},Ce={class:"flex flex-col items-center justify-center"},Ve={class:"w-16 h-16 rounded-2xl bg-slate-700/30 flex items-center justify-center mb-4"},$e={class:"text-slate-400 text-center max-w-sm"},Be={key:2,class:"space-y-3"},Me=["onClick"],je={class:"flex items-start gap-4 pl-3"},Ae={class:"flex-1 min-w-0"},Te={class:"flex items-center gap-3 mb-2"},Ue={class:"text-xs font-mono text-slate-500"},Le={class:"text-white font-medium group-hover:text-amber-400 transition-colors truncate mb-2"},Se={class:"flex flex-wrap items-center gap-4 text-sm text-slate-400"},De={class:"inline-flex items-center gap-1.5"},Ne={class:"inline-flex items-center gap-1.5"},Fe={key:0,class:"inline-flex items-center gap-1.5"},Re={key:1,class:"inline-flex items-center gap-1.5"},He={class:"flex items-center gap-3"},Ie={key:0,class:"flex items-center gap-2"},Pe={class:"w-9 h-9 rounded-full bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white text-sm font-semibold"},Ze={key:1,class:"flex items-center gap-2 text-slate-500"},Oe={class:"w-9 h-9 rounded-full bg-slate-700/50 border-2 border-dashed border-slate-600 flex items-center justify-center"},We={key:3,class:"flex items-center justify-between"},qe={class:"text-sm text-slate-400"},ze={class:"flex items-center gap-2"},Ee=["disabled"],Ge={class:"flex items-center gap-1"},Je=["onClick"],Ke=["disabled"],Qe={__name:"TicketListView",setup(j){const w=se(),y=h([]),k=h(!1),m=h({open:0,waiting:0,urgent:0,closed:0}),s=h({search:"",status:"",priority:"",assigned:""}),r=h({current_page:1,last_page:1,per_page:15,total:0});let A=null;const F={open:{badge:"bg-blue-500/20 text-blue-400"},waiting_response:{badge:"bg-amber-500/20 text-amber-400"},answered:{badge:"bg-emerald-500/20 text-emerald-400"},closed:{badge:"bg-slate-600/50 text-slate-400"}},T={urgent:{bar:"bg-red-500",badge:"bg-red-500/20 text-red-400"},high:{bar:"bg-orange-500",badge:"bg-orange-500/20 text-orange-400"},medium:{bar:"bg-amber-500",badge:"bg-amber-500/20 text-amber-400"},low:{bar:"bg-emerald-500",badge:"bg-emerald-500/20 text-emerald-400"}},R=M(()=>[{key:"open",label:"Open",value:m.value.open,filterValue:"open",icon:pe,iconBg:"bg-blue-500/20",iconColor:"text-blue-400",textColor:"text-blue-400",activeBg:"from-blue-500 to-blue-600",activeRing:"ring-blue-500"},{key:"waiting",label:"Waiting",value:m.value.waiting,filterValue:"waiting_response",icon:ue,iconBg:"bg-amber-500/20",iconColor:"text-amber-400",textColor:"text-amber-400",activeBg:"from-amber-500 to-orange-600",activeRing:"ring-amber-500"},{key:"urgent",label:"Urgent",value:m.value.urgent,filterValue:"urgent",icon:ce,iconBg:"bg-red-500/20",iconColor:"text-red-400",textColor:"text-red-400",activeBg:"from-red-500 to-red-600",activeRing:"ring-red-500"},{key:"closed",label:"Closed",value:m.value.closed,filterValue:"closed",icon:ge,iconBg:"bg-emerald-500/20",iconColor:"text-emerald-400",textColor:"text-emerald-400",activeBg:"from-emerald-500 to-emerald-600",activeRing:"ring-emerald-500"}]),U=M(()=>s.value.search||s.value.status||s.value.priority||s.value.assigned),H=M(()=>{const l=[],a=r.value.current_page,e=r.value.last_page,u=2;for(let c=Math.max(1,a-u);c<=Math.min(e,a+u);c++)l.push(c);return l});E(()=>{b()});const b=async()=>{var l,a,e,u;k.value=!0;try{const c={page:r.value.current_page,search:s.value.search,status:s.value.status==="urgent"?"":s.value.status,priority:s.value.status==="urgent"?"urgent":s.value.priority,assigned:s.value.assigned},o=await G.get("/admin/support/tickets",{params:c});y.value=o.data.tickets||o.data.data||o.data,o.data.pagination?r.value=o.data.pagination:(o.data.meta||o.data.current_page)&&(r.value={current_page:((l=o.data.meta)==null?void 0:l.current_page)||o.data.current_page,last_page:((a=o.data.meta)==null?void 0:a.last_page)||o.data.last_page,per_page:((e=o.data.meta)==null?void 0:e.per_page)||o.data.per_page||15,total:((u=o.data.meta)==null?void 0:u.total)||o.data.total}),o.data.stats&&(m.value=o.data.stats)}catch(c){console.error("Failed to fetch tickets:",c)}finally{k.value=!1}},I=()=>{clearTimeout(A),A=setTimeout(()=>{r.value.current_page=1,b()},300)},P=(l,a)=>{a==="urgent"?(s.value.status="urgent",s.value.priority=""):s.value[l]=s.value[l]===a?"":a,r.value.current_page=1,b()},Z=()=>{s.value={search:"",status:"",priority:"",assigned:""},r.value.current_page=1,b()},C=l=>{l>=1&&l<=r.value.last_page&&(r.value.current_page=l,b())},O=l=>w.push(`/tickets/${l}`),W=l=>({open:"Open",waiting_response:"Waiting",answered:"Answered",closed:"Closed"})[l]||l,q=l=>{if(!l)return"N/A";const a=new Date(l),u=new Date-a,c=Math.floor(u/6e4),o=Math.floor(u/36e5),x=Math.floor(u/864e5);return c<60?`${c}m ago`:o<24?`${o}h ago`:x<7?`${x}d ago`:a.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(l,a)=>(n(),i("div",be,[t("div",me,[(n(!0),i(V,null,$(R.value,e=>(n(),i("button",{key:e.key,onClick:u=>P("status",e.filterValue),class:v(["relative overflow-hidden rounded-2xl p-5 text-left transition-all group",s.value.status===e.filterValue?"bg-gradient-to-br ring-2 ring-offset-2 ring-offset-slate-900 "+e.activeRing+" "+e.activeBg:"bg-slate-800/50 hover:bg-slate-800 border border-slate-700/50 hover:border-slate-600/50"])},[t("div",fe,[t("div",null,[t("p",{class:v(["text-3xl font-bold",s.value.status===e.filterValue?"text-white":e.textColor])},d(e.value),3),t("p",{class:v(["text-sm font-medium mt-1",s.value.status===e.filterValue?"text-white/80":"text-slate-400"])},d(e.label),3)]),t("div",{class:v(["p-3 rounded-xl",s.value.status===e.filterValue?"bg-white/20":e.iconBg])},[(n(),re(oe(e.icon),{class:v(["w-6 h-6",s.value.status===e.filterValue?"text-white":e.iconColor])},null,8,["class"]))],2)])],10,xe))),128))]),t("div",he,[t("div",_e,[g(p(J),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),B(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.search=e),type:"text",placeholder:"Search tickets by subject or ID...",onInput:I,class:"w-full pl-12 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[K,s.value.search]])]),t("div",we,[B(t("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.priority=e),onChange:b,class:"px-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all"},[...a[5]||(a[5]=[Q('<option value="" data-v-e1373824>All Priorities</option><option value="urgent" data-v-e1373824>ðŸ”´ Urgent</option><option value="high" data-v-e1373824>ðŸŸ  High</option><option value="medium" data-v-e1373824>ðŸŸ¡ Medium</option><option value="low" data-v-e1373824>ðŸŸ¢ Low</option>',5)])],544),[[D,s.value.priority]]),B(t("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.assigned=e),onChange:b,class:"px-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all"},[...a[6]||(a[6]=[t("option",{value:""},"All Tickets",-1),t("option",{value:"unassigned"},"Unassigned",-1),t("option",{value:"me"},"Assigned to Me",-1)])],544),[[D,s.value.assigned]]),U.value?(n(),i("button",{key:0,onClick:Z,class:"inline-flex items-center gap-2 px-4 py-3 text-slate-400 hover:text-white transition-colors"},[g(p(X),{class:"w-4 h-4"}),a[7]||(a[7]=f(" Clear ",-1))])):_("",!0)])]),k.value?(n(),i("div",ye,[...a[8]||(a[8]=[t("div",{class:"flex flex-col items-center justify-center"},[t("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"}),t("p",{class:"text-slate-400"},"Loading tickets...")],-1)])])):y.value.length===0?(n(),i("div",ke,[t("div",Ce,[t("div",Ve,[g(p(Y),{class:"w-8 h-8 text-slate-500"})]),a[9]||(a[9]=t("h3",{class:"text-lg font-semibold text-white mb-2"},"No tickets found",-1)),t("p",$e,d(U.value?"Try adjusting your filters":"All support tickets will appear here"),1)])])):(n(),i("div",Be,[g(te,{name:"list"},{default:ee(()=>[(n(!0),i(V,null,$(y.value,e=>{var u,c,o,x,L,S;return n(),i("div",{key:e.id,onClick:Xe=>O(e.id),class:"group relative bg-slate-800/50 hover:bg-slate-800 backdrop-blur-sm rounded-2xl border border-slate-700/50 hover:border-slate-600/50 p-5 cursor-pointer transition-all"},[t("div",{class:v(["absolute left-0 top-0 bottom-0 w-1 rounded-l-2xl",((u=T[e.priority])==null?void 0:u.bar)||"bg-slate-600"])},null,2),t("div",je,[t("div",Ae,[t("div",Te,[t("span",Ue,"#"+d(e.id),1),t("span",{class:v(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",((c=F[e.status])==null?void 0:c.badge)||"bg-slate-700 text-slate-300"])},d(W(e.status)),3),t("span",{class:v(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",((o=T[e.priority])==null?void 0:o.badge)||"bg-slate-700 text-slate-300"])},d(e.priority),3)]),t("h3",Le,d(e.subject),1),t("div",Se,[t("span",De,[g(p(le),{class:"w-4 h-4"}),f(" "+d(((x=e.user)==null?void 0:x.username)||"Unknown"),1)]),t("span",Ne,[g(p(ne),{class:"w-4 h-4"}),f(" "+d(q(e.updated_at)),1)]),e.messages_count?(n(),i("span",Fe,[g(p(ie),{class:"w-4 h-4"}),f(" "+d(e.messages_count)+" messages ",1)])):_("",!0),e.category?(n(),i("span",Re,[g(p(ve),{class:"w-4 h-4"}),f(" "+d(e.category.name),1)])):_("",!0)])]),t("div",He,[e.assigned_user?(n(),i("div",Ie,[t("div",Pe,d((S=(L=e.assigned_user.username)==null?void 0:L.charAt(0))==null?void 0:S.toUpperCase()),1)])):(n(),i("div",Ze,[t("div",Oe,[g(p(de),{class:"w-4 h-4"})])])),g(p(N),{class:"w-5 h-5 text-slate-600 group-hover:text-slate-400 transition-colors"})])])],8,Me)}),128))]),_:1})])),r.value.last_page>1?(n(),i("div",We,[t("p",qe," Showing "+d((r.value.current_page-1)*r.value.per_page+1)+" to "+d(Math.min(r.value.current_page*r.value.per_page,r.value.total))+" of "+d(r.value.total)+" tickets ",1),t("div",ze,[t("button",{onClick:a[3]||(a[3]=e=>C(r.value.current_page-1)),disabled:r.value.current_page===1,class:"p-2 rounded-lg bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(p(ae),{class:"w-5 h-5"})],8,Ee),t("div",Ge,[(n(!0),i(V,null,$(H.value,e=>(n(),i("button",{key:e,onClick:u=>C(e),class:v(["w-10 h-10 rounded-lg text-sm font-medium transition-colors",e===r.value.current_page?"bg-gradient-to-r from-amber-500 to-orange-600 text-white":"bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700"])},d(e),11,Je))),128))]),t("button",{onClick:a[4]||(a[4]=e=>C(r.value.current_page+1)),disabled:r.value.current_page===r.value.last_page,class:"p-2 rounded-lg bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[g(p(N),{class:"w-5 h-5"})],8,Ke)])])):_("",!0)]))}},tt=z(Qe,[["__scopeId","data-v-e1373824"]]);export{tt as default};
