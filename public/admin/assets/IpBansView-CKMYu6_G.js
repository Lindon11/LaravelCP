import{_ as A,e as D,x as h,h as u,a as e,t as d,b as o,z as r,ap as N,aq as U,H as S,k as _,v as g,d as E,P as F,F as M,i as z,c as L,w as R,T as q,S as H,g as p,y as Q,q as G,o as n,ar as J,n as K,E as O,D as W,l as X}from"./index-DhDiA3Nh.js";import{r as Y}from"./ClockIcon-OKBvF__o.js";import{r as Z}from"./PlusIcon-BySqkiVU.js";import{r as ee}from"./PencilIcon-C5sRBN5k.js";const te={class:"space-y-6"},se={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},ae={class:"bg-slate-800/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-5"},le={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold text-white mt-1"},re={class:"p-3 rounded-xl bg-red-500/20"},de={class:"bg-slate-800/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-5"},ne={class:"flex items-center justify-between"},ie={class:"text-2xl font-bold text-white mt-1"},ce={class:"p-3 rounded-xl bg-slate-700/50"},ue={class:"bg-slate-800/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-5"},pe={class:"flex items-center justify-between"},xe={class:"text-2xl font-bold text-white mt-1"},be={class:"p-3 rounded-xl bg-amber-500/20"},me={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},fe={class:"relative w-full sm:w-80"},ve={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},he={key:1,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},_e={class:"flex flex-col items-center justify-center"},ge={class:"w-16 h-16 rounded-2xl bg-emerald-500/20 flex items-center justify-center mb-4"},we={key:2,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 overflow-hidden"},ye={class:"overflow-x-auto"},ke={class:"w-full"},Ie={class:"divide-y divide-slate-700/50"},Be={class:"px-6 py-4"},Pe={class:"flex items-center gap-3"},Ce={class:"w-9 h-9 rounded-lg bg-red-500/20 flex items-center justify-center"},$e={class:"font-mono text-sm text-white"},je={class:"px-6 py-4"},Te={class:"text-sm text-slate-300 max-w-xs truncate"},Ve={class:"px-6 py-4 text-sm text-slate-400"},Ae={class:"px-6 py-4"},De={class:"px-6 py-4"},Ne={class:"flex items-center justify-center gap-2"},Ue=["onClick"],Se=["onClick"],Ee={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Fe={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-lg"},Me={class:"flex items-center justify-between p-6 border-b border-slate-700"},ze={class:"text-lg font-bold text-white"},Le={class:"p-6 space-y-5"},Re={class:"space-y-2"},qe={class:"space-y-2"},He={class:"space-y-2"},Qe={class:"flex items-center justify-end gap-3 p-6 border-t border-slate-700 bg-slate-800/50"},Ge=["disabled"],Je={__name:"IpBansView",setup(Ke){const i=Q(),x=p([]),w=p(!1),y=p(""),b=p(!1),c=p(null),m=p(!1);let I=null;const l=p({ip_address:"",reason:"",expires_at:null}),k=G(()=>({total:x.value.length,permanent:x.value.filter(s=>!s.expires_at).length,temporary:x.value.filter(s=>s.expires_at).length}));D(()=>f());const f=async()=>{w.value=!0;try{const s={search:y.value},t=await h.get("/admin/ip-bans",{params:s});x.value=t.data.data||t.data}catch{i.error("Failed to load IP bans")}finally{w.value=!1}},P=()=>{clearTimeout(I),I=setTimeout(f,300)},C=()=>{c.value=null,l.value={ip_address:"",reason:"",expires_at:null},b.value=!0},$=s=>{c.value=s,l.value={...s},b.value=!0},v=()=>{b.value=!1,c.value=null},j=async()=>{var s,t;if(!l.value.ip_address||!l.value.reason){i.error("IP address and reason are required");return}m.value=!0;try{c.value?(await h.patch(`/admin/ip-bans/${c.value.id}`,l.value),i.success("IP ban updated")):(await h.post("/admin/ip-bans",l.value),i.success("IP address banned")),v(),f()}catch(a){i.error(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to save ban")}finally{m.value=!1}},T=async s=>{if(confirm(`Remove ban for ${s.ip_address}?`))try{await h.delete(`/admin/ip-bans/${s.id}`),i.success("IP ban removed"),f()}catch{i.error("Failed to remove ban")}},B=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return(s,t)=>(n(),u("div",te,[e("div",se,[e("div",ae,[e("div",le,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-slate-400"},"Total Bans",-1)),e("p",oe,d(k.value.total),1)]),e("div",re,[o(r(N),{class:"w-6 h-6 text-red-400"})])])]),e("div",de,[e("div",ne,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-slate-400"},"Permanent Bans",-1)),e("p",ie,d(k.value.permanent),1)]),e("div",ce,[o(r(U),{class:"w-6 h-6 text-slate-400"})])])]),e("div",ue,[e("div",pe,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-slate-400"},"Temporary Bans",-1)),e("p",xe,d(k.value.temporary),1)]),e("div",be,[o(r(Y),{class:"w-6 h-6 text-amber-400"})])])])]),e("div",me,[e("div",fe,[o(r(S),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a),type:"text",placeholder:"Search by IP address...",onInput:P,class:"w-full pl-10 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[g,y.value]])]),e("button",{onClick:C,class:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl font-medium shadow-lg shadow-red-500/20 transition-all"},[o(r(Z),{class:"w-5 h-5"}),t[7]||(t[7]=E(" Ban IP Address ",-1))])]),w.value?(n(),u("div",ve,[...t[8]||(t[8]=[e("div",{class:"flex flex-col items-center justify-center"},[e("div",{class:"w-12 h-12 border-4 border-red-500/30 border-t-red-500 rounded-full animate-spin mb-4"}),e("p",{class:"text-slate-400"},"Loading bans...")],-1)])])):x.value.length===0?(n(),u("div",he,[e("div",_e,[e("div",ge,[o(r(F),{class:"w-8 h-8 text-emerald-400"})]),t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No IP bans",-1)),t[10]||(t[10]=e("p",{class:"text-slate-400 text-center max-w-sm"},"All clear! No IP addresses are currently banned.",-1))])])):(n(),u("div",we,[e("div",ye,[e("table",ke,[t[11]||(t[11]=e("thead",{class:"bg-slate-700/50 border-b border-slate-600/50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider"},"IP Address"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider"},"Reason"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider"},"Banned At"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider"},"Expires"),e("th",{class:"px-6 py-4 text-center text-xs font-semibold text-slate-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ie,[(n(!0),u(M,null,z(x.value,a=>(n(),u("tr",{key:a.id,class:"hover:bg-slate-700/25 transition-colors"},[e("td",Be,[e("div",Pe,[e("div",Ce,[o(r(J),{class:"w-5 h-5 text-red-400"})]),e("span",$e,d(a.ip_address),1)])]),e("td",je,[e("p",Te,d(a.reason),1)]),e("td",Ve,d(B(a.created_at)),1),e("td",Ae,[e("span",{class:K(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",a.expires_at?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"])},d(a.expires_at?B(a.expires_at):"Permanent"),3)]),e("td",De,[e("div",Ne,[e("button",{onClick:V=>$(a),class:"p-2 rounded-lg text-slate-400 hover:text-amber-400 hover:bg-slate-700/50 transition-colors"},[o(r(ee),{class:"w-4 h-4"})],8,Ue),e("button",{onClick:V=>T(a),class:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[o(r(O),{class:"w-4 h-4"})],8,Se)])])]))),128))])])])])),(n(),L(H,{to:"body"},[o(q,{name:"modal"},{default:R(()=>[b.value?(n(),u("div",Ee,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:v}),e("div",Fe,[e("div",Me,[e("h2",ze,d(c.value?"Edit IP Ban":"Ban IP Address"),1),e("button",{onClick:v,class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[o(r(W),{class:"w-5 h-5"})])]),e("div",Le,[e("div",Re,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-slate-300"},"IP Address *",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.ip_address=a),type:"text",placeholder:"192.168.1.1 or 192.168.1.*",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-red-500/50 transition-all font-mono"},null,512),[[g,l.value.ip_address]]),t[13]||(t[13]=e("p",{class:"text-xs text-slate-500"},"Use * for wildcard matching",-1))]),e("div",qe,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-300"},"Reason *",-1)),_(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.reason=a),rows:"3",placeholder:"Reason for banning this IP...",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-red-500/50 transition-all resize-none"},null,512),[[g,l.value.reason]])]),e("div",He,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-300"},"Expires At",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.expires_at=a),type:"datetime-local",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-red-500/50 focus:border-red-500/50 transition-all"},null,512),[[g,l.value.expires_at]]),t[16]||(t[16]=e("p",{class:"text-xs text-slate-500"},"Leave empty for permanent ban",-1))])]),e("div",Qe,[e("button",{onClick:v,class:"px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl font-medium transition-colors"}," Cancel "),e("button",{onClick:j,disabled:m.value,class:"px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl font-medium shadow-lg shadow-red-500/20 transition-all disabled:opacity-50"},d(m.value?"Saving...":c.value?"Update Ban":"Ban IP"),9,Ge)])])])):X("",!0)]),_:1})]))]))}},Ze=A(Je,[["__scopeId","data-v-0b15d0f0"]]);export{Ze as default};
