import{e as E,h as u,a as e,n as v,c as _,z as a,P as N,V as $,t as i,b as r,a5 as D,l as y,k as A,v as P,d as n,j as U,K as B,S,x as k,g as x,q as z,y as M,o as d}from"./index-DhDiA3Nh.js";import{r as c}from"./CheckIcon-BmaRlrVk.js";const K={class:"space-y-6"},F={class:"flex items-center justify-between"},R={class:"flex items-center gap-4"},q={class:"text-xl font-bold text-white"},G={class:"text-sm text-slate-400"},I={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},Y={class:"flex items-center gap-3 mb-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"space-y-4"},O={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},Q={class:"text-sm text-amber-400 bg-slate-900/50 px-3 py-1 rounded-lg font-mono"},W={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},X={class:"text-sm text-white font-medium capitalize"},Z={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},ee={class:"text-sm text-white font-medium"},se={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},te={class:"text-sm text-white font-medium"},le={class:"space-y-4"},ae={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},ie={class:"text-sm text-white font-medium"},re={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},oe={class:"text-sm text-white font-medium"},ne={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},de={class:"flex justify-between items-center py-3 border-b border-slate-700/50"},ce={class:"text-sm text-white font-medium"},ue={class:"mt-6 flex justify-end"},xe={key:1,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},me={class:"flex items-center gap-3 mb-6"},pe={class:"space-y-2"},be={key:0,class:"p-4 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 text-sm"},ve=["disabled"],fe={key:0,class:"flex items-center gap-2"},ge={key:1},ye={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},he={class:"flex items-center gap-3 mb-6"},we={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},_e={class:"rounded-xl bg-slate-900/50 border border-slate-700/30 p-5"},ke={class:"space-y-2 text-sm text-slate-400"},Le={class:"flex items-center gap-2"},Ce={class:"flex items-center gap-2"},De={class:"flex items-center gap-2"},je={class:"rounded-xl bg-slate-900/50 border border-amber-500/20 p-5 ring-1 ring-amber-500/20"},Ve={class:"space-y-2 text-sm text-slate-400"},Te={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-2"},$e={class:"rounded-xl bg-slate-900/50 border border-purple-500/20 p-5"},Ae={class:"space-y-2 text-sm text-slate-400"},Pe={class:"flex items-center gap-2"},Ue={class:"flex items-center gap-2"},Be={class:"flex items-center gap-2"},Se={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ze={class:"relative bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-md w-full shadow-2xl"},Me={class:"flex gap-3 justify-end"},Ke=["disabled"],Ge={__name:"LicenseView",setup(Fe){const{showToast:h}=M(),L=x(!0),m=x(""),p=x(!1),f=x(""),g=x(!1),b=x(!1),t=x({licensed:!1,key:"",tier:"",customer:"",email:"",domain:"",issued:null,expires:"never",max_users:"unlimited",plugins:"*"}),j=z(()=>{if(!t.value.expires||t.value.expires==="never")return!1;const o=(new Date(t.value.expires)-new Date)/(1e3*60*60*24);return o>0&&o<=30}),C=l=>{if(!l||l==="never")return"Never";try{return new Date(l).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})}catch{return l}},w=async()=>{L.value=!0;try{const l=await k.get("/admin/license/status");t.value=l.data}catch(l){console.error("Failed to fetch license status:",l)}finally{L.value=!1}},V=async()=>{var l,s;p.value=!0,f.value="";try{const o=await k.post("/admin/license/activate",{license_key:m.value.trim()});h(o.data.message||"License activated!","success"),m.value="",await w()}catch(o){f.value=((s=(l=o.response)==null?void 0:l.data)==null?void 0:s.error)||"Failed to activate license. Please check your key."}finally{p.value=!1}},T=async()=>{g.value=!0;try{await k.delete("/admin/license/deactivate"),h("License deactivated.","info"),b.value=!1,await w()}catch{h("Failed to deactivate license.","error")}finally{g.value=!1}};return E(()=>{w()}),(l,s)=>(d(),u("div",K,[e("div",{class:v(["rounded-2xl backdrop-blur border p-6",t.value.licensed?"bg-emerald-900/20 border-emerald-600/30":"bg-red-900/20 border-red-600/30"])},[e("div",F,[e("div",R,[e("div",{class:v(["w-14 h-14 rounded-xl flex items-center justify-center",t.value.licensed?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"])},[t.value.licensed?(d(),_(a(N),{key:0,class:"w-8 h-8"})):(d(),_(a($),{key:1,class:"w-8 h-8"}))],2),e("div",null,[e("h2",q,i(t.value.licensed?"License Active":"No Valid License"),1),e("p",G,i(t.value.licensed?`Licensed to ${t.value.customer}`:"Enter your LaravelCP license key to activate."),1)])]),e("span",{class:v(["px-4 py-1.5 rounded-full text-sm font-semibold uppercase tracking-wide",t.value.licensed?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"])},i(t.value.licensed?t.value.tier:"Unlicensed"),3)])],2),t.value.licensed?(d(),u("div",I,[e("div",Y,[r(a(D),{class:"w-6 h-6 text-amber-400"}),s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-white"},"License Details",-1))]),e("div",H,[e("div",J,[e("div",O,[s[5]||(s[5]=e("span",{class:"text-sm text-slate-400"},"License Key",-1)),e("code",Q,i(t.value.key),1)]),e("div",W,[s[6]||(s[6]=e("span",{class:"text-sm text-slate-400"},"Tier",-1)),e("span",X,i(t.value.tier),1)]),e("div",Z,[s[7]||(s[7]=e("span",{class:"text-sm text-slate-400"},"Customer",-1)),e("span",ee,i(t.value.customer),1)]),e("div",se,[s[8]||(s[8]=e("span",{class:"text-sm text-slate-400"},"Email",-1)),e("span",te,i(t.value.email),1)])]),e("div",le,[e("div",ae,[s[9]||(s[9]=e("span",{class:"text-sm text-slate-400"},"Domain",-1)),e("span",ie,i(t.value.domain),1)]),e("div",re,[s[10]||(s[10]=e("span",{class:"text-sm text-slate-400"},"Issued",-1)),e("span",oe,i(C(t.value.issued)),1)]),e("div",ne,[s[11]||(s[11]=e("span",{class:"text-sm text-slate-400"},"Expires",-1)),e("span",{class:v(["text-sm font-medium",j.value?"text-amber-400":"text-white"])},i(t.value.expires==="never"?"Never":C(t.value.expires)),3)]),e("div",de,[s[12]||(s[12]=e("span",{class:"text-sm text-slate-400"},"Max Users",-1)),e("span",ce,i(t.value.max_users==="unlimited"?"Unlimited":t.value.max_users),1)])])]),e("div",ue,[e("button",{onClick:s[0]||(s[0]=o=>b.value=!0),class:"px-4 py-2 rounded-xl text-sm font-medium text-red-400 border border-red-500/30 hover:bg-red-500/10 transition-all"}," Deactivate License ")])])):y("",!0),t.value.licensed?y("",!0):(d(),u("div",xe,[e("div",me,[r(a(D),{class:"w-6 h-6 text-amber-400"}),s[13]||(s[13]=e("h3",{class:"text-lg font-semibold text-white"},"Activate License",-1))]),e("form",{onSubmit:U(V,["prevent"]),class:"space-y-4"},[e("div",pe,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-slate-300"},"License Key",-1)),A(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>m.value=o),type:"text",placeholder:"LCP-STANDARD-xxxxxxx-xxxxxxxx",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-500 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[P,m.value]]),s[15]||(s[15]=e("p",{class:"text-xs text-slate-400"},"Enter the license key you received when purchasing LaravelCP.",-1))]),f.value?(d(),u("div",be,i(f.value),1)):y("",!0),e("button",{type:"submit",disabled:!m.value||p.value,class:v(["px-6 py-3 rounded-xl text-sm font-semibold text-white transition-all",!m.value||p.value?"bg-slate-600 cursor-not-allowed opacity-50":"bg-gradient-to-r from-amber-500 to-orange-600 hover:shadow-lg hover:shadow-amber-500/25 hover:-translate-y-0.5"])},[p.value?(d(),u("span",fe,[...s[16]||(s[16]=[e("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),n(" Validating... ",-1)])])):(d(),u("span",ge,"Activate License"))],10,ve)],32)])),e("div",ye,[e("div",he,[r(a(B),{class:"w-6 h-6 text-amber-400"}),s[17]||(s[17]=e("h3",{class:"text-lg font-semibold text-white"},"License Tiers",-1))]),e("div",we,[e("div",_e,[s[21]||(s[21]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"w-3 h-3 rounded-full bg-blue-400"}),e("h4",{class:"text-white font-semibold"},"Standard")],-1)),e("ul",ke,[e("li",Le,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[18]||(s[18]=n(" Single domain ",-1))]),e("li",Ce,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[19]||(s[19]=n(" Core plugins ",-1))]),e("li",De,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[20]||(s[20]=n(" Community support ",-1))])])]),e("div",je,[s[25]||(s[25]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"w-3 h-3 rounded-full bg-amber-400"}),e("h4",{class:"text-white font-semibold"},"Extended"),e("span",{class:"text-xs bg-amber-500/20 text-amber-400 px-2 py-0.5 rounded-full"},"Popular")],-1)),e("ul",Ve,[e("li",Te,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[22]||(s[22]=n(" Up to 5 domains ",-1))]),e("li",Ee,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[23]||(s[23]=n(" All plugins included ",-1))]),e("li",Ne,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[24]||(s[24]=n(" Priority support ",-1))])])]),e("div",$e,[s[29]||(s[29]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"w-3 h-3 rounded-full bg-purple-400"}),e("h4",{class:"text-white font-semibold"},"Unlimited")],-1)),e("ul",Ae,[e("li",Pe,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[26]||(s[26]=n(" Unlimited domains ",-1))]),e("li",Ue,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[27]||(s[27]=n(" All plugins + future ",-1))]),e("li",Be,[r(a(c),{class:"w-4 h-4 text-emerald-400 shrink-0"}),s[28]||(s[28]=n(" Dedicated support ",-1))])])])])]),(d(),_(S,{to:"body"},[b.value?(d(),u("div",Se,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s[2]||(s[2]=o=>b.value=!1)}),e("div",ze,[s[30]||(s[30]=e("h3",{class:"text-lg font-bold text-white mb-2"},"Deactivate License?",-1)),s[31]||(s[31]=e("p",{class:"text-sm text-slate-400 mb-6"}," This will remove the license key from this installation. You can re-activate it at any time with a valid key. ",-1)),e("div",Me,[e("button",{onClick:s[3]||(s[3]=o=>b.value=!1),class:"px-4 py-2 rounded-xl text-sm font-medium text-slate-300 border border-slate-600 hover:bg-slate-700/50 transition-all"}," Cancel "),e("button",{onClick:T,disabled:g.value,class:"px-4 py-2 rounded-xl text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition-all"},i(g.value?"Removing...":"Deactivate"),9,Ke)])])])):y("",!0)]))]))}};export{Ge as default};
