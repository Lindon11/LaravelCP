import{_ as w,e as P,h as n,a as e,k as C,m as S,s as x,t as a,F as R,i as V,l as B,x as D,g as u,q as L,o,n as N}from"./index-D8cdO5Bu.js";const z={class:"view-container"},F={class:"filters-row"},I={key:0,class:"loading"},M={key:1,class:"error"},A={key:2,class:"empty"},U={key:3,class:"data-table"},W={key:4,class:"pagination"},$=["disabled"],q={class:"page-info"},E=["disabled"],j={__name:"RacesView",setup(G){const r=u([]),c=u(!0),v=u(null),p=u(""),s=u(1),d=u(1),h=L(()=>p.value?r.value.filter(i=>i.status===p.value):r.value),_=async()=>{var i,l;c.value=!0,v.value=null;try{const t=await D.get("/admin/races",{params:{page:s.value}});r.value=t.data.data||t.data||[],d.value=t.data.last_page||1}catch(t){v.value=((l=(i=t.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to load races"}finally{c.value=!1}},b=()=>{s.value>1&&(s.value--,_())},y=()=>{s.value<d.value&&(s.value++,_())},k=i=>new Date(i).toLocaleString();return P(_),(i,l)=>(o(),n("div",z,[l[3]||(l[3]=e("div",{class:"view-header"},[e("h1",null,"Races"),e("p",{class:"subtitle"},"Monitor active and completed races")],-1)),e("div",F,[C(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>p.value=t),class:"filter-select"},[...l[1]||(l[1]=[x('<option value="" data-v-8e937728>All Races</option><option value="waiting" data-v-8e937728>Waiting</option><option value="in_progress" data-v-8e937728>In Progress</option><option value="completed" data-v-8e937728>Completed</option><option value="cancelled" data-v-8e937728>Cancelled</option>',5)])],512),[[S,p.value]]),e("button",{onClick:_,class:"btn btn-secondary"}," üîÑ Refresh ")]),c.value?(o(),n("div",I,"Loading races...")):v.value?(o(),n("div",M,a(v.value),1)):r.value.length===0?(o(),n("div",A,"No races found.")):(o(),n("table",U,[l[2]||(l[2]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Created By"),e("th",null,"Status"),e("th",null,"Buy-in"),e("th",null,"Participants"),e("th",null,"Winner"),e("th",null,"Prize Pool"),e("th",null,"Created At")])],-1)),e("tbody",null,[(o(!0),n(R,null,V(h.value,t=>{var g,m,f;return o(),n("tr",{key:t.id},[e("td",null,"#"+a(t.id),1),e("td",null,a(((g=t.creator)==null?void 0:g.username)||"Unknown"),1),e("td",null,[e("span",{class:N(["badge",t.status])},a(t.status),3)]),e("td",null,"$"+a((t.buy_in||0).toLocaleString()),1),e("td",null,a(((m=t.participants)==null?void 0:m.length)||0)+"/"+a(t.max_participants||4),1),e("td",null,a(((f=t.winner)==null?void 0:f.username)||"-"),1),e("td",null,"$"+a((t.prize_pool||0).toLocaleString()),1),e("td",null,a(k(t.created_at)),1)])}),128))])])),!c.value&&d.value>1?(o(),n("div",W,[e("button",{onClick:b,disabled:s.value===1,class:"btn btn-sm"},"‚Üê Prev",8,$),e("span",q,"Page "+a(s.value)+" of "+a(d.value),1),e("button",{onClick:y,disabled:s.value===d.value,class:"btn btn-sm"},"Next ‚Üí",8,E)])):B("",!0)]))}},J=w(j,[["__scopeId","data-v-8e937728"]]);export{J as default};
