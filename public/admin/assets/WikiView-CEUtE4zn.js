import{h as a,a as e,o,_ as R,e as X,x,b as n,A as d,B as ee,k as m,v as f,m as H,F as A,i as $,d as V,Y as te,t as c,w as N,M as se,c as E,T as I,E as L,g as u,y as le,Z as oe,n as ae,$ as re,S as ne,G as W,H as Z,I as ie,l as G,a0 as de}from"./index-D5Yny7xp.js";import{r as ce,a as ue}from"./PlusIcon-D5YIP-bL.js";function me(U,i){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function be(U,i){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}const xe={class:"space-y-6"},pe={class:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4"},fe={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full lg:w-auto"},ve={class:"relative w-full sm:w-80"},ge=["value"],he={class:"flex items-center gap-3"},we={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},ye={key:1,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},_e={class:"flex flex-col items-center justify-center"},ke={class:"w-16 h-16 rounded-2xl bg-slate-700/30 flex items-center justify-center mb-4"},Ce={class:"text-slate-400 text-center max-w-sm mb-4"},Ae={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6"},$e={class:"p-6"},Ve={class:"flex items-start justify-between mb-4"},je={class:"flex items-center gap-3"},Te={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center"},Me={key:0,class:"text-xs font-medium text-amber-400"},Ne={key:1,class:"text-xs font-medium text-slate-500"},Ue={class:"text-lg font-semibold text-white group-hover:text-amber-400 transition-colors mb-2 line-clamp-1"},De={class:"text-sm text-slate-400 line-clamp-2 mb-4"},Se={class:"flex items-center justify-between pt-4 border-t border-slate-700/50"},Fe={class:"flex items-center gap-4 text-xs text-slate-500"},Be={class:"inline-flex items-center gap-1"},ze={class:"inline-flex items-center gap-1"},He={class:"flex items-center gap-1"},Ee=["onClick"],Ie=["onClick"],Le={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},We={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},Ze={class:"flex items-center justify-between p-6 border-b border-slate-700 shrink-0"},Ge={class:"text-lg font-bold text-white"},Ke={class:"p-6 overflow-y-auto flex-1 space-y-5"},Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},qe={class:"space-y-2"},Qe={class:"space-y-2"},Ye=["value"],Je={class:"space-y-2"},Oe={class:"space-y-2"},Re={class:"space-y-2"},Xe={class:"flex items-center gap-6 pt-2"},et={class:"flex items-center gap-3 cursor-pointer"},tt={class:"flex items-center justify-end gap-3 p-6 border-t border-slate-700 bg-slate-800/50 shrink-0"},st=["disabled"],lt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ot={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-md"},at={class:"flex items-center justify-between p-6 border-b border-slate-700"},rt={class:"p-6 space-y-4"},nt={class:"flex gap-2"},it=["disabled"],dt={key:0,class:"text-center py-6 text-slate-400"},ct={key:1,class:"space-y-2 max-h-64 overflow-y-auto"},ut={class:"flex items-center gap-3"},mt={class:"text-sm text-white"},bt=["onClick"],xt={__name:"WikiView",setup(U){const i=le(),j=u([]),v=u([]),T=u(!1),h=u(""),w=u(""),y=u(!1),_=u(!1),b=u(null),k=u(!1),p=u("");let D=null;const S={title:"",slug:"",excerpt:"",content:"",category_id:null,is_published:!1},r=u({...S});X(()=>{g(),M()});const g=async()=>{T.value=!0;try{const l={search:h.value,category_id:w.value},t=await x.get("/admin/wiki",{params:l});j.value=t.data.data||t.data}catch{i.error("Failed to load articles")}finally{T.value=!1}},M=async()=>{try{const l=await x.get("/admin/wiki/categories");v.value=l.data.data||l.data}catch{console.error("Failed to load categories")}},K=()=>{clearTimeout(D),D=setTimeout(g,300)},F=()=>{b.value=null,r.value={...S},y.value=!0},P=l=>{b.value=l,r.value={...l},y.value=!0},C=()=>{y.value=!1,b.value=null},q=async()=>{var l,t;if(!r.value.title||!r.value.content){i.error("Title and content are required");return}k.value=!0;try{b.value?(await x.patch(`/admin/wiki/${b.value.id}`,r.value),i.success("Article updated")):(await x.post("/admin/wiki",r.value),i.success("Article created")),C(),g()}catch(s){i.error(((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to save article")}finally{k.value=!1}},Q=async l=>{if(confirm(`Delete "${l.title}"?`))try{await x.delete(`/admin/wiki/${l.id}`),i.success("Article deleted"),g()}catch{i.error("Failed to delete article")}},B=async()=>{if(p.value.trim())try{await x.post("/admin/wiki/categories",{name:p.value.trim()}),i.success("Category created"),p.value="",M()}catch{i.error("Failed to create category")}},Y=async l=>{if(confirm(`Delete category "${l.name}"?`))try{await x.delete(`/admin/wiki/categories/${l.id}`),i.success("Category deleted"),M()}catch{i.error("Failed to delete category")}},J=l=>(l==null?void 0:l.replace(/<[^>]*>/g,"").substring(0,150))||"",O=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A";return(l,t)=>(o(),a("div",xe,[e("div",pe,[e("div",fe,[e("div",ve,[n(d(ee),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),type:"text",placeholder:"Search wiki articles...",onInput:K,class:"w-full pl-10 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[f,h.value]])]),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>w.value=s),onChange:g,class:"px-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all"},[t[12]||(t[12]=e("option",{value:""},"All Categories",-1)),(o(!0),a(A,null,$(v.value,s=>(o(),a("option",{key:s.id,value:s.id},c(s.name),9,ge))),128))],544),[[H,w.value]])]),e("div",he,[e("button",{onClick:t[2]||(t[2]=s=>_.value=!0),class:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white rounded-xl font-medium transition-all"},[n(d(me),{class:"w-5 h-5"}),t[13]||(t[13]=V(" Categories ",-1))]),e("button",{onClick:F,class:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl font-medium shadow-lg shadow-amber-500/20 transition-all"},[n(d(ce),{class:"w-5 h-5"}),t[14]||(t[14]=V(" New Article ",-1))])])]),T.value?(o(),a("div",we,[...t[15]||(t[15]=[e("div",{class:"flex flex-col items-center justify-center"},[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"}),e("p",{class:"text-slate-400"},"Loading articles...")],-1)])])):j.value.length===0?(o(),a("div",ye,[e("div",_e,[e("div",ke,[n(d(te),{class:"w-8 h-8 text-slate-500"})]),t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No articles found",-1)),e("p",Ce,c(h.value||w.value?"Try adjusting your filters":"Create your first wiki article"),1),e("button",{onClick:F,class:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors"}," Create Article ")])])):(o(),a("div",Ae,[n(se,{name:"list"},{default:N(()=>[(o(!0),a(A,null,$(j.value,s=>(o(),a("div",{key:s.id,class:"group bg-slate-800/50 hover:bg-slate-800 backdrop-blur-sm rounded-2xl border border-slate-700/50 hover:border-slate-600/50 overflow-hidden transition-all"},[e("div",$e,[e("div",Ve,[e("div",je,[e("div",Te,[n(d(oe),{class:"w-5 h-5 text-white"})]),e("div",null,[s.category?(o(),a("span",Me,c(s.category.name),1)):(o(),a("span",Ne,"Uncategorized"))])]),e("span",{class:ae(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",s.is_published?"bg-emerald-500/20 text-emerald-400":"bg-slate-600/50 text-slate-400"])},c(s.is_published?"Published":"Draft"),3)]),e("h3",Ue,c(s.title),1),e("p",De,c(s.excerpt||J(s.content)),1),e("div",Se,[e("div",Fe,[e("span",Be,[n(d(re),{class:"w-4 h-4"}),V(" "+c(s.views||0),1)]),e("span",ze,[n(d(ne),{class:"w-4 h-4"}),V(" "+c(O(s.updated_at||s.created_at)),1)])]),e("div",He,[e("button",{onClick:z=>P(s),class:"p-2 rounded-lg text-slate-400 hover:text-amber-400 hover:bg-slate-700/50 transition-colors"},[n(d(ue),{class:"w-4 h-4"})],8,Ee),e("button",{onClick:z=>Q(s),class:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[n(d(W),{class:"w-4 h-4"})],8,Ie)])])])]))),128))]),_:1})])),(o(),E(L,{to:"body"},[n(I,{name:"modal"},{default:N(()=>[y.value?(o(),a("div",Le,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:C}),e("div",We,[e("div",Ze,[e("h2",Ge,c(b.value?"Edit Article":"New Article"),1),e("button",{onClick:C,class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[n(d(Z),{class:"w-5 h-5"})])]),e("div",Ke,[e("div",Pe,[e("div",qe,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-300"},"Title *",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.title=s),type:"text",placeholder:"Article title",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[f,r.value.title]])]),e("div",Qe,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-300"},"Category",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.category_id=s),class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},[t[18]||(t[18]=e("option",{value:null},"Select category",-1)),(o(!0),a(A,null,$(v.value,s=>(o(),a("option",{key:s.id,value:s.id},c(s.name),9,Ye))),128))],512),[[H,r.value.category_id]])])]),e("div",Je,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-300"},"Slug",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.slug=s),type:"text",placeholder:"article-url-slug",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all font-mono text-sm"},null,512),[[f,r.value.slug]]),t[21]||(t[21]=e("p",{class:"text-xs text-slate-500"},"Leave empty to auto-generate from title",-1))]),e("div",Oe,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-slate-300"},"Excerpt",-1)),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.excerpt=s),rows:"2",placeholder:"Brief description (optional)",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all resize-none"},null,512),[[f,r.value.excerpt]])]),e("div",Re,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-300"},"Content *",-1)),m(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.content=s),rows:"12",placeholder:"Write your article content here... (Markdown supported)",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all resize-none font-mono text-sm"},null,512),[[f,r.value.content]])]),e("div",Xe,[e("label",et,[m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r.value.is_published=s),type:"checkbox",class:"w-5 h-5 rounded border-slate-600 text-amber-500 focus:ring-amber-500 focus:ring-offset-0 bg-slate-700"},null,512),[[ie,r.value.is_published]]),t[24]||(t[24]=e("span",{class:"text-sm text-slate-300"},"Published",-1))])])]),e("div",tt,[e("button",{onClick:C,class:"px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl font-medium transition-colors"}," Cancel "),e("button",{onClick:q,disabled:k.value,class:"px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl font-medium shadow-lg shadow-amber-500/20 transition-all disabled:opacity-50"},c(k.value?"Saving...":b.value?"Save Changes":"Create Article"),9,st)])])])):G("",!0)]),_:1})])),(o(),E(L,{to:"body"},[n(I,{name:"modal"},{default:N(()=>[_.value?(o(),a("div",lt,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:t[9]||(t[9]=s=>_.value=!1)}),e("div",ot,[e("div",at,[t[25]||(t[25]=e("h2",{class:"text-lg font-bold text-white"},"Wiki Categories",-1)),e("button",{onClick:t[10]||(t[10]=s=>_.value=!1),class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[n(d(Z),{class:"w-5 h-5"})])]),e("div",rt,[e("div",nt,[m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>p.value=s),type:"text",placeholder:"New category name",onKeyup:de(B,["enter"]),class:"flex-1 px-4 py-2.5 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[f,p.value]]),e("button",{onClick:B,disabled:!p.value.trim(),class:"px-4 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50"}," Add ",8,it)]),v.value.length===0?(o(),a("div",dt," No categories yet ")):(o(),a("div",ct,[(o(!0),a(A,null,$(v.value,s=>(o(),a("div",{key:s.id,class:"flex items-center justify-between p-3 rounded-xl bg-slate-700/30 hover:bg-slate-700/50 transition-colors"},[e("div",ut,[n(d(be),{class:"w-5 h-5 text-amber-400"}),e("span",mt,c(s.name),1)]),e("button",{onClick:z=>Y(s),class:"p-1.5 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[n(d(W),{class:"w-4 h-4"})],8,bt)]))),128))]))])])])):G("",!0)]),_:1})]))]))}},vt=R(xt,[["__scopeId","data-v-0a967cdc"]]);export{vt as default};
