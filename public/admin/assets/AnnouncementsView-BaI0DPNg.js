import{o,h as i,a as e,_ as J,e as K,x as w,b as n,z as d,G as W,k as r,v as p,m as $,s as O,d as x,a1 as z,w as B,a2 as X,c as F,T as Y,J as ee,g as u,y as te,F as se,i as le,n as y,U as ae,H as oe,a3 as ne,R as re,Z as ie,t as c,l as _,a4 as de,Q as ue,a5 as ce,E as be,D as me,K as I}from"./index-Hqb34MUO.js";import{r as pe}from"./PlusIcon-BbjE6ta3.js";import{r as ve}from"./PencilIcon-Byuw3Kpi.js";function xe(P,M){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})])}const fe={class:"space-y-6"},ge={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},he={class:"relative w-full sm:w-80"},we={class:"flex items-center gap-3"},ye={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},_e={key:1,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},ke={class:"flex flex-col items-center justify-center"},Ce={class:"w-16 h-16 rounded-2xl bg-slate-700/30 flex items-center justify-center mb-4"},Ae={key:2,class:"space-y-4"},Ve={class:"p-6"},Ue={class:"flex items-start gap-4"},$e={class:"flex-1 min-w-0"},Me={class:"flex items-center gap-3 mb-2"},Te={class:"text-lg font-semibold text-white group-hover:text-amber-400 transition-colors truncate"},Ne={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-md bg-amber-500/20 text-amber-400 text-xs font-medium"},De={class:"text-slate-400 text-sm line-clamp-2 mb-3"},je={class:"flex flex-wrap items-center gap-4 text-sm text-slate-500"},Se={class:"inline-flex items-center gap-1.5"},Le={key:0,class:"inline-flex items-center gap-1.5"},Ee={class:"inline-flex items-center gap-1.5 capitalize"},ze={class:"flex items-center gap-2"},Be=["onClick"],Fe=["onClick"],Ie={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Pe={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"},He={class:"flex items-center justify-between p-6 border-b border-slate-700 shrink-0"},Ge={class:"text-lg font-bold text-white"},Qe={class:"p-6 overflow-y-auto flex-1 space-y-5"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},Ze={class:"space-y-2"},qe={class:"space-y-2"},Je={class:"space-y-2"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},We={class:"space-y-2"},Oe={class:"space-y-2"},Xe={key:0,class:"grid grid-cols-2 gap-5"},Ye={class:"space-y-2"},et={class:"space-y-2"},tt={class:"space-y-2"},st={class:"flex items-center gap-6 pt-2"},lt={class:"flex items-center gap-3 cursor-pointer"},at={class:"flex items-center gap-3 cursor-pointer"},ot={class:"flex items-center justify-end gap-3 p-6 border-t border-slate-700 bg-slate-800/50 shrink-0"},nt=["disabled"],rt={__name:"AnnouncementsView",setup(P){const M={template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"/></svg>'},b=te(),k=u([]),C=u(!1),A=u(""),V=u(""),f=u(!1),m=u(null),g=u(!1);let T=null;const N={title:"",message:"",type:"news",target:"all",min_level:null,max_level:null,published_at:null,expires_at:null,is_active:!0,is_sticky:!1,created_by:null},l=u({...N}),H={news:xe,event:ie,maintenance:re,update:ne,alert:oe},U={news:{bar:"bg-blue-500",bg:"bg-blue-500/20",icon:"text-blue-400"},event:{bar:"bg-purple-500",bg:"bg-purple-500/20",icon:"text-purple-400"},maintenance:{bar:"bg-amber-500",bg:"bg-amber-500/20",icon:"text-amber-400"},update:{bar:"bg-emerald-500",bg:"bg-emerald-500/20",icon:"text-emerald-400"},alert:{bar:"bg-red-500",bg:"bg-red-500/20",icon:"text-red-400"}};K(()=>v());const v=async()=>{C.value=!0;try{const a={search:A.value,type:V.value},t=await w.get("/admin/content/announcements",{params:a});k.value=t.data.data||t.data}catch{b.error("Failed to load announcements")}finally{C.value=!1}},G=()=>{clearTimeout(T),T=setTimeout(v,300)},D=()=>{m.value=null,l.value={...N},f.value=!0},Q=a=>{m.value=a,l.value={...a},f.value=!0},h=()=>{f.value=!1,m.value=null},R=async()=>{var a,t;if(!l.value.title||!l.value.message){b.error("Title and message are required");return}g.value=!0;try{m.value?(await w.patch(`/admin/content/announcements/${m.value.id}`,l.value),b.success("Announcement updated")):(await w.post("/admin/content/announcements",l.value),b.success("Announcement published")),h(),v()}catch(s){b.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to save announcement")}finally{g.value=!1}},Z=async a=>{if(confirm(`Delete "${a.title}"?`))try{await w.delete(`/admin/content/announcements/${a.id}`),b.success("Announcement deleted"),v()}catch{b.error("Failed to delete announcement")}},j=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set";return(a,t)=>(o(),i("div",fe,[e("div",ge,[e("div",he,[n(d(W),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>A.value=s),type:"text",placeholder:"Search announcements...",onInput:G,class:"w-full pl-10 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[p,A.value]])]),e("div",we,[r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>V.value=s),onChange:v,class:"px-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all"},[...t[12]||(t[12]=[O('<option value="" data-v-a1b3db38>All Types</option><option value="news" data-v-a1b3db38>üì∞ News</option><option value="event" data-v-a1b3db38>üéâ Event</option><option value="maintenance" data-v-a1b3db38>üîß Maintenance</option><option value="update" data-v-a1b3db38>üöÄ Update</option><option value="alert" data-v-a1b3db38>‚ö†Ô∏è Alert</option>',6)])],544),[[$,V.value]]),e("button",{onClick:D,class:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl font-medium shadow-lg shadow-amber-500/20 transition-all"},[n(d(pe),{class:"w-5 h-5"}),t[13]||(t[13]=x(" New Announcement ",-1))])])]),C.value?(o(),i("div",ye,[...t[14]||(t[14]=[e("div",{class:"flex flex-col items-center justify-center"},[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"}),e("p",{class:"text-slate-400"},"Loading announcements...")],-1)])])):k.value.length===0?(o(),i("div",_e,[e("div",ke,[e("div",Ce,[n(d(z),{class:"w-8 h-8 text-slate-500"})]),t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No announcements",-1)),t[16]||(t[16]=e("p",{class:"text-slate-400 text-center max-w-sm mb-4"},"Create your first announcement to broadcast to players",-1)),e("button",{onClick:D,class:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors"}," Create Announcement ")])])):(o(),i("div",Ae,[n(X,{name:"list"},{default:B(()=>[(o(!0),i(se,null,le(k.value,s=>{var S,L,E;return o(),i("div",{key:s.id,class:"group bg-slate-800/50 hover:bg-slate-800 backdrop-blur-sm rounded-2xl border border-slate-700/50 hover:border-slate-600/50 overflow-hidden transition-all"},[e("div",{class:y(["h-1",((S=U[s.type])==null?void 0:S.bar)||"bg-slate-600"])},null,2),e("div",Ve,[e("div",Ue,[e("div",{class:y(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",((L=U[s.type])==null?void 0:L.bg)||"bg-slate-700"])},[(o(),F(ae(H[s.type]||d(z)),{class:y(["w-6 h-6",((E=U[s.type])==null?void 0:E.icon)||"text-slate-400"])},null,8,["class"]))],2),e("div",$e,[e("div",Me,[e("h3",Te,c(s.title),1),s.is_sticky?(o(),i("span",Ne,[n(M,{class:"w-3 h-3 mr-1"}),t[17]||(t[17]=x(" Pinned ",-1))])):_("",!0),e("span",{class:y(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",s.is_active?"bg-emerald-500/20 text-emerald-400":"bg-slate-600/50 text-slate-400"])},c(s.is_active?"Active":"Inactive"),3)]),e("p",De,c(s.message),1),e("div",je,[e("span",Se,[n(d(de),{class:"w-4 h-4"}),x(" "+c(j(s.published_at||s.created_at)),1)]),s.expires_at?(o(),i("span",Le,[n(d(ue),{class:"w-4 h-4"}),x(" Expires "+c(j(s.expires_at)),1)])):_("",!0),e("span",Ee,[n(d(ce),{class:"w-4 h-4"}),x(" "+c(s.target||"All Users"),1)])])]),e("div",ze,[e("button",{onClick:q=>Q(s),class:"p-2 rounded-lg text-slate-400 hover:text-amber-400 hover:bg-slate-700/50 transition-colors"},[n(d(ve),{class:"w-5 h-5"})],8,Be),e("button",{onClick:q=>Z(s),class:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[n(d(be),{class:"w-5 h-5"})],8,Fe)])])])])}),128))]),_:1})])),(o(),F(ee,{to:"body"},[n(Y,{name:"modal"},{default:B(()=>[f.value?(o(),i("div",Ie,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:h}),e("div",Pe,[e("div",He,[e("h2",Ge,c(m.value?"Edit Announcement":"New Announcement"),1),e("button",{onClick:h,class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[n(d(me),{class:"w-5 h-5"})])]),e("div",Qe,[e("div",Re,[e("div",Ze,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-300"},"Title *",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.title=s),type:"text",placeholder:"Announcement title",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.title]])]),e("div",qe,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-300"},"Type *",-1)),r(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.type=s),class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},[...t[19]||(t[19]=[e("option",{value:"news"},"üì∞ News",-1),e("option",{value:"event"},"üéâ Event",-1),e("option",{value:"maintenance"},"üîß Maintenance",-1),e("option",{value:"update"},"üöÄ Update",-1),e("option",{value:"alert"},"‚ö†Ô∏è Alert",-1)])],512),[[$,l.value.type]])])]),e("div",Je,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-300"},"Message *",-1)),r(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.message=s),rows:"4",placeholder:"Write your announcement...",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all resize-none"},null,512),[[p,l.value.message]])]),e("div",Ke,[e("div",We,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-300"},"Target Audience",-1)),r(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.target=s),class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},[...t[22]||(t[22]=[e("option",{value:"all"},"All Users",-1),e("option",{value:"level_range"},"Level Range",-1),e("option",{value:"location"},"Specific Location",-1)])],512),[[$,l.value.target]])]),e("div",Oe,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-300"},"Published At",-1)),r(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.published_at=s),type:"datetime-local",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.published_at]])])]),l.value.target==="level_range"?(o(),i("div",Xe,[e("div",Ye,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-slate-300"},"Min Level",-1)),r(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.min_level=s),type:"number",min:"1",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.min_level,void 0,{number:!0}]])]),e("div",et,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-300"},"Max Level",-1)),r(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.max_level=s),type:"number",min:"1",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.max_level,void 0,{number:!0}]])])])):_("",!0),e("div",tt,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-slate-300"},"Expires At",-1)),r(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.expires_at=s),type:"datetime-local",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.expires_at]]),t[28]||(t[28]=e("p",{class:"text-xs text-slate-500"},"Leave empty for no expiration",-1))]),e("div",st,[e("label",lt,[r(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.is_active=s),type:"checkbox",class:"w-5 h-5 rounded border-slate-600 text-amber-500 focus:ring-amber-500 focus:ring-offset-0 bg-slate-700"},null,512),[[I,l.value.is_active]]),t[29]||(t[29]=e("span",{class:"text-sm text-slate-300"},"Active",-1))]),e("label",at,[r(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.is_sticky=s),type:"checkbox",class:"w-5 h-5 rounded border-slate-600 text-amber-500 focus:ring-amber-500 focus:ring-offset-0 bg-slate-700"},null,512),[[I,l.value.is_sticky]]),t[30]||(t[30]=e("span",{class:"text-sm text-slate-300"},"Pin to Top",-1))])])]),e("div",ot,[e("button",{onClick:h,class:"px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl font-medium transition-colors"}," Cancel "),e("button",{onClick:R,disabled:g.value,class:"px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl font-medium shadow-lg shadow-amber-500/20 transition-all disabled:opacity-50"},c(g.value?"Saving...":m.value?"Save Changes":"Publish"),9,nt)])])])):_("",!0)]),_:1})]))]))}},ct=J(rt,[["__scopeId","data-v-a1b3db38"]]);export{ct as default};
