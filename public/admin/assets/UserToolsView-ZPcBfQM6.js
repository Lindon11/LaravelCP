import{h as o,a as e,o as a,G as Ve,b as i,z as d,H as De,k as F,v as R,I as Ne,F as v,i as g,l as h,D as le,d as x,J as Ie,t as r,K as Re,L as Me,M as Je,m as Le,s as ze,N as ae,O as oe,c as Z,P as Be,g as c,q as re,x as p,B as He,n as f,Q as ne,E as qe,C as Ee,R as Ge,S as Ke,U as Qe,V as ie}from"./index-DFRpP__E.js";import{r as de}from"./ArrowPathIcon-BixpKkEE.js";import{r as ce}from"./CubeIcon-C88N0WP7.js";import{r as M}from"./ClockIcon-Dtbnxaj-.js";import{r as We}from"./PlusIcon-DErWpAB6.js";import{r as ue}from"./CheckCircleIcon-DDN9pvDq.js";import{r as Ze}from"./XCircleIcon-DkkvCrxw.js";function pe(O,y){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}function Oe(O,y){return a(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}const Pe={class:"space-y-6"},Xe={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},Ye={class:"relative flex-1 w-full lg:max-w-lg"},et={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-slate-800 border border-slate-700/50 rounded-xl shadow-2xl z-50 overflow-hidden"},tt=["onClick"],st={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white font-bold"},lt={class:"flex-1 min-w-0"},at={class:"text-white font-medium truncate"},ot={class:"text-xs text-slate-400"},rt={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},nt={class:"flex flex-col items-center justify-center"},it={class:"w-16 h-16 rounded-2xl bg-slate-700/30 flex items-center justify-center mb-4"},dt={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},ct={class:"flex items-start gap-6"},ut={class:"w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg"},pt={class:"flex-1"},mt={class:"flex items-center gap-3 mb-1"},vt={class:"text-xl font-bold text-white"},xt={class:"text-xs font-mono text-slate-500"},bt={class:"flex flex-wrap items-center gap-3 text-sm text-slate-400"},gt={class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-slate-700/50"},ht={key:0,class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-slate-700/50"},yt={key:1,class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-slate-700/50"},ft={class:"flex items-center gap-2"},_t={class:"flex items-center gap-1 p-1 bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl overflow-x-auto"},wt=["onClick"],kt={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 overflow-hidden"},Ct={key:0,class:"p-12"},$t={key:1,class:"divide-y divide-slate-700/50"},Tt={class:"p-4 flex items-center justify-between"},jt={class:"text-sm text-slate-400"},Ft={key:0,class:"overflow-x-auto"},At={class:"w-full"},St={class:"divide-y divide-slate-700/30"},Ut={class:"p-4 text-white font-medium"},Vt={class:"p-4"},Dt={class:"inline-flex px-2.5 py-1 rounded-lg text-xs font-medium bg-slate-700/50 text-slate-300"},Nt={class:"p-4"},It={class:"text-xs text-slate-500 bg-slate-900/50 px-2 py-1 rounded"},Rt={class:"p-4 text-slate-300"},Mt={class:"p-4 text-emerald-400"},Jt={class:"p-4"},Lt={key:0,class:"inline-flex items-center gap-1 text-emerald-400"},zt={key:1,class:"text-slate-600"},Bt={key:1,class:"p-12 text-center"},Ht={key:2,class:"divide-y divide-slate-700/50"},qt={key:0,class:"overflow-x-auto"},Et={class:"w-full"},Gt={class:"divide-y divide-slate-700/30"},Kt={class:"p-4 text-white font-medium"},Qt={class:"p-4"},Wt={class:"text-xs text-slate-500 bg-slate-900/50 px-2 py-1 rounded"},Zt={class:"p-4"},Ot={class:"p-4 text-white font-medium"},Pt={key:1,class:"p-12 text-center"},Xt={key:3,class:"divide-y divide-slate-700/50"},Yt={class:"p-4 flex items-center justify-between"},es={key:0,class:"overflow-x-auto"},ts={class:"w-full"},ss={class:"divide-y divide-slate-700/30"},ls={class:"p-4 text-white font-medium"},as={class:"p-4"},os={class:"text-xs text-slate-500 bg-slate-900/50 px-2 py-1 rounded"},rs={class:"p-4"},ns={class:"p-4"},is={key:0,class:"inline-flex items-center gap-1.5 text-emerald-400"},ds={key:1,class:"inline-flex items-center gap-1.5 text-red-400"},cs={key:2,class:"text-slate-500"},us={class:"p-4 text-slate-400 text-sm"},ps={key:1,class:"p-12 text-center"},ms={key:4,class:"divide-y divide-slate-700/50"},vs={class:"p-4 flex items-center justify-between"},xs={key:0,class:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},bs={class:"p-4"},gs={class:"flex items-center justify-between mb-2"},hs={class:"text-sm font-medium text-white"},ys=["onClick"],fs={class:"text-2xl font-bold text-white mb-1"},_s={class:"text-xs text-slate-400"},ws={class:"h-1 bg-slate-700/50"},ks={key:1,class:"p-12 text-center"},Cs={key:5,class:"divide-y divide-slate-700/50"},$s={class:"p-4 flex items-center justify-between"},Ts={key:0,class:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},js={class:"flex items-start justify-between gap-2"},Fs={class:"flex-1 min-w-0"},As={class:"font-medium text-white truncate"},Ss={key:0,class:"text-sm text-slate-300 mt-1"},Us={key:1,class:"text-xs text-slate-400 mt-1"},Vs=["onClick"],Ds={key:1,class:"p-12 text-center"},Ns={key:6,class:"divide-y divide-slate-700/50"},Is={key:0,class:"divide-y divide-slate-700/30"},Rs={class:"flex-1 min-w-0"},Ms={class:"text-white"},Js={class:"text-sm text-slate-400 mt-1"},Ls={key:1,class:"p-12 text-center"},zs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Bs={class:"relative bg-slate-800 rounded-2xl border border-slate-700/50 shadow-2xl w-full max-w-md"},Hs={class:"p-6 space-y-4"},qs={class:"grid grid-cols-4 gap-2"},Es=["onClick"],Gs={class:"p-6 border-t border-slate-700/50 flex justify-end gap-3"},el={__name:"UserToolsView",setup(O){const y=c(""),$=c([]),n=c(null),u=c("items"),me=[{key:"items",label:"Items",icon:ce},{key:"jobs",label:"Jobs",icon:pe},{key:"history",label:"Job History",icon:M},{key:"timers",label:"Timers",icon:M},{key:"flags",label:"Flags",icon:ae},{key:"activity",label:"Activity",icon:oe}],ve=[{value:"info",label:"Info",activeClass:"bg-blue-500/20 text-blue-400 ring-2 ring-blue-500/50"},{value:"success",label:"Good",activeClass:"bg-emerald-500/20 text-emerald-400 ring-2 ring-emerald-500/50"},{value:"warning",label:"Warn",activeClass:"bg-amber-500/20 text-amber-400 ring-2 ring-amber-500/50"},{value:"danger",label:"Danger",activeClass:"bg-red-500/20 text-red-400 ring-2 ring-red-500/50"}],w=c({}),A=c([]),S=c([]),U=c({timers:[],user_timers:[]}),V=c([]),D=c([]),J=c("all"),L=c(!1),z=c(!1),B=c(!1),H=c(!1),q=c(!1),E=c(!1),T=c(!1),m=c({type:"",label:"",reason:"",severity:"info"}),xe=re(()=>{switch(u.value){case"items":return L.value;case"jobs":return z.value;case"history":return B.value;case"timers":return H.value;case"flags":return q.value;case"activity":return E.value;default:return!1}}),P=re(()=>{const l=[...U.value.user_timers||[]];for(const t of U.value.timers||[])l.push({type:t.type,expires_at:t.expires_at});return l});let X=null;const be=()=>{clearTimeout(X),X=setTimeout(()=>{y.value.length>=2?Y():$.value=[]},300)},Y=async()=>{if(y.value.trim())try{const l=await p.get("/admin/user-tools/search",{params:{q:y.value}});$.value=l.data.users||[]}catch(l){console.error("Search failed:",l)}},ge=async l=>{$.value=[],y.value="";try{const t=await p.get(`/admin/user-tools/${l.id}`);n.value=t.data.user,G()}catch(t){console.error("Failed to load user:",t)}},he=()=>{n.value=null,w.value={},A.value=[],S.value=[],U.value={timers:[],user_timers:[]},V.value=[],D.value=[]},ye=()=>{G()},G=()=>{if(n.value)switch(u.value){case"items":fe();break;case"jobs":_e();break;case"history":ee();break;case"timers":K();break;case"flags":Q();break;case"activity":$e();break}},fe=async()=>{L.value=!0;try{const l=await p.get(`/admin/user-tools/${n.value.id}/inventory`);w.value=l.data}catch(l){console.error("Failed to load inventory:",l)}finally{L.value=!1}},_e=async()=>{z.value=!0;try{const l=await p.get(`/admin/user-tools/${n.value.id}/jobs`);A.value=l.data.jobs||[]}catch(l){console.error("Failed to load jobs:",l)}finally{z.value=!1}},ee=async()=>{B.value=!0;try{const l=await p.get(`/admin/user-tools/${n.value.id}/job-history`,{params:{type:J.value}});S.value=l.data.history||[]}catch(l){console.error("Failed to load job history:",l)}finally{B.value=!1}},K=async()=>{H.value=!0;try{const l=await p.get(`/admin/user-tools/${n.value.id}/timers`);U.value=l.data}catch(l){console.error("Failed to load timers:",l)}finally{H.value=!1}},we=async l=>{if(confirm(`Clear ${te(l)} timer?`))try{await p.delete(`/admin/user-tools/${n.value.id}/timers/${l}`),K()}catch(t){console.error("Failed to clear timer:",t)}},Q=async()=>{q.value=!0;try{const l=await p.get(`/admin/user-tools/${n.value.id}/flags`);V.value=l.data.flags||[]}catch(l){console.error("Failed to load flags:",l)}finally{q.value=!1}},ke=async()=>{try{await p.post(`/admin/user-tools/${n.value.id}/flags`,m.value),T.value=!1,m.value={type:"",label:"",reason:"",severity:"info"},Q()}catch(l){console.error("Failed to add flag:",l)}},Ce=async l=>{if(confirm("Remove this flag?"))try{await p.delete(`/admin/user-tools/${n.value.id}/flags/${l}`),Q()}catch(t){console.error("Failed to remove flag:",t)}},$e=async()=>{E.value=!0;try{const l=await p.get(`/admin/user-tools/${n.value.id}/activity`);D.value=l.data.activity||[]}catch(l){console.error("Failed to load activity:",l)}finally{E.value=!1}},N=l=>l?new Date(l).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—",Te=l=>{const t=new Date,b=new Date(l)-t;if(b<=0)return"Expired";const _=Math.floor(b/(1e3*60*60)),k=Math.floor(b%(1e3*60*60)/(1e3*60)),j=Math.floor(b%(1e3*60)/1e3);return _>0?`${_}h ${k}m`:k>0?`${k}m ${j}s`:`${j}s`},te=l=>l.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),je=l=>{const t=new Date,b=new Date(l.expires_at)-t,_=60*60*1e3;return Math.max(0,Math.min(100,b/_*100))},W=l=>`inline-flex px-2.5 py-1 rounded-lg text-xs font-medium ${{crime:"bg-purple-500/20 text-purple-400",crime_attempt:"bg-purple-500/20 text-purple-400",theft:"bg-amber-500/20 text-amber-400",theft_attempt:"bg-amber-500/20 text-amber-400",gym:"bg-emerald-500/20 text-emerald-400",gym_train:"bg-emerald-500/20 text-emerald-400",travel:"bg-blue-500/20 text-blue-400",jail:"bg-red-500/20 text-red-400",hospital:"bg-pink-500/20 text-pink-400",login:"bg-emerald-500/20 text-emerald-400",logout:"bg-slate-500/20 text-slate-400",combat:"bg-red-500/20 text-red-400",mission:"bg-purple-500/20 text-purple-400",organized_crime:"bg-amber-500/20 text-amber-400"}[l]||"bg-slate-700/50 text-slate-300"}`,Fe=l=>({crime:"border-purple-500/30 text-purple-400",theft:"border-amber-500/30 text-amber-400",gym:"border-emerald-500/30 text-emerald-400",travel:"border-blue-500/30 text-blue-400",jail:"border-red-500/30 text-red-400",hospital:"border-pink-500/30 text-pink-400"})[l]||"border-slate-600/50 text-slate-400",Ae=l=>({info:"bg-blue-500/10 border border-blue-500/30",success:"bg-emerald-500/10 border border-emerald-500/30",warning:"bg-amber-500/10 border border-amber-500/30",danger:"bg-red-500/10 border border-red-500/30"})[l]||"bg-slate-700/50 border border-slate-600/50",Se=l=>({login:ie,logout:ie,combat:Qe,crime:Ke,theft:Ge})[l]||Oe,Ue=l=>({login:"bg-emerald-500/20 text-emerald-400",logout:"bg-slate-500/20 text-slate-400",combat:"bg-red-500/20 text-red-400",crime:"bg-purple-500/20 text-purple-400",theft:"bg-amber-500/20 text-amber-400"})[l]||"bg-slate-700/50 text-slate-400";return Ve(u,G),(l,t)=>{var I,b,_,k,j,se;return a(),o("div",Pe,[e("div",Xe,[e("div",Ye,[i(d(De),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),type:"text",placeholder:"Search by username, email, or ID...",onInput:be,onKeyup:Ne(Y,["enter"]),class:"w-full pl-12 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[R,y.value]]),$.value.length>0?(a(),o("div",et,[(a(!0),o(v,null,g($.value,s=>{var C;return a(),o("div",{key:s.id,class:"flex items-center gap-3 p-3 hover:bg-slate-700/50 cursor-pointer transition-colors border-b border-slate-700/50 last:border-0",onClick:Ks=>ge(s)},[e("div",st,r(((C=s.username)==null?void 0:C.charAt(0).toUpperCase())||"?"),1),e("div",lt,[e("p",at,r(s.username),1),e("p",ot,"ID: "+r(s.id)+" · Level "+r(s.level||1),1)]),i(d(He),{class:"w-5 h-5 text-slate-500"})],8,tt)}),128))])):h("",!0)]),n.value?(a(),o("button",{key:0,onClick:he,class:"inline-flex items-center gap-2 px-4 py-3 text-slate-400 hover:text-white transition-colors"},[i(d(le),{class:"w-4 h-4"}),t[8]||(t[8]=x(" Clear Selection ",-1))])):h("",!0)]),n.value?(a(),o(v,{key:1},[e("div",dt,[e("div",ct,[e("div",ut,r(n.value.username.charAt(0).toUpperCase()),1),e("div",pt,[e("div",mt,[e("h2",vt,r(n.value.username),1),e("span",xt,"#"+r(n.value.id),1)]),e("div",bt,[e("span",gt,[i(d(Re),{class:"w-4 h-4 text-amber-400"}),x(" Level "+r(n.value.level),1)]),(I=n.value.currentRank)!=null&&I.name||(b=n.value.current_rank)!=null&&b.name?(a(),o("span",ht,[i(d(Me),{class:"w-4 h-4 text-purple-400"}),x(" "+r(((_=n.value.currentRank)==null?void 0:_.name)||((k=n.value.current_rank)==null?void 0:k.name)),1)])):h("",!0),(j=n.value.location)!=null&&j.name?(a(),o("span",yt,[i(d(Je),{class:"w-4 h-4 text-blue-400"}),x(" "+r(n.value.location.name),1)])):h("",!0)])]),e("div",ft,[e("button",{onClick:ye,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"},[i(d(de),{class:"w-4 h-4"}),t[11]||(t[11]=x(" Refresh ",-1))])])])]),e("div",_t,[(a(),o(v,null,g(me,s=>e("button",{key:s.key,onClick:C=>u.value=s.key,class:f(["flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium text-sm whitespace-nowrap transition-all",u.value===s.key?"bg-amber-500 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-700/50"])},[(a(),Z(ne(s.icon),{class:"w-4 h-4"})),x(" "+r(s.label),1)],10,wt)),64))]),e("div",kt,[xe.value?(a(),o("div",Ct,[...t[12]||(t[12]=[e("div",{class:"flex flex-col items-center justify-center"},[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"}),e("p",{class:"text-slate-400"},"Loading data...")],-1)])])):u.value==="items"?(a(),o("div",$t,[e("div",Tt,[e("div",null,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-white"},"Inventory Items",-1)),e("p",jt,r(w.value.total_items||0)+" items · $"+r((w.value.total_value||0).toLocaleString())+" value",1)])]),(se=w.value.inventory)!=null&&se.length?(a(),o("div",Ft,[e("table",At,[t[14]||(t[14]=e("thead",null,[e("tr",{class:"text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},[e("th",{class:"p-4"},"Item"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Codename"),e("th",{class:"p-4"},"Qty"),e("th",{class:"p-4"},"Value"),e("th",{class:"p-4"},"Equipped")])],-1)),e("tbody",St,[(a(!0),o(v,null,g(w.value.inventory,s=>(a(),o("tr",{key:s.id,class:"hover:bg-slate-700/20 transition-colors"},[e("td",Ut,r(s.item_name),1),e("td",Vt,[e("span",Dt,r(s.item_type),1)]),e("td",Nt,[e("code",It,r(s.item_codename||"-"),1)]),e("td",Rt,r(s.quantity),1),e("td",Mt,"$"+r((s.item_value*s.quantity).toLocaleString()),1),e("td",Jt,[s.equipped?(a(),o("span",Lt,[i(d(ue),{class:"w-4 h-4"})])):(a(),o("span",zt,"—"))])]))),128))])])])):(a(),o("div",Bt,[i(d(ce),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[15]||(t[15]=e("p",{class:"text-slate-400"},"No items in inventory",-1))]))])):u.value==="jobs"?(a(),o("div",Ht,[t[18]||(t[18]=e("div",{class:"p-4"},[e("h3",{class:"text-lg font-semibold text-white"},"Job Statistics"),e("p",{class:"text-sm text-slate-400"},"Completed jobs and activities")],-1)),A.value.length?(a(),o("div",qt,[e("table",Et,[t[16]||(t[16]=e("thead",null,[e("tr",{class:"text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},[e("th",{class:"p-4"},"Job Name"),e("th",{class:"p-4"},"Codename"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Completed")])],-1)),e("tbody",Gt,[(a(!0),o(v,null,g(A.value,s=>(a(),o("tr",{key:s.codename,class:"hover:bg-slate-700/20 transition-colors"},[e("td",Kt,r(s.name),1),e("td",Qt,[e("code",Wt,r(s.codename||"-"),1)]),e("td",Zt,[e("span",{class:f(W(s.type))},r(s.type),3)]),e("td",Ot,r(s.total_completed),1)]))),128))])])])):(a(),o("div",Pt,[i(d(pe),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[17]||(t[17]=e("p",{class:"text-slate-400"},"No job statistics found",-1))]))])):u.value==="history"?(a(),o("div",Xt,[e("div",Yt,[t[20]||(t[20]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"Job History"),e("p",{class:"text-sm text-slate-400"},"Recent job runs and results")],-1)),F(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>J.value=s),onChange:ee,class:"px-4 py-2 bg-slate-700/50 border border-slate-600/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50"},[...t[19]||(t[19]=[ze('<option value="all">All Types</option><option value="crime_attempt">Crimes</option><option value="theft_attempt">Theft</option><option value="gym_train">Gym</option><option value="organized_crime">Organized Crime</option>',5)])],544),[[Le,J.value]])]),S.value.length?(a(),o("div",es,[e("table",ts,[t[23]||(t[23]=e("thead",null,[e("tr",{class:"text-left text-xs font-medium text-slate-400 uppercase tracking-wider"},[e("th",{class:"p-4"},"Job"),e("th",{class:"p-4"},"Codename"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Result"),e("th",{class:"p-4"},"Time")])],-1)),e("tbody",ss,[(a(!0),o(v,null,g(S.value,s=>(a(),o("tr",{key:s.id,class:"hover:bg-slate-700/20 transition-colors"},[e("td",ls,r(s.name),1),e("td",as,[e("code",os,r(s.codename||"-"),1)]),e("td",rs,[e("span",{class:f(W(s.type))},r(s.type),3)]),e("td",ns,[s.success===!0?(a(),o("span",is,[i(d(ue),{class:"w-4 h-4"}),t[21]||(t[21]=x(" Success ",-1))])):s.success===!1?(a(),o("span",ds,[i(d(Ze),{class:"w-4 h-4"}),t[22]||(t[22]=x(" Failed ",-1))])):(a(),o("span",cs,"—"))]),e("td",us,r(N(s.time)),1)]))),128))])])])):(a(),o("div",ps,[i(d(M),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[24]||(t[24]=e("p",{class:"text-slate-400"},"No job history found",-1))]))])):u.value==="timers"?(a(),o("div",ms,[e("div",vs,[t[26]||(t[26]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"Active Timers & Cooldowns"),e("p",{class:"text-sm text-slate-400"},"Current cooldown periods")],-1)),e("button",{onClick:K,class:"inline-flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"},[i(d(de),{class:"w-4 h-4"}),t[25]||(t[25]=x(" Refresh ",-1))])]),P.value.length?(a(),o("div",xs,[(a(!0),o(v,null,g(P.value,s=>(a(),o("div",{key:s.type,class:f(["relative rounded-xl border overflow-hidden",Fe(s.type)])},[e("div",bs,[e("div",gs,[e("span",hs,r(te(s.type)),1),e("button",{onClick:C=>we(s.type),class:"p-1.5 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",title:"Clear timer"},[i(d(qe),{class:"w-4 h-4"})],8,ys)]),e("p",fs,r(Te(s.expires_at)),1),e("p",_s,"Expires: "+r(N(s.expires_at)),1)]),e("div",ws,[e("div",{class:"h-full bg-current opacity-50",style:Ee({width:je(s)+"%"})},null,4)])],2))),128))])):(a(),o("div",ks,[i(d(M),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[27]||(t[27]=e("p",{class:"text-slate-400"},"No active timers",-1))]))])):u.value==="flags"?(a(),o("div",Cs,[e("div",$s,[t[29]||(t[29]=e("div",null,[e("h3",{class:"text-lg font-semibold text-white"},"User Flags & Tags"),e("p",{class:"text-sm text-slate-400"},"Status indicators and warnings")],-1)),e("button",{onClick:t[2]||(t[2]=s=>T.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-xl transition-colors"},[i(d(We),{class:"w-4 h-4"}),t[28]||(t[28]=x(" Add Flag ",-1))])]),V.value.length?(a(),o("div",Ts,[(a(!0),o(v,null,g(V.value,s=>(a(),o("div",{key:s.type,class:f(["rounded-xl p-4",Ae(s.severity)])},[e("div",js,[e("div",Fs,[e("h4",As,r(s.label),1),s.value&&s.value!==!0?(a(),o("p",Ss,r(typeof s.value=="string"&&s.value.includes("T")?N(s.value):s.value),1)):h("",!0),s.reason?(a(),o("p",Us,r(s.reason),1)):h("",!0)]),s.type!=="role"?(a(),o("button",{key:0,onClick:C=>Ce(s.type),class:"p-1.5 rounded-lg hover:bg-white/10 text-slate-400 hover:text-red-400 transition-colors"},[i(d(le),{class:"w-4 h-4"})],8,Vs)):h("",!0)])],2))),128))])):(a(),o("div",Ds,[i(d(ae),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[30]||(t[30]=e("p",{class:"text-slate-400"},"No flags assigned",-1))]))])):u.value==="activity"?(a(),o("div",Ns,[t[32]||(t[32]=e("div",{class:"p-4"},[e("h3",{class:"text-lg font-semibold text-white"},"Recent Activity"),e("p",{class:"text-sm text-slate-400"},"User actions and events")],-1)),D.value.length?(a(),o("div",Is,[(a(!0),o(v,null,g(D.value,s=>(a(),o("div",{key:s.id,class:"flex items-start gap-4 p-4 hover:bg-slate-700/20 transition-colors"},[e("div",{class:f([Ue(s.type),"p-2 rounded-xl"])},[(a(),Z(ne(Se(s.type)),{class:"w-5 h-5"}))],2),e("div",Rs,[e("p",Ms,r(s.description),1),e("p",Js,r(N(s.created_at)),1)]),e("span",{class:f(W(s.type))},r(s.type),3)]))),128))])):(a(),o("div",Ls,[i(d(oe),{class:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t[31]||(t[31]=e("p",{class:"text-slate-400"},"No activity found",-1))]))])):h("",!0)])],64)):(a(),o("div",rt,[e("div",nt,[e("div",it,[i(d(Ie),{class:"w-8 h-8 text-slate-500"})]),t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No User Selected",-1)),t[10]||(t[10]=e("p",{class:"text-slate-400 text-center max-w-sm"},"Search for a user above to view their details, inventory, timers, and activity",-1))])])),(a(),Z(Be,{to:"body"},[T.value?(a(),o("div",zs,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=s=>T.value=!1)}),e("div",Bs,[t[37]||(t[37]=e("div",{class:"p-6 border-b border-slate-700/50"},[e("h3",{class:"text-lg font-semibold text-white"},"Add Flag"),e("p",{class:"text-sm text-slate-400"},"Add a new flag or tag to this user")],-1)),e("div",Hs,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Flag Type",-1)),F(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>m.value.type=s),type:"text",placeholder:"e.g., suspicious, vip, warning",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,512),[[R,m.value.type]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Display Label",-1)),F(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>m.value.label=s),type:"text",placeholder:"What to show on the flag",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50"},null,512),[[R,m.value.label]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Reason (optional)",-1)),F(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>m.value.reason=s),placeholder:"Why is this flag being added?",rows:"3",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50 resize-none"},null,512),[[R,m.value.reason]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Severity",-1)),e("div",qs,[(a(),o(v,null,g(ve,s=>e("button",{key:s.value,onClick:C=>m.value.severity=s.value,class:f(["px-3 py-2 rounded-xl text-sm font-medium transition-all",m.value.severity===s.value?s.activeClass:"bg-slate-700/50 text-slate-400 hover:bg-slate-700"])},r(s.label),11,Es)),64))])])]),e("div",Gs,[e("button",{onClick:t[7]||(t[7]=s=>T.value=!1),class:"px-4 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl transition-colors"}," Cancel "),e("button",{onClick:ke,class:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-xl transition-colors"}," Add Flag ")])])])):h("",!0)]))])}}};export{el as default};
