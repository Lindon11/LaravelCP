import{h as r,a as e,o as l,e as O,x as P,b as d,z as n,a0 as A,d as c,k as U,m as G,n as u,t as o,c as v,W as q,ar as J,am as L,F as m,i as _,an as K,V as D,s as I,g,L as Q,$ as X,C,R as Y,q as Z}from"./index-tQpoew_R.js";import{r as T}from"./ArrowPathIcon-BFMb7TSO.js";import{r as S}from"./ClockIcon-BeQvIW9b.js";import{r as ee}from"./ChartPieIcon-BaJPBdAe.js";function B(f,p){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"})])}function V(f,p){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})])}function te(f,p){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}const se={class:"space-y-6"},ae={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold text-white flex items-center gap-3"},le={class:"p-3 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600"},ne={class:"flex items-center gap-3"},re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ie={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-5"},de={class:"flex items-center justify-between"},ce={class:"text-3xl font-bold text-white mt-1"},ue={class:"p-3 rounded-xl bg-cyan-500/20"},ge={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-5"},xe={class:"flex items-center justify-between"},pe={class:"text-3xl font-bold text-white mt-1"},be={class:"text-sm mt-1 text-slate-400"},me={class:"p-3 rounded-xl bg-emerald-500/20"},_e={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-5"},ve={class:"flex items-center justify-between"},he={class:"text-3xl font-bold text-white mt-1"},fe={class:"p-3 rounded-xl bg-violet-500/20"},ye={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-5"},we={class:"flex items-center justify-between"},ke={class:"text-3xl font-bold text-white mt-1"},Ce={class:"p-3 rounded-xl bg-amber-500/20"},$e={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},je={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},Me={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Ae={class:"h-64 flex items-end justify-between gap-2"},Le=["title"],De={class:"text-xs text-slate-400"},Te={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},Se={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Be={class:"space-y-4"},Ve={class:"flex items-center justify-between p-3 bg-slate-900/50 rounded-xl"},Ne={class:"text-xl font-bold text-emerald-400"},Fe={class:"flex items-center justify-between p-3 bg-slate-900/50 rounded-xl"},Re={class:"text-xl font-bold text-blue-400"},We={class:"flex items-center justify-between p-3 bg-slate-900/50 rounded-xl"},Ee={class:"text-xl font-bold text-amber-400"},He={class:"flex items-center justify-between p-3 bg-slate-900/50 rounded-xl"},ze={class:"text-xl font-bold text-red-400"},Oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Pe={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},Ue={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Ge={class:"space-y-3"},qe={class:"flex items-center gap-3"},Je={class:"w-8 h-8 rounded-lg bg-slate-700 flex items-center justify-center text-sm"},Ke={class:"text-slate-300"},Ie={class:"flex items-center gap-2"},Qe={class:"w-24 h-2 bg-slate-700 rounded-full overflow-hidden"},Xe={class:"text-sm text-slate-400 w-12 text-right"},Ye={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},Ze={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},et={class:"space-y-3"},tt={class:"text-slate-300"},st={class:"flex items-center gap-2"},at={class:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden"},ot={class:"text-sm text-slate-400 w-12 text-right"},lt={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},nt={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},rt={class:"space-y-3"},it={class:"flex-1 min-w-0"},dt={class:"text-sm text-white truncate"},ct={class:"text-xs text-slate-400"},ut={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},gt={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},xt={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},pt={class:"overflow-x-auto"},bt={class:"w-full text-sm"},mt={class:"py-2 text-slate-300"},_t={class:"py-2 text-center"},vt={class:"py-2 text-center"},ht={class:"py-2 text-center"},ft={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-6"},yt={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},wt={class:"grid grid-cols-12 gap-1"},kt=["title"],Ct={class:"text-xs text-slate-400 mt-1"},Lt={__name:"AnalyticsView",setup(f){const p=g(!1),y=g("30"),i=g({total_users:0,users_change:0,active_today:0,active_percentage:0,new_registrations:0,registrations_change:0,avg_session_time:0}),b=g({total_cash:0,total_bank:0,generated_today:0,spent_today:0}),h=g([]),N=Z(()=>Math.max(...h.value.map(a=>a.value),1)),F=g([{name:"Crimes",icon:"ðŸ”«",count:15420,percentage:100},{name:"Combat",icon:"âš”ï¸",count:12350,percentage:80},{name:"Travel",icon:"âœˆï¸",count:9840,percentage:64},{name:"Jobs",icon:"ðŸ’¼",count:7620,percentage:49},{name:"Casino",icon:"ðŸŽ°",count:5430,percentage:35}]),R=g([{range:"Level 1-10",percentage:45,color:"bg-emerald-500"},{range:"Level 11-25",percentage:30,color:"bg-blue-500"},{range:"Level 26-50",percentage:15,color:"bg-violet-500"},{range:"Level 51-75",percentage:7,color:"bg-amber-500"},{range:"Level 76+",percentage:3,color:"bg-red-500"}]),W=g([{id:1,message:"New user registered: Player123",time:"2 min ago",icon:L,bgColor:"bg-emerald-500/20",iconColor:"text-emerald-400"},{id:2,message:"Gang war started: Mafia vs Cartel",time:"15 min ago",icon:D,bgColor:"bg-red-500/20",iconColor:"text-red-400"},{id:3,message:"Achievement unlocked by 5 players",time:"32 min ago",icon:Q,bgColor:"bg-amber-500/20",iconColor:"text-amber-400"},{id:4,message:"Large transaction: $1,000,000",time:"1 hour ago",icon:X,bgColor:"bg-emerald-500/20",iconColor:"text-emerald-400"}]),E=g([{week:"This Week",day1:85,day7:45,day30:22},{week:"Last Week",day1:82,day7:42,day30:20},{week:"2 Weeks Ago",day1:78,day7:40,day30:18},{week:"3 Weeks Ago",day1:80,day7:38,day30:17}]),w=g([]);O(async()=>{await $()});async function $(){p.value=!0;try{const a=await P.get("/admin/stats",{params:{days:y.value}});a.data&&(Object.assign(i.value,a.data.stats||{}),Object.assign(b.value,a.data.economy||{}),a.data.activity_chart?h.value=a.data.activity_chart:j(),a.data.hourly_activity?w.value=a.data.hourly_activity:M())}catch(a){console.error("Failed to load analytics:",a),j(),M()}finally{p.value=!1}}function j(){const a=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];h.value=a.map(t=>({label:t,value:Math.floor(Math.random()*500)+100})),i.value={total_users:1250,users_change:12.5,active_today:342,active_percentage:27,new_registrations:45,registrations_change:8.3,avg_session_time:24},b.value={total_cash:125e6,total_bank:45e7,generated_today:25e5,spent_today:18e5}}function M(){w.value=Array.from({length:24},(a,t)=>({hour:t,value:Math.floor(Math.random()*100)}))}function x(a){return a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":(a==null?void 0:a.toLocaleString())||"0"}function k(a){return a>=60?"text-emerald-400":a>=40?"text-amber-400":a>=20?"text-orange-400":"text-red-400"}function H(a){return a>=80?"bg-cyan-300":a>=60?"bg-cyan-500":a>=40?"bg-cyan-700":a>=20?"bg-slate-600":"bg-slate-700"}return(a,t)=>(l(),r("div",se,[e("div",ae,[e("div",null,[e("h1",oe,[e("div",le,[d(n(A),{class:"w-6 h-6 text-white"})]),t[1]||(t[1]=c(" Analytics Dashboard ",-1))]),t[2]||(t[2]=e("p",{class:"text-sm text-slate-400 mt-1"},"Monitor player activity, engagement metrics, and game economy",-1))]),e("div",ne,[U(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),class:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-cyan-500/50"},[...t[3]||(t[3]=[e("option",{value:"7"},"Last 7 days",-1),e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"90"},"Last 90 days",-1),e("option",{value:"365"},"Last year",-1)])],512),[[G,y.value]]),e("button",{onClick:$,class:"p-2 bg-slate-800 border border-slate-700 rounded-xl text-white hover:bg-slate-700 transition-colors"},[d(n(T),{class:u(["w-5 h-5",p.value&&"animate-spin"])},null,8,["class"])])])]),e("div",re,[e("div",ie,[e("div",de,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-slate-400"},"Total Users",-1)),e("p",ce,o(x(i.value.total_users)),1),e("p",{class:u(["text-sm mt-1 flex items-center gap-1",i.value.users_change>=0?"text-emerald-400":"text-red-400"])},[i.value.users_change>=0?(l(),v(n(V),{key:0,class:"w-4 h-4"})):(l(),v(n(B),{key:1,class:"w-4 h-4"})),c(" "+o(Math.abs(i.value.users_change))+"% from last period ",1)],2)]),e("div",ue,[d(n(q),{class:"w-6 h-6 text-cyan-400"})])])]),e("div",ge,[e("div",xe,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-slate-400"},"Active Today",-1)),e("p",pe,o(x(i.value.active_today)),1),e("p",be,o(i.value.active_percentage)+"% of total users ",1)]),e("div",me,[d(n(J),{class:"w-6 h-6 text-emerald-400"})])])]),e("div",_e,[e("div",ve,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-slate-400"},"New Registrations",-1)),e("p",he,o(x(i.value.new_registrations)),1),e("p",{class:u(["text-sm mt-1 flex items-center gap-1",i.value.registrations_change>=0?"text-emerald-400":"text-red-400"])},[i.value.registrations_change>=0?(l(),v(n(V),{key:0,class:"w-4 h-4"})):(l(),v(n(B),{key:1,class:"w-4 h-4"})),c(" "+o(Math.abs(i.value.registrations_change))+"% from last period ",1)],2)]),e("div",fe,[d(n(L),{class:"w-6 h-6 text-violet-400"})])])]),e("div",ye,[e("div",we,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm text-slate-400"},"Avg. Session Time",-1)),e("p",ke,o(i.value.avg_session_time),1),t[8]||(t[8]=e("p",{class:"text-sm mt-1 text-slate-400"}," minutes per session ",-1))]),e("div",Ce,[d(n(S),{class:"w-6 h-6 text-amber-400"})])])])]),e("div",$e,[e("div",je,[e("h3",Me,[d(n(A),{class:"w-5 h-5 text-cyan-400"}),t[9]||(t[9]=c(" User Activity ",-1))]),e("div",Ae,[(l(!0),r(m,null,_(h.value,(s,z)=>(l(),r("div",{key:z,class:"flex-1 flex flex-col items-center gap-2"},[e("div",{class:"w-full bg-gradient-to-t from-cyan-500 to-blue-500 rounded-t-lg transition-all hover:from-cyan-400 hover:to-blue-400",style:C({height:`${s.value/N.value*100}%`}),title:`${s.label}: ${s.value} users`},null,12,Le),e("span",De,o(s.label),1)]))),128))])]),e("div",Te,[e("h3",Se,[d(n(K),{class:"w-5 h-5 text-emerald-400"}),t[10]||(t[10]=c(" Economy Overview ",-1))]),e("div",Be,[e("div",Ve,[t[11]||(t[11]=e("span",{class:"text-slate-300"},"Total Cash in Circulation",-1)),e("span",Ne,"$"+o(x(b.value.total_cash)),1)]),e("div",Fe,[t[12]||(t[12]=e("span",{class:"text-slate-300"},"Total Bank Deposits",-1)),e("span",Re,"$"+o(x(b.value.total_bank)),1)]),e("div",We,[t[13]||(t[13]=e("span",{class:"text-slate-300"},"Cash Generated Today",-1)),e("span",Ee,"$"+o(x(b.value.generated_today)),1)]),e("div",He,[t[14]||(t[14]=e("span",{class:"text-slate-300"},"Cash Spent Today",-1)),e("span",ze,"$"+o(x(b.value.spent_today)),1)])])])]),e("div",Oe,[e("div",Pe,[e("h3",Ue,[d(n(D),{class:"w-5 h-5 text-orange-400"}),t[15]||(t[15]=c(" Top Activities ",-1))]),e("div",Ge,[(l(!0),r(m,null,_(F.value,s=>(l(),r("div",{key:s.name,class:"flex items-center justify-between"},[e("div",qe,[e("div",Je,o(s.icon),1),e("span",Ke,o(s.name),1)]),e("div",Ie,[e("div",Qe,[e("div",{class:"h-full bg-gradient-to-r from-orange-500 to-amber-500 rounded-full",style:C({width:`${s.percentage}%`})},null,4)]),e("span",Xe,o(x(s.count)),1)])]))),128))])]),e("div",Ye,[e("h3",Ze,[d(n(ee),{class:"w-5 h-5 text-violet-400"}),t[16]||(t[16]=c(" Level Distribution ",-1))]),e("div",et,[(l(!0),r(m,null,_(R.value,s=>(l(),r("div",{key:s.range,class:"flex items-center justify-between"},[e("span",tt,o(s.range),1),e("div",st,[e("div",at,[e("div",{class:u(["h-full rounded-full",s.color]),style:C({width:`${s.percentage}%`})},null,6)]),e("span",ot,o(s.percentage)+"%",1)])]))),128))])]),e("div",lt,[e("h3",nt,[d(n(te),{class:"w-5 h-5 text-cyan-400"}),t[17]||(t[17]=c(" Recent Events ",-1))]),e("div",rt,[(l(!0),r(m,null,_(W.value,s=>(l(),r("div",{key:s.id,class:"flex items-start gap-3 p-2 rounded-lg hover:bg-slate-700/30 transition-colors"},[e("div",{class:u(["p-1.5 rounded-lg",s.bgColor])},[(l(),v(Y(s.icon),{class:u(["w-4 h-4",s.iconColor])},null,8,["class"]))],2),e("div",it,[e("p",dt,o(s.message),1),e("p",ct,o(s.time),1)])]))),128))])])]),e("div",ut,[e("div",gt,[e("h3",xt,[d(n(T),{class:"w-5 h-5 text-emerald-400"}),t[18]||(t[18]=c(" Retention by Cohort ",-1))]),e("div",pt,[e("table",bt,[t[19]||(t[19]=e("thead",null,[e("tr",{class:"text-slate-400"},[e("th",{class:"text-left py-2"},"Cohort"),e("th",{class:"text-center py-2"},"Day 1"),e("th",{class:"text-center py-2"},"Day 7"),e("th",{class:"text-center py-2"},"Day 30")])],-1)),e("tbody",null,[(l(!0),r(m,null,_(E.value,s=>(l(),r("tr",{key:s.week,class:"border-t border-slate-700/50"},[e("td",mt,o(s.week),1),e("td",_t,[e("span",{class:u(k(s.day1))},o(s.day1)+"%",3)]),e("td",vt,[e("span",{class:u(k(s.day7))},o(s.day7)+"%",3)]),e("td",ht,[e("span",{class:u(k(s.day30))},o(s.day30)+"%",3)])]))),128))])])])]),e("div",ft,[e("h3",yt,[d(n(S),{class:"w-5 h-5 text-amber-400"}),t[20]||(t[20]=c(" Peak Activity Hours ",-1))]),e("div",wt,[(l(!0),r(m,null,_(w.value,s=>(l(),r("div",{key:s.hour,class:"flex flex-col items-center"},[e("div",{class:u(["w-full rounded-lg transition-colors",H(s.value)]),style:{height:"60px"},title:`${s.hour}:00 - ${s.value} users`},null,10,kt),e("span",Ct,o(s.hour),1)]))),128))]),t[21]||(t[21]=I('<div class="flex items-center justify-center gap-4 mt-4 text-xs text-slate-400"><span class="flex items-center gap-1"><div class="w-3 h-3 rounded bg-slate-700"></div> Low </span><span class="flex items-center gap-1"><div class="w-3 h-3 rounded bg-cyan-700"></div> Medium </span><span class="flex items-center gap-1"><div class="w-3 h-3 rounded bg-cyan-500"></div> High </span><span class="flex items-center gap-1"><div class="w-3 h-3 rounded bg-cyan-300"></div> Peak </span></div>',1))])])]))}};export{Lt as default};
