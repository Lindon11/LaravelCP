import{o,h as n,a as e,_ as X,e as ee,x as g,b as i,z as r,H as te,k as d,v as p,m as M,F as U,i as j,d as v,ai as E,w as H,aj as se,c as Z,T as le,S as ae,g as c,y as oe,t as u,n as _,U as ne,V as re,ak as ie,a3 as de,K as ue,l as k,al as ce,Y as be,E as me,D as pe,Z as q}from"./index-VJuD4EV8.js";import{r as xe}from"./PlusIcon-CccdgNEK.js";import{r as ge}from"./ClockIcon-BYaJoGlX.js";import{r as ve}from"./PencilIcon-CrG3wviI.js";function fe(G,D){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})])}const he={class:"space-y-6"},ye={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},we={class:"relative w-full sm:w-80"},_e={class:"flex items-center gap-3"},ke=["value"],Ce={key:0,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},Ve={key:1,class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 p-12"},Ae={class:"flex flex-col items-center justify-center"},Te={class:"w-16 h-16 rounded-2xl bg-slate-700/30 flex items-center justify-center mb-4"},$e={key:2,class:"space-y-4"},Me={class:"p-6"},Ue={class:"flex items-start gap-4"},je={class:"flex-1 min-w-0"},De={class:"flex items-center gap-3 mb-2"},Se={class:"text-lg font-semibold text-white group-hover:text-amber-400 transition-colors truncate"},Le={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-md bg-amber-500/20 text-amber-400 text-xs font-medium"},Ne={class:"text-slate-400 text-sm line-clamp-2 mb-3"},ze={class:"flex flex-wrap items-center gap-4 text-sm text-slate-500"},Be={class:"inline-flex items-center gap-1.5"},Fe={key:0,class:"inline-flex items-center gap-1.5"},Ie={class:"inline-flex items-center gap-1.5 capitalize"},Pe={class:"flex items-center gap-2"},Ee=["onClick"],He=["onClick"],Ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},qe={class:"relative bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col"},Ge={class:"flex items-center justify-between p-6 border-b border-slate-700 shrink-0"},Ke={class:"text-lg font-bold text-white"},Qe={class:"p-6 overflow-y-auto flex-1 space-y-5"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},We={class:"space-y-2"},Ye={class:"space-y-2"},Je=["value"],Oe={class:"space-y-2"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},et={class:"space-y-2"},tt={class:"space-y-2"},st={key:0,class:"grid grid-cols-2 gap-5"},lt={class:"space-y-2"},at={class:"space-y-2"},ot={class:"space-y-2"},nt={class:"flex items-center gap-6 pt-2"},rt={class:"flex items-center gap-3 cursor-pointer"},it={class:"flex items-center gap-3 cursor-pointer"},dt={class:"flex items-center justify-end gap-3 p-6 border-t border-slate-700 bg-slate-800/50 shrink-0"},ut=["disabled"],ct={__name:"AnnouncementsView",setup(G){const D={template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"/></svg>'},b=oe(),f=c([]),C=c([]),V=c(!1),A=c(""),T=c(""),h=c(!1),m=c(null),y=c(!1);let S=null;const L={title:"",message:"",type:"news",target:"all",min_level:null,max_level:null,published_at:null,expires_at:null,is_active:!0,is_sticky:!1,created_by:null},l=c({...L}),K={news:fe,event:ue,maintenance:de,update:ie,alert:re},N={blue:{bar:"bg-blue-500",bg:"bg-blue-500/20",icon:"text-blue-400"},purple:{bar:"bg-purple-500",bg:"bg-purple-500/20",icon:"text-purple-400"},amber:{bar:"bg-amber-500",bg:"bg-amber-500/20",icon:"text-amber-400"},emerald:{bar:"bg-emerald-500",bg:"bg-emerald-500/20",icon:"text-emerald-400"},red:{bar:"bg-red-500",bg:"bg-red-500/20",icon:"text-red-400"},slate:{bar:"bg-slate-500",bg:"bg-slate-500/20",icon:"text-slate-400"},green:{bar:"bg-green-500",bg:"bg-green-500/20",icon:"text-green-400"},cyan:{bar:"bg-cyan-500",bg:"bg-cyan-500/20",icon:"text-cyan-400"},pink:{bar:"bg-pink-500",bg:"bg-pink-500/20",icon:"text-pink-400"},orange:{bar:"bg-orange-500",bg:"bg-orange-500/20",icon:"text-orange-400"}},Q=a=>{const t=f.value.find(s=>s.name===a);return N[t==null?void 0:t.color]||N.slate},$=new Proxy({},{get:(a,t)=>Q(t)});ee(async()=>{try{f.value=(await g.get("/admin/announcement-types")).data}catch{}x()});const x=async()=>{V.value=!0;try{const a={search:A.value,type:T.value},t=await g.get("/admin/content/announcements",{params:a});C.value=t.data.data||t.data}catch{b.error("Failed to load announcements")}finally{V.value=!1}},R=()=>{clearTimeout(S),S=setTimeout(x,300)},z=()=>{m.value=null,l.value={...L},h.value=!0},W=a=>{m.value=a,l.value={...a},h.value=!0},w=()=>{h.value=!1,m.value=null},Y=async()=>{var a,t;if(!l.value.title||!l.value.message){b.error("Title and message are required");return}y.value=!0;try{m.value?(await g.patch(`/admin/content/announcements/${m.value.id}`,l.value),b.success("Announcement updated")):(await g.post("/admin/content/announcements",l.value),b.success("Announcement published")),w(),x()}catch(s){b.error(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to save announcement")}finally{y.value=!1}},J=async a=>{if(confirm(`Delete "${a.title}"?`))try{await g.delete(`/admin/content/announcements/${a.id}`),b.success("Announcement deleted"),x()}catch{b.error("Failed to delete announcement")}},B=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set";return(a,t)=>(o(),n("div",he,[e("div",ye,[e("div",we,[i(r(te),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>A.value=s),type:"text",placeholder:"Search announcements...",onInput:R,class:"w-full pl-10 pr-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,544),[[p,A.value]])]),e("div",_e,[d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>T.value=s),onChange:x,class:"px-4 py-3 bg-slate-800/50 border border-slate-700/50 rounded-xl text-slate-300 focus:outline-none focus:ring-2 focus:ring-amber-500/50 transition-all"},[t[12]||(t[12]=e("option",{value:""},"All Types",-1)),(o(!0),n(U,null,j(f.value,s=>(o(),n("option",{key:s.name,value:s.name},u(s.label),9,ke))),128))],544),[[M,T.value]]),e("button",{onClick:z,class:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl font-medium shadow-lg shadow-amber-500/20 transition-all"},[i(r(xe),{class:"w-5 h-5"}),t[13]||(t[13]=v(" New Announcement ",-1))])])]),V.value?(o(),n("div",Ce,[...t[14]||(t[14]=[e("div",{class:"flex flex-col items-center justify-center"},[e("div",{class:"w-12 h-12 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mb-4"}),e("p",{class:"text-slate-400"},"Loading announcements...")],-1)])])):C.value.length===0?(o(),n("div",Ve,[e("div",Ae,[e("div",Te,[i(r(E),{class:"w-8 h-8 text-slate-500"})]),t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-white mb-2"},"No announcements",-1)),t[16]||(t[16]=e("p",{class:"text-slate-400 text-center max-w-sm mb-4"},"Create your first announcement to broadcast to players",-1)),e("button",{onClick:z,class:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors"}," Create Announcement ")])])):(o(),n("div",$e,[i(se,{name:"list"},{default:H(()=>[(o(!0),n(U,null,j(C.value,s=>{var F,I,P;return o(),n("div",{key:s.id,class:"group bg-slate-800/50 hover:bg-slate-800 backdrop-blur-sm rounded-2xl border border-slate-700/50 hover:border-slate-600/50 overflow-hidden transition-all"},[e("div",{class:_(["h-1",((F=r($)[s.type])==null?void 0:F.bar)||"bg-slate-600"])},null,2),e("div",Me,[e("div",Ue,[e("div",{class:_(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",((I=r($)[s.type])==null?void 0:I.bg)||"bg-slate-700"])},[(o(),Z(ne(K[s.type]||r(E)),{class:_(["w-6 h-6",((P=r($)[s.type])==null?void 0:P.icon)||"text-slate-400"])},null,8,["class"]))],2),e("div",je,[e("div",De,[e("h3",Se,u(s.title),1),s.is_sticky?(o(),n("span",Le,[i(D,{class:"w-3 h-3 mr-1"}),t[17]||(t[17]=v(" Pinned ",-1))])):k("",!0),e("span",{class:_(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",s.is_active?"bg-emerald-500/20 text-emerald-400":"bg-slate-600/50 text-slate-400"])},u(s.is_active?"Active":"Inactive"),3)]),e("p",Ne,u(s.message),1),e("div",ze,[e("span",Be,[i(r(ce),{class:"w-4 h-4"}),v(" "+u(B(s.published_at||s.created_at)),1)]),s.expires_at?(o(),n("span",Fe,[i(r(ge),{class:"w-4 h-4"}),v(" Expires "+u(B(s.expires_at)),1)])):k("",!0),e("span",Ie,[i(r(be),{class:"w-4 h-4"}),v(" "+u(s.target||"All Users"),1)])])]),e("div",Pe,[e("button",{onClick:O=>W(s),class:"p-2 rounded-lg text-slate-400 hover:text-amber-400 hover:bg-slate-700/50 transition-colors"},[i(r(ve),{class:"w-5 h-5"})],8,Ee),e("button",{onClick:O=>J(s),class:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-colors"},[i(r(me),{class:"w-5 h-5"})],8,He)])])])])}),128))]),_:1})])),(o(),Z(ae,{to:"body"},[i(le,{name:"modal"},{default:H(()=>[h.value?(o(),n("div",Ze,[e("div",{class:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:w}),e("div",qe,[e("div",Ge,[e("h2",Ke,u(m.value?"Edit Announcement":"New Announcement"),1),e("button",{onClick:w,class:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors"},[i(r(pe),{class:"w-5 h-5"})])]),e("div",Qe,[e("div",Re,[e("div",We,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-300"},"Title *",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.title=s),type:"text",placeholder:"Announcement title",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.title]])]),e("div",Ye,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-300"},"Type *",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.type=s),class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},[(o(!0),n(U,null,j(f.value,s=>(o(),n("option",{key:s.name,value:s.name},u(s.label),9,Je))),128))],512),[[M,l.value.type]])])]),e("div",Oe,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-300"},"Message *",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.message=s),rows:"4",placeholder:"Write your announcement...",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all resize-none"},null,512),[[p,l.value.message]])]),e("div",Xe,[e("div",et,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-slate-300"},"Target Audience",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.target=s),class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},[...t[21]||(t[21]=[e("option",{value:"all"},"All Users",-1),e("option",{value:"level_range"},"Level Range",-1),e("option",{value:"location"},"Specific Location",-1)])],512),[[M,l.value.target]])]),e("div",tt,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-300"},"Published At",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.published_at=s),type:"datetime-local",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.published_at]])])]),l.value.target==="level_range"?(o(),n("div",st,[e("div",lt,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-300"},"Min Level",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.min_level=s),type:"number",min:"1",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.min_level,void 0,{number:!0}]])]),e("div",at,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-slate-300"},"Max Level",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.max_level=s),type:"number",min:"1",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.max_level,void 0,{number:!0}]])])])):k("",!0),e("div",ot,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-300"},"Expires At",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.expires_at=s),type:"datetime-local",class:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600/50 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all"},null,512),[[p,l.value.expires_at]]),t[27]||(t[27]=e("p",{class:"text-xs text-slate-500"},"Leave empty for no expiration",-1))]),e("div",nt,[e("label",rt,[d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.is_active=s),type:"checkbox",class:"w-5 h-5 rounded border-slate-600 text-amber-500 focus:ring-amber-500 focus:ring-offset-0 bg-slate-700"},null,512),[[q,l.value.is_active]]),t[28]||(t[28]=e("span",{class:"text-sm text-slate-300"},"Active",-1))]),e("label",it,[d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.is_sticky=s),type:"checkbox",class:"w-5 h-5 rounded border-slate-600 text-amber-500 focus:ring-amber-500 focus:ring-offset-0 bg-slate-700"},null,512),[[q,l.value.is_sticky]]),t[29]||(t[29]=e("span",{class:"text-sm text-slate-300"},"Pin to Top",-1))])])]),e("div",dt,[e("button",{onClick:w,class:"px-4 py-2.5 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl font-medium transition-colors"}," Cancel "),e("button",{onClick:Y,disabled:y.value,class:"px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white rounded-xl font-medium shadow-lg shadow-amber-500/20 transition-all disabled:opacity-50"},u(y.value?"Saving...":m.value?"Save Changes":"Publish"),9,ut)])])])):k("",!0)]),_:1})]))]))}},gt=X(ct,[["__scopeId","data-v-9b25e3d8"]]);export{gt as default};
