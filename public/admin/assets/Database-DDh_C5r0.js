import{c as h,w as f,u as _,r as k,o as g,a as t,j as D,k as l,v as r,h as y,t as c,l as x,b as V,d as C,f as U,g as i}from"./index-INZor7o-.js";import{I as q}from"./InstallerLayout-9Lewdf_X.js";const B={class:"p-12"},N={key:0,class:"bg-red-500/20 border border-red-500 rounded-lg p-4"},T={class:"text-red-300"},j={key:1,class:"bg-green-500/20 border border-green-500 rounded-lg p-4"},E={class:"text-green-300"},I={class:"flex justify-between pt-6"},M=["disabled"],H={__name:"Database",setup(P){const v=_(),s=i({db_host:"localhost",db_port:3306,db_name:"",db_username:"root",db_password:""}),a=i(!1),n=i(""),d=i(""),w=async()=>{var b,e,u,o,m;a.value=!0,n.value="",d.value="";try{const p=await U.post("/install/database",s.value);d.value="Database connection successful!",setTimeout(()=>{v.push("/install/settings")},1e3)}catch(p){n.value=((e=(b=p.response)==null?void 0:b.data)==null?void 0:e.message)||((m=(o=(u=p.response)==null?void 0:u.data)==null?void 0:o.errors)==null?void 0:m.db_connection)||"Database connection failed"}finally{a.value=!1}};return(b,e)=>{const u=k("router-link");return g(),h(q,{"current-step":"database"},{default:f(()=>[t("div",B,[e[11]||(e[11]=t("h2",{class:"text-3xl font-bold text-white mb-6"},"Database Configuration",-1)),e[12]||(e[12]=t("p",{class:"text-gray-300 mb-8"}," Enter your database connection details. We'll test the connection before proceeding. ",-1)),t("form",{onSubmit:D(w,["prevent"]),class:"space-y-6"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-semibold text-gray-300 mb-2"},"Database Host",-1)),l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.db_host=o),type:"text",required:"",class:"w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"localhost"},null,512),[[r,s.value.db_host]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-semibold text-gray-300 mb-2"},"Database Port",-1)),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.db_port=o),type:"number",required:"",class:"w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"3306"},null,512),[[r,s.value.db_port]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-semibold text-gray-300 mb-2"},"Database Name",-1)),l(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.db_name=o),type:"text",required:"",class:"w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"gangster_legends"},null,512),[[r,s.value.db_name]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-semibold text-gray-300 mb-2"},"Database Username",-1)),l(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.db_username=o),type:"text",required:"",class:"w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"root"},null,512),[[r,s.value.db_username]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-semibold text-gray-300 mb-2"},"Database Password",-1)),l(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.db_password=o),type:"password",class:"w-full px-4 py-3 bg-white/10 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"••••••••"},null,512),[[r,s.value.db_password]])]),n.value?(g(),y("div",N,[t("p",T,c(n.value),1)])):x("",!0),d.value?(g(),y("div",j,[t("p",E,c(d.value),1)])):x("",!0),t("div",I,[V(u,{to:"/install/requirements",class:"bg-gray-600 hover:bg-gray-700 text-white font-semibold px-6 py-3 rounded-lg transition"},{default:f(()=>[...e[10]||(e[10]=[C(" ← Back ",-1)])]),_:1}),t("button",{type:"submit",disabled:a.value,class:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white font-semibold px-6 py-3 rounded-lg transition"},c(a.value?"Testing Connection...":"Test & Continue →"),9,M)])],32)])]),_:1})}}};export{H as default};
