import{_ as D,e as x,h as o,a as e,k as g,v as S,m as P,t as n,F as V,i as A,l as N,x as O,g as u,q as U,o as r,n as W}from"./index-DhDiA3Nh.js";const B={class:"view-container"},F={class:"filters-row"},M={key:0,class:"loading"},R={key:1,class:"error"},q={key:2,class:"empty"},z={key:3,class:"data-table"},E={class:"player-name"},G={class:"player-name"},I={key:4,class:"pagination"},Q=["disabled"],T={class:"page-info"},$=["disabled"],j={__name:"CombatLogsView",setup(H){const f=u([]),m=u(!0),p=u(null),c=u(""),d=u(""),l=u(1),i=u(1),w=U(()=>f.value.filter(s=>{var v,_,k,b;const t=!c.value||((_=(v=s.attacker)==null?void 0:v.username)==null?void 0:_.toLowerCase().includes(c.value.toLowerCase()))||((b=(k=s.defender)==null?void 0:k.username)==null?void 0:b.toLowerCase().includes(c.value.toLowerCase())),a=!d.value||d.value==="attacker_won"&&s.attacker_won||d.value==="defender_won"&&!s.attacker_won;return t&&a})),h=async()=>{var s,t;m.value=!0,p.value=null;try{const a=await O.get("/admin/combat-logs",{params:{page:l.value}});f.value=a.data.data||a.data||[],i.value=a.data.last_page||1}catch(a){p.value=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load combat logs"}finally{m.value=!1}},y=()=>{l.value>1&&(l.value--,h())},C=()=>{l.value<i.value&&(l.value++,h())},L=s=>new Date(s).toLocaleString();return x(h),(s,t)=>(r(),o("div",B,[e("div",F,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),type:"text",placeholder:"Search by username...",class:"search-input"},null,512),[[S,c.value]]),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>d.value=a),class:"filter-select"},[...t[2]||(t[2]=[e("option",{value:""},"All Outcomes",-1),e("option",{value:"attacker_won"},"Attacker Won",-1),e("option",{value:"defender_won"},"Defender Won",-1)])],512),[[P,d.value]]),e("button",{onClick:h,class:"btn btn-secondary"}," üîÑ Refresh ")]),m.value?(r(),o("div",M,"Loading combat logs...")):p.value?(r(),o("div",R,n(p.value),1)):f.value.length===0?(r(),o("div",q,"No combat logs found.")):(r(),o("table",z,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Attacker"),e("th",null,"Defender"),e("th",null,"Outcome"),e("th",null,"Damage Dealt"),e("th",null,"Cash Stolen"),e("th",null,"Respect Gained")])],-1)),e("tbody",null,[(r(!0),o(V,null,A(w.value,a=>{var v,_;return r(),o("tr",{key:a.id},[e("td",null,n(L(a.created_at)),1),e("td",null,[e("span",E,n(((v=a.attacker)==null?void 0:v.username)||"Unknown"),1)]),e("td",null,[e("span",G,n(((_=a.defender)==null?void 0:_.username)||"Unknown"),1)]),e("td",null,[e("span",{class:W(["badge",a.attacker_won?"success":"danger"])},n(a.attacker_won?"Attacker Won":"Defender Won"),3)]),e("td",null,n(a.damage_dealt),1),e("td",null,"$"+n((a.cash_stolen||0).toLocaleString()),1),e("td",null,n(a.respect_gained||0),1)])}),128))])])),!m.value&&i.value>1?(r(),o("div",I,[e("button",{onClick:y,disabled:l.value===1,class:"btn btn-sm"},"‚Üê Prev",8,Q),e("span",T,"Page "+n(l.value)+" of "+n(i.value),1),e("button",{onClick:C,disabled:l.value===i.value,class:"btn btn-sm"},"Next ‚Üí",8,$)])):N("",!0)]))}},K=D(j,[["__scopeId","data-v-c468635e"]]);export{K as default};
