import{_ as w,e as P,h as n,a as e,k as C,m as S,s as x,t as a,F as R,i as V,l as B,x as D,g as u,q as L,o,n as N}from"./index-BVasWiLC.js";const z={class:"view-container"},F={class:"filters-row"},I={key:0,class:"loading"},A={key:1,class:"error"},M={key:2,class:"empty"},U={key:3,class:"data-table"},W={key:4,class:"pagination"},$=["disabled"],q={class:"page-info"},E=["disabled"],j={__name:"RacesView",setup(G){const r=u([]),c=u(!0),v=u(null),p=u(""),s=u(1),d=u(1),f=L(()=>p.value?r.value.filter(i=>i.status===p.value):r.value),_=async()=>{var i,l;c.value=!0,v.value=null;try{const t=await D.get("/admin/races",{params:{page:s.value}});r.value=t.data.data||t.data||[],d.value=t.data.last_page||1}catch(t){v.value=((l=(i=t.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to load races"}finally{c.value=!1}},h=()=>{s.value>1&&(s.value--,_())},y=()=>{s.value<d.value&&(s.value++,_())},k=i=>new Date(i).toLocaleString();return P(_),(i,l)=>(o(),n("div",z,[e("div",F,[C(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>p.value=t),class:"filter-select"},[...l[1]||(l[1]=[x('<option value="" data-v-2bd662e0>All Races</option><option value="waiting" data-v-2bd662e0>Waiting</option><option value="in_progress" data-v-2bd662e0>In Progress</option><option value="completed" data-v-2bd662e0>Completed</option><option value="cancelled" data-v-2bd662e0>Cancelled</option>',5)])],512),[[S,p.value]]),e("button",{onClick:_,class:"btn btn-secondary"}," üîÑ Refresh ")]),c.value?(o(),n("div",I,"Loading races...")):v.value?(o(),n("div",A,a(v.value),1)):r.value.length===0?(o(),n("div",M,"No races found.")):(o(),n("table",U,[l[2]||(l[2]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Created By"),e("th",null,"Status"),e("th",null,"Buy-in"),e("th",null,"Participants"),e("th",null,"Winner"),e("th",null,"Prize Pool"),e("th",null,"Created At")])],-1)),e("tbody",null,[(o(!0),n(R,null,V(f.value,t=>{var g,b,m;return o(),n("tr",{key:t.id},[e("td",null,"#"+a(t.id),1),e("td",null,a(((g=t.creator)==null?void 0:g.username)||"Unknown"),1),e("td",null,[e("span",{class:N(["badge",t.status])},a(t.status),3)]),e("td",null,"$"+a((t.buy_in||0).toLocaleString()),1),e("td",null,a(((b=t.participants)==null?void 0:b.length)||0)+"/"+a(t.max_participants||4),1),e("td",null,a(((m=t.winner)==null?void 0:m.username)||"-"),1),e("td",null,"$"+a((t.prize_pool||0).toLocaleString()),1),e("td",null,a(k(t.created_at)),1)])}),128))])])),!c.value&&d.value>1?(o(),n("div",W,[e("button",{onClick:h,disabled:s.value===1,class:"btn btn-sm"},"‚Üê Prev",8,$),e("span",q,"Page "+a(s.value)+" of "+a(d.value),1),e("button",{onClick:y,disabled:s.value===d.value,class:"btn btn-sm"},"Next ‚Üí",8,E)])):B("",!0)]))}},J=w(j,[["__scopeId","data-v-2bd662e0"]]);export{J as default};
