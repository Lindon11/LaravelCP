import{e as Ae,h as a,a as e,b as d,z as u,as as de,d as b,a2 as Ie,k as f,v as y,m as $e,F as h,i as w,l as m,t as o,D as U,j as ue,I as Pe,V as Te,N as je,ag as Ve,x as g,g as r,y as Me,o as i,ah as Se,n as E,W as De,E as Fe,Z as Ne}from"./index-BwhfHraJ.js";import{r as Ue}from"./PlusIcon-Buej6SRa.js";import{r as Ee}from"./CheckCircleIcon-CfiOgsEC.js";import{r as G}from"./ClipboardIcon-DeeYo9YN.js";import{r as Re}from"./PencilIcon-BlPqFj9B.js";const Le={class:"space-y-6"},ze={class:"flex items-center justify-between"},qe={class:"text-2xl font-bold text-white flex items-center gap-3"},Be={class:"p-3 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600"},We={class:"flex items-center gap-3"},Ge={class:"flex items-center gap-4"},Oe={class:"flex-1"},Ze={class:"rounded-2xl bg-slate-800/50 backdrop-blur border border-slate-700/50 overflow-hidden"},He={class:"overflow-x-auto"},Je={class:"w-full"},Qe={class:"px-6 py-4"},Xe={class:"flex items-center gap-3"},Ye={class:"p-2 rounded-lg bg-violet-500/20"},Ke={class:"text-white font-medium"},et={class:"text-xs text-slate-500"},tt={class:"px-6 py-4"},st={class:"flex items-center gap-2"},lt={class:"text-sm text-slate-400 bg-slate-700/50 px-2 py-1 rounded"},ot=["onClick"],at={class:"px-6 py-4"},it={key:0,class:"px-2.5 py-1 rounded-lg text-xs font-medium bg-red-500/20 text-red-400"},nt={key:1,class:"px-2.5 py-1 rounded-lg text-xs font-medium bg-emerald-500/20 text-emerald-400"},rt={key:2,class:"px-2.5 py-1 rounded-lg text-xs font-medium bg-slate-500/20 text-slate-400"},dt={class:"px-6 py-4 text-slate-300"},ut={key:0,class:"text-slate-500 text-xs"},ct={class:"px-6 py-4"},xt={class:"text-white"},pt={class:"text-xs text-slate-500"},vt={class:"px-6 py-4 text-slate-400 text-sm"},mt={class:"px-6 py-4"},bt={class:"flex items-center justify-end gap-2"},ft=["onClick"],gt=["onClick"],_t=["onClick","title"],yt=["onClick"],ht={key:0},wt={key:0,class:"flex justify-center gap-2"},kt=["onClick"],Ct={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},At={class:"relative bg-slate-800 rounded-2xl border border-slate-700 shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4"},It={class:"sticky top-0 bg-slate-800 border-b border-slate-700 px-6 py-4 flex items-center justify-between"},$t={class:"text-xl font-semibold text-white"},Pt={class:"grid grid-cols-2 gap-4"},Tt={class:"grid grid-cols-2 gap-2"},jt=["value"],Vt={class:"text-sm text-white"},Mt={class:"text-xs text-slate-500"},St={class:"flex gap-2 mb-2"},Dt=["onKeyup"],Ft={class:"flex flex-wrap gap-2"},Nt=["onClick"],Ut={key:0,class:"text-slate-500 text-sm"},Et={class:"flex justify-end gap-3 pt-4 border-t border-slate-700"},Rt=["disabled"],Lt={key:0},zt={key:1},qt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},Bt={class:"relative bg-slate-800 rounded-2xl border border-slate-700 shadow-xl w-full max-w-lg m-4 p-6"},Wt={class:"text-center mb-6"},Gt={class:"w-16 h-16 rounded-full bg-emerald-500/20 flex items-center justify-center mx-auto mb-4"},Ot={class:"space-y-4"},Zt={class:"flex items-center gap-2"},Ht={class:"flex-1 px-4 py-3 bg-slate-700 rounded-xl text-white text-sm break-all"},Jt={class:"flex items-center gap-2"},Qt={class:"flex-1 px-4 py-3 bg-slate-700 rounded-xl text-white text-sm break-all"},Xt={class:"mt-6 p-4 rounded-xl bg-amber-500/10 border border-amber-500/30"},Yt={class:"text-amber-400 text-sm flex items-start gap-2"},Kt={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},es={class:"relative bg-slate-800 rounded-2xl border border-slate-700 shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto m-4"},ts={class:"sticky top-0 bg-slate-800 border-b border-slate-700 px-6 py-4 flex items-center justify-between"},ss={class:"text-xl font-semibold text-white"},ls={key:0,class:"p-6 space-y-6"},os={class:"grid grid-cols-4 gap-4"},as={class:"p-4 rounded-xl bg-slate-700/30"},is={class:"text-2xl font-bold text-white"},ns={class:"p-4 rounded-xl bg-slate-700/30"},rs={class:"text-2xl font-bold text-white"},ds={class:"p-4 rounded-xl bg-slate-700/30"},us={class:"text-2xl font-bold text-white"},cs={class:"p-4 rounded-xl bg-slate-700/30"},xs={class:"text-2xl font-bold text-white"},ps={class:"space-y-2"},vs={class:"flex items-center gap-3"},ms={class:"text-slate-300"},bs={class:"flex items-center gap-4"},fs={class:"text-slate-500 text-sm"},gs={key:0,class:"text-center py-8 text-slate-500"},_s={class:"flex gap-3 pt-4 border-t border-slate-700"},ys={key:4,class:"fixed inset-0 z-50 flex items-center justify-center"},hs={class:"relative bg-slate-800 rounded-2xl border border-slate-700 shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto m-4"},ws={class:"sticky top-0 bg-slate-800 border-b border-slate-700 px-6 py-4 flex items-center justify-between"},ks={class:"p-6 space-y-6"},Cs={class:"grid grid-cols-4 gap-4"},As={class:"p-4 rounded-xl bg-gradient-to-br from-violet-500/20 to-purple-600/20 border border-violet-500/30"},Is={class:"text-2xl font-bold text-white"},$s={class:"p-4 rounded-xl bg-gradient-to-br from-emerald-500/20 to-teal-600/20 border border-emerald-500/30"},Ps={class:"text-2xl font-bold text-white"},Ts={class:"p-4 rounded-xl bg-gradient-to-br from-blue-500/20 to-cyan-600/20 border border-blue-500/30"},js={class:"text-2xl font-bold text-white"},Vs={class:"p-4 rounded-xl bg-gradient-to-br from-red-500/20 to-orange-600/20 border border-red-500/30"},Ms={class:"text-2xl font-bold text-white"},Ss={class:"space-y-2"},Ds={class:"text-slate-300"},Fs={class:"flex items-center gap-4"},Ns={class:"text-slate-400 text-sm"},Us={class:"text-white font-medium"},Es={class:"space-y-2"},Rs={class:"text-white"},Ls={class:"text-slate-500 text-sm ml-2"},zs={class:"text-white font-medium"},qs={key:5,class:"fixed inset-0 z-50 flex items-center justify-center"},Bs={class:"relative bg-slate-800 rounded-2xl border border-slate-700 shadow-xl w-full max-w-md m-4 p-6"},Ws={class:"text-slate-400 mb-6"},Gs={class:"text-white"},Os={class:"flex justify-end gap-3"},el={__name:"ApiKeysView",setup(Zs){const x=Me(),R=r(!1),T=r(!1),L=r(""),z=r(""),q=r([]),j=r({current_page:1,last_page:1}),V=r(!1),M=r(!1),A=r(!1),S=r(!1),I=r(!1),$=r(!1),B=r(null),v=r(null),W=r(null),k=r({key:"",secret:""}),_=r({}),O=r([]),D=r(""),n=r({name:"",description:"",rate_limit:60,daily_limit:null,expires_at:"",permissions:[],allowed_ips:[],allowed_domains:[]});let Z=null;const ce=()=>{clearTimeout(Z),Z=setTimeout(()=>C(),300)},F=l=>new Intl.NumberFormat().format(l||0),H=l=>l?new Date(l).toLocaleString():"Never",J=l=>l?l.substring(0,8)+"..."+l.substring(l.length-4):"",xe=async l=>{await navigator.clipboard.writeText(l),x.success("API key copied to clipboard")},Q=async l=>{await navigator.clipboard.writeText(l),x.success("Copied to clipboard")},C=async(l=1)=>{R.value=!0;try{const t=await g.get("/admin/api-keys",{params:{page:l,search:L.value,status:z.value}});q.value=t.data.data,j.value={current_page:t.data.current_page,last_page:t.data.last_page}}catch{x.error("Failed to load API keys")}finally{R.value=!1}},pe=async()=>{try{const l=await g.get("/admin/api-keys/permissions");O.value=l.data}catch{console.error("Failed to load permissions")}},ve=async()=>{try{const l=await g.get("/admin/api-keys/analytics");_.value=l.data}catch{x.error("Failed to load analytics")}},me=()=>{$.value=!1,B.value=null,n.value={name:"",description:"",rate_limit:60,daily_limit:null,expires_at:"",permissions:[],allowed_ips:[],allowed_domains:[]},V.value=!0},be=l=>{$.value=!0,B.value=l.id,n.value={name:l.name,description:l.description||"",rate_limit:l.rate_limit,daily_limit:l.daily_limit,expires_at:l.expires_at?l.expires_at.substring(0,16):"",permissions:l.permissions||[],allowed_ips:l.allowed_ips||[],allowed_domains:l.allowed_domains||[]},V.value=!0},N=()=>{V.value=!1},fe=async()=>{var l,t;T.value=!0;try{const c={...n.value};if(c.daily_limit||delete c.daily_limit,c.expires_at||delete c.expires_at,c.permissions.length===0&&delete c.permissions,c.allowed_ips.length===0&&delete c.allowed_ips,c.allowed_domains.length===0&&delete c.allowed_domains,$.value)await g.patch(`/admin/api-keys/${B.value}`,c),x.success("API key updated successfully");else{const P=await g.post("/admin/api-keys",c);k.value={key:P.data.key,secret:P.data.secret},M.value=!0,x.success("API key created successfully")}N(),C()}catch(c){x.error(((t=(l=c.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to save API key")}finally{T.value=!1}},ge=async l=>{try{const t=await g.get(`/admin/api-keys/${l.id}`);v.value=t.data,A.value=!0}catch{x.error("Failed to load API key details")}},_e=async l=>{try{await g.post(`/admin/api-keys/${l.id}/toggle`),l.is_active=!l.is_active,x.success(l.is_active?"API key enabled":"API key disabled")}catch{x.error("Failed to toggle API key")}},ye=l=>{W.value=l,I.value=!0},he=async()=>{try{await g.delete(`/admin/api-keys/${W.value.id}`),x.success("API key deleted successfully"),I.value=!1,C()}catch{x.error("Failed to delete API key")}},we=async l=>{if(confirm("Are you sure? The old secret will stop working immediately."))try{const t=await g.post(`/admin/api-keys/${l}/regenerate-secret`);k.value={key:v.value.key,secret:t.data.secret},A.value=!1,M.value=!0,x.success("Secret regenerated successfully")}catch{x.error("Failed to regenerate secret")}},ke=l=>{x.info("Logs viewer coming soon")},X=()=>{const l=D.value.trim();l&&!n.value.allowed_ips.includes(l)&&(/^(\d{1,3}\.){3}\d{1,3}$/.test(l)?(n.value.allowed_ips.push(l),D.value=""):x.error("Invalid IP address"))},Ce=l=>{n.value.allowed_ips.splice(l,1)};return Ae(()=>{C(),pe(),ve()}),(l,t)=>{var c,P,Y,K,ee,te,se,le,oe,ae,ie,ne,re;return i(),a("div",Le,[e("div",ze,[e("div",null,[e("h1",qe,[e("div",Be,[d(u(de),{class:"w-6 h-6 text-white"})]),t[21]||(t[21]=b(" API Keys ",-1))]),t[22]||(t[22]=e("p",{class:"text-sm text-slate-400 mt-1"},"Manage API access keys for external integrations",-1))]),e("div",We,[e("button",{onClick:t[0]||(t[0]=s=>S.value=!0),class:"px-4 py-2 bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded-xl text-white flex items-center gap-2 transition-colors"},[d(u(Ie),{class:"w-5 h-5"}),t[23]||(t[23]=b(" Analytics ",-1))]),e("button",{onClick:me,class:"px-4 py-2 bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 rounded-xl text-white flex items-center gap-2 transition-colors"},[d(u(Ue),{class:"w-5 h-5"}),t[24]||(t[24]=b(" Create API Key ",-1))])])]),e("div",Ge,[e("div",Oe,[f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>L.value=s),onInput:ce,type:"text",placeholder:"Search API keys...",class:"w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-violet-500/50"},null,544),[[y,L.value]])]),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>z.value=s),onChange:C,class:"px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50"},[...t[25]||(t[25]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],544),[[$e,z.value]])]),e("div",Ze,[e("div",He,[e("table",Je,[t[27]||(t[27]=e("thead",null,[e("tr",{class:"border-b border-slate-700/50"},[e("th",{class:"text-left text-sm font-medium text-slate-400 px-6 py-4"},"Name"),e("th",{class:"text-left text-sm font-medium text-slate-400 px-6 py-4"},"Key"),e("th",{class:"text-left text-sm font-medium text-slate-400 px-6 py-4"},"Status"),e("th",{class:"text-left text-sm font-medium text-slate-400 px-6 py-4"},"Rate Limit"),e("th",{class:"text-left text-sm font-medium text-slate-400 px-6 py-4"},"Requests"),e("th",{class:"text-left text-sm font-medium text-slate-400 px-6 py-4"},"Last Used"),e("th",{class:"text-right text-sm font-medium text-slate-400 px-6 py-4"},"Actions")])],-1)),e("tbody",null,[(i(!0),a(h,null,w(q.value,s=>(i(),a("tr",{key:s.id,class:"border-b border-slate-700/30 hover:bg-slate-700/20"},[e("td",Qe,[e("div",Xe,[e("div",Ye,[d(u(de),{class:"w-4 h-4 text-violet-400"})]),e("div",null,[e("p",Ke,o(s.name),1),e("p",et,o(s.description||"No description"),1)])])]),e("td",tt,[e("div",st,[e("code",lt,o(J(s.key)),1),e("button",{onClick:p=>xe(s.key),class:"text-slate-500 hover:text-white"},[d(u(G),{class:"w-4 h-4"})],8,ot)])]),e("td",at,[s.is_expired?(i(),a("span",it," Expired ")):s.is_active?(i(),a("span",nt," Active ")):(i(),a("span",rt," Inactive "))]),e("td",dt,[b(o(s.rate_limit)+"/min ",1),s.daily_limit?(i(),a("span",ut," ("+o(s.daily_limit)+"/day) ",1)):m("",!0)]),e("td",ct,[e("div",xt,o(F(s.total_requests)),1),e("div",pt,o(s.requests_today)+" today",1)]),e("td",vt,o(s.last_used_at?H(s.last_used_at):"Never"),1),e("td",mt,[e("div",bt,[e("button",{onClick:p=>ge(s),class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600/50 text-slate-400 hover:text-white transition-colors",title:"View Details"},[d(u(Se),{class:"w-4 h-4"})],8,ft),e("button",{onClick:p=>be(s),class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600/50 text-slate-400 hover:text-white transition-colors",title:"Edit"},[d(u(Re),{class:"w-4 h-4"})],8,gt),e("button",{onClick:p=>_e(s),class:E(["p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600/50 transition-colors",s.is_active?"text-emerald-400 hover:text-emerald-300":"text-slate-400 hover:text-white"]),title:s.is_active?"Disable":"Enable"},[d(u(De),{class:"w-4 h-4"})],10,_t),e("button",{onClick:p=>ye(s),class:"p-2 rounded-lg bg-slate-700/50 hover:bg-red-500/20 text-slate-400 hover:text-red-400 transition-colors",title:"Delete"},[d(u(Fe),{class:"w-4 h-4"})],8,yt)])])]))),128)),q.value.length===0&&!R.value?(i(),a("tr",ht,[...t[26]||(t[26]=[e("td",{colspan:"7",class:"px-6 py-12 text-center text-slate-500"}," No API keys found ",-1)])])):m("",!0)])])])]),j.value.last_page>1?(i(),a("div",wt,[(i(!0),a(h,null,w(j.value.last_page,s=>(i(),a("button",{key:s,onClick:p=>C(s),class:E(["px-3 py-1.5 rounded-lg text-sm",s===j.value.current_page?"bg-violet-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"])},o(s),11,kt))),128))])):m("",!0),V.value?(i(),a("div",Ct,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:N}),e("div",At,[e("div",It,[e("h2",$t,o($.value?"Edit API Key":"Create API Key"),1),e("button",{onClick:N,class:"text-slate-400 hover:text-white"},[d(u(U),{class:"w-6 h-6"})])]),e("form",{onSubmit:ue(fe,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Name *",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.name=s),type:"text",class:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50",placeholder:"My Integration",required:""},null,512),[[y,n.value.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Description",-1)),f(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.description=s),rows:"2",class:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50",placeholder:"What is this API key used for?"},null,512),[[y,n.value.description]])]),e("div",Pt,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Rate Limit (per minute)",-1)),f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>n.value.rate_limit=s),type:"number",min:"1",max:"10000",class:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50"},null,512),[[y,n.value.rate_limit,void 0,{number:!0}]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Daily Limit (optional)",-1)),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>n.value.daily_limit=s),type:"number",min:"1",class:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50",placeholder:"Unlimited"},null,512),[[y,n.value.daily_limit,void 0,{number:!0}]])])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Expires At (optional)",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>n.value.expires_at=s),type:"datetime-local",class:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50"},null,512),[[y,n.value.expires_at]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Permissions",-1)),e("div",Tt,[(i(!0),a(h,null,w(O.value,s=>(i(),a("label",{key:s.key,class:"flex items-center gap-2 p-3 rounded-xl bg-slate-700/30 cursor-pointer hover:bg-slate-700/50"},[f(e("input",{type:"checkbox",value:s.key,"onUpdate:modelValue":t[8]||(t[8]=p=>n.value.permissions=p),class:"rounded border-slate-600 bg-slate-700 text-violet-500 focus:ring-violet-500/50"},null,8,jt),[[Ne,n.value.permissions]]),e("div",null,[e("span",Vt,o(s.label),1),e("p",Mt,o(s.description),1)])]))),128))])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},"Allowed IPs (optional)",-1)),e("div",St,[f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>D.value=s),type:"text",class:"flex-1 px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-violet-500/50",placeholder:"192.168.1.1",onKeyup:Pe(ue(X,["prevent"]),["enter"])},null,40,Dt),[[y,D.value]]),e("button",{type:"button",onClick:X,class:"px-4 py-2.5 bg-slate-600 hover:bg-slate-500 rounded-xl text-white"}," Add ")]),e("div",Ft,[(i(!0),a(h,null,w(n.value.allowed_ips,(s,p)=>(i(),a("span",{key:p,class:"px-3 py-1 bg-slate-700 rounded-lg text-sm text-slate-300 flex items-center gap-2"},[b(o(s)+" ",1),e("button",{type:"button",onClick:Hs=>Ce(p),class:"text-slate-500 hover:text-red-400"},[d(u(U),{class:"w-4 h-4"})],8,Nt)]))),128)),n.value.allowed_ips.length===0?(i(),a("span",Ut," All IPs allowed ")):m("",!0)])]),e("div",Et,[e("button",{type:"button",onClick:N,class:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-xl text-white"}," Cancel "),e("button",{type:"submit",disabled:T.value,class:"px-6 py-2 bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 rounded-xl text-white flex items-center gap-2"},[T.value?(i(),a("span",Lt,"Saving...")):(i(),a("span",zt,o($.value?"Update":"Create"),1))],8,Rt)])],32)])])):m("",!0),M.value?(i(),a("div",qt,[t[40]||(t[40]=e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm"},null,-1)),e("div",Bt,[e("div",Wt,[e("div",Gt,[d(u(Ee),{class:"w-8 h-8 text-emerald-400"})]),t[35]||(t[35]=e("h2",{class:"text-xl font-semibold text-white"},"API Key Created",-1)),t[36]||(t[36]=e("p",{class:"text-slate-400 text-sm mt-1"},"Save these credentials - the secret won't be shown again!",-1))]),e("div",Ot,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-slate-400 mb-2"},"API Key",-1)),e("div",Zt,[e("code",Ht,o(k.value.key),1),e("button",{onClick:t[10]||(t[10]=s=>Q(k.value.key)),class:"p-2 bg-slate-600 hover:bg-slate-500 rounded-lg"},[d(u(G),{class:"w-5 h-5 text-white"})])])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-slate-400 mb-2"},"API Secret",-1)),e("div",Jt,[e("code",Qt,o(k.value.secret),1),e("button",{onClick:t[11]||(t[11]=s=>Q(k.value.secret)),class:"p-2 bg-slate-600 hover:bg-slate-500 rounded-lg"},[d(u(G),{class:"w-5 h-5 text-white"})])])])]),e("div",Xt,[e("p",Yt,[d(u(Te),{class:"w-5 h-5 flex-shrink-0"}),t[39]||(t[39]=e("span",null,"Make sure to copy these credentials now. The secret will not be displayed again.",-1))])]),e("button",{onClick:t[12]||(t[12]=s=>M.value=!1),class:"w-full mt-6 px-4 py-3 bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 rounded-xl text-white font-medium"}," I've Saved My Credentials ")])])):m("",!0),A.value?(i(),a("div",Kt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[13]||(t[13]=s=>A.value=!1)}),e("div",es,[e("div",ts,[e("h2",ss,o((c=v.value)==null?void 0:c.name),1),e("button",{onClick:t[14]||(t[14]=s=>A.value=!1),class:"text-slate-400 hover:text-white"},[d(u(U),{class:"w-6 h-6"})])]),v.value?(i(),a("div",ls,[e("div",os,[e("div",as,[t[41]||(t[41]=e("p",{class:"text-slate-400 text-sm"},"Today",-1)),e("p",is,o(((P=v.value.stats)==null?void 0:P.requests_today)||0),1)]),e("div",ns,[t[42]||(t[42]=e("p",{class:"text-slate-400 text-sm"},"This Week",-1)),e("p",rs,o(((Y=v.value.stats)==null?void 0:Y.requests_week)||0),1)]),e("div",ds,[t[43]||(t[43]=e("p",{class:"text-slate-400 text-sm"},"Avg Response",-1)),e("p",us,o(((K=v.value.stats)==null?void 0:K.avg_response_time)||0)+"ms",1)]),e("div",cs,[t[44]||(t[44]=e("p",{class:"text-slate-400 text-sm"},"Error Rate",-1)),e("p",xs,o(((ee=v.value.stats)==null?void 0:ee.error_rate)||0)+"%",1)])]),e("div",null,[t[45]||(t[45]=e("h3",{class:"text-lg font-medium text-white mb-3"},"Recent Requests",-1)),e("div",ps,[(i(!0),a(h,null,w(((te=v.value.stats)==null?void 0:te.last_endpoints)||[],s=>(i(),a("div",{key:s.created_at,class:"flex items-center justify-between p-3 rounded-xl bg-slate-700/30"},[e("div",vs,[e("span",{class:E(["px-2 py-0.5 rounded text-xs font-medium",s.method==="GET"?"bg-emerald-500/20 text-emerald-400":s.method==="POST"?"bg-blue-500/20 text-blue-400":s.method==="PUT"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"])},o(s.method),3),e("span",ms,o(s.endpoint),1)]),e("div",bs,[e("span",{class:E(["text-sm",s.status_code<300?"text-emerald-400":s.status_code<400?"text-amber-400":"text-red-400"])},o(s.status_code),3),e("span",fs,o(H(s.created_at)),1)])]))),128)),(le=(se=v.value.stats)==null?void 0:se.last_endpoints)!=null&&le.length?m("",!0):(i(),a("div",gs," No recent requests "))])]),e("div",_s,[e("button",{onClick:t[15]||(t[15]=s=>we(v.value.id)),class:"px-4 py-2 bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/50 rounded-xl text-amber-400 flex items-center gap-2"},[d(u(je),{class:"w-4 h-4"}),t[46]||(t[46]=b(" Regenerate Secret ",-1))]),e("button",{onClick:t[16]||(t[16]=s=>ke(v.value.id)),class:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-xl text-white flex items-center gap-2"},[d(u(Ve),{class:"w-4 h-4"}),t[47]||(t[47]=b(" View Full Logs ",-1))])])])):m("",!0)])])):m("",!0),S.value?(i(),a("div",ys,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[17]||(t[17]=s=>S.value=!1)}),e("div",hs,[e("div",ws,[t[48]||(t[48]=e("h2",{class:"text-xl font-semibold text-white"},"API Analytics",-1)),e("button",{onClick:t[18]||(t[18]=s=>S.value=!1),class:"text-slate-400 hover:text-white"},[d(u(U),{class:"w-6 h-6"})])]),e("div",ks,[e("div",Cs,[e("div",As,[t[49]||(t[49]=e("p",{class:"text-violet-400 text-sm"},"Total Keys",-1)),e("p",Is,o(((oe=_.value.overview)==null?void 0:oe.total_keys)||0),1)]),e("div",$s,[t[50]||(t[50]=e("p",{class:"text-emerald-400 text-sm"},"Active Keys",-1)),e("p",Ps,o(((ae=_.value.overview)==null?void 0:ae.active_keys)||0),1)]),e("div",Ts,[t[51]||(t[51]=e("p",{class:"text-blue-400 text-sm"},"Total Requests",-1)),e("p",js,o(F(((ie=_.value.overview)==null?void 0:ie.total_requests)||0)),1)]),e("div",Vs,[t[52]||(t[52]=e("p",{class:"text-red-400 text-sm"},"Error Rate",-1)),e("p",Ms,o(((ne=_.value.overview)==null?void 0:ne.error_rate)||0)+"%",1)])]),e("div",null,[t[53]||(t[53]=e("h3",{class:"text-lg font-medium text-white mb-3"},"Top Endpoints",-1)),e("div",Ss,[(i(!0),a(h,null,w(_.value.top_endpoints||[],s=>{var p;return i(),a("div",{key:s.endpoint,class:"flex items-center justify-between p-3 rounded-xl bg-slate-700/30"},[e("span",Ds,o(s.endpoint),1),e("div",Fs,[e("span",Ns,o((p=s.avg_response_time)==null?void 0:p.toFixed(0))+"ms avg",1),e("span",Us,o(F(s.total)),1)])])}),128))])]),e("div",null,[t[54]||(t[54]=e("h3",{class:"text-lg font-medium text-white mb-3"},"Most Active Keys",-1)),e("div",Es,[(i(!0),a(h,null,w(_.value.requests_by_key||[],s=>(i(),a("div",{key:s.id,class:"flex items-center justify-between p-3 rounded-xl bg-slate-700/30"},[e("div",null,[e("span",Rs,o(s.name),1),e("span",Ls,o(J(s.key)),1)]),e("span",zs,o(F(s.requests_count)),1)]))),128))])])])])])):m("",!0),I.value?(i(),a("div",qs,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[19]||(t[19]=s=>I.value=!1)}),e("div",Bs,[t[57]||(t[57]=e("h2",{class:"text-xl font-semibold text-white mb-4"},"Delete API Key",-1)),e("p",Ws,[t[55]||(t[55]=b(" Are you sure you want to delete ",-1)),e("strong",Gs,o((re=W.value)==null?void 0:re.name),1),t[56]||(t[56]=b("? This action cannot be undone and will immediately revoke access. ",-1))]),e("div",Os,[e("button",{onClick:t[20]||(t[20]=s=>I.value=!1),class:"px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-xl text-white"}," Cancel "),e("button",{onClick:he,class:"px-4 py-2 bg-red-500 hover:bg-red-600 rounded-xl text-white"}," Delete ")])])])):m("",!0)])}}};export{el as default};
